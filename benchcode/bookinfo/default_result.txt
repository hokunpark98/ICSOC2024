Deleting existing deployments...
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/details.yaml": deployments.apps "details-1" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/details.yaml": deployments.apps "details-2" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/details.yaml": deployments.apps "details-3" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/details.yaml": deployments.apps "details-4" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/products.yaml": deployments.apps "productpage-1" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/products.yaml": deployments.apps "productpage-2" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/products.yaml": deployments.apps "productpage-3" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/products.yaml": deployments.apps "productpage-4" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/products.yaml": deployments.apps "productpage-5" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/ratings.yaml": deployments.apps "ratings-1" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/ratings.yaml": deployments.apps "ratings-2" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/ratings.yaml": deployments.apps "ratings-3" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/ratings.yaml": deployments.apps "ratings-4" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/ratings.yaml": deployments.apps "ratings-5" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/reviews.yaml": deployments.apps "reviews-1" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/reviews.yaml": deployments.apps "reviews-2" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/reviews.yaml": deployments.apps "reviews-3" not found
Error from server (NotFound): error when deleting "/home/dnc/master/bookinfoBench/deployment_placement_x/reviews.yaml": deployments.apps "reviews-4" not found
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Creating new deployments...
deployment.apps/details-1 created
deployment.apps/details-2 created
deployment.apps/details-3 created
deployment.apps/details-4 created
deployment.apps/productpage-1 created
deployment.apps/productpage-2 created
deployment.apps/productpage-3 created
deployment.apps/productpage-4 created
deployment.apps/productpage-5 created
deployment.apps/ratings-1 created
deployment.apps/ratings-2 created
deployment.apps/ratings-3 created
deployment.apps/ratings-4 created
deployment.apps/ratings-5 created
deployment.apps/reviews-1 created
deployment.apps/reviews-2 created
deployment.apps/reviews-3 created
deployment.apps/reviews-4 created
Running 1m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 4258.150ms, rate sampling interval: 13852ms
  Thread calibration: mean lat.: 4044.149ms, rate sampling interval: 11108ms
  Thread calibration: mean lat.: 6006.134ms, rate sampling interval: 16105ms
  Thread calibration: mean lat.: 4281.486ms, rate sampling interval: 15319ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     8.11s     2.42s   12.49s    70.73%
    Req/Sec    11.54      1.55    14.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    8.35s 
 75.000%    9.75s 
 90.000%   11.21s 
 99.000%   11.93s 
 99.900%   12.41s 
 99.990%   12.50s 
 99.999%   12.50s 
100.000%   12.50s 

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      53.471     0.000000            1         1.00
    4988.927     0.100000          251         1.11
    6430.719     0.200000          504         1.25
    7323.647     0.300000          753         1.43
    7909.375     0.400000         1006         1.67
    8351.743     0.500000         1256         2.00
    8536.063     0.550000         1383         2.22
    8749.055     0.600000         1506         2.50
    8986.623     0.650000         1635         2.86
    9338.879     0.700000         1757         3.33
    9748.479     0.750000         1884         4.00
    9879.551     0.775000         1945         4.44
   10076.159     0.800000         2009         5.00
   10330.111     0.825000         2070         5.71
   10698.751     0.850000         2132         6.67
   10969.087     0.875000         2195         8.00
   11124.735     0.887500         2227         8.89
   11223.039     0.900000         2258        10.00
   11362.303     0.912500         2289        11.43
   11476.991     0.925000         2321        13.33
   11542.527     0.937500         2354        16.00
   11591.679     0.943750         2368        17.78
   11632.639     0.950000         2388        20.00
   11657.215     0.956250         2400        22.86
   11706.367     0.962500         2414        26.67
   11747.327     0.968750         2431        32.00
   11780.095     0.971875         2439        35.56
   11804.671     0.975000         2446        40.00
   11829.247     0.978125         2457        45.71
   11853.823     0.981250         2465        53.33
   11870.207     0.984375         2469        64.00
   11894.783     0.985938         2474        71.11
   11911.167     0.987500         2480        80.00
   11927.551     0.989062         2484        91.43
   11935.743     0.990625         2487       106.67
   11993.087     0.992188         2489       128.00
   12017.663     0.992969         2492       142.22
   12058.623     0.993750         2493       160.00
   12107.775     0.994531         2495       182.86
   12214.271     0.995313         2497       213.33
   12320.767     0.996094         2499       256.00
   12328.959     0.996484         2501       284.44
   12328.959     0.996875         2501       320.00
   12345.343     0.997266         2502       365.71
   12369.919     0.997656         2503       426.67
   12410.879     0.998047         2505       512.00
   12410.879     0.998242         2505       568.89
   12410.879     0.998437         2505       640.00
   12410.879     0.998633         2505       731.43
   12427.263     0.998828         2507       853.33
   12427.263     0.999023         2507      1024.00
   12427.263     0.999121         2507      1137.78
   12427.263     0.999219         2507      1280.00
   12427.263     0.999316         2507      1462.86
   12427.263     0.999414         2507      1706.67
   12427.263     0.999512         2507      2048.00
   12427.263     0.999561         2507      2275.56
   12500.991     0.999609         2508      2560.00
   12500.991     1.000000         2508          inf
#[Mean    =     8106.288, StdDeviation   =     2417.986]
#[Max     =    12492.800, Total count    =         2508]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  2690 requests in 1.00m, 39.34MB read
  Socket errors: connect 0, read 0, write 0, timeout 11
Requests/sec:     44.82
Transfer/sec:    671.26KB
Deleting existing virtual services...
No resources found
No resources found
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 114.524ms, rate sampling interval: 354ms
  Thread calibration: mean lat.: 117.563ms, rate sampling interval: 351ms
  Thread calibration: mean lat.: 161.207ms, rate sampling interval: 418ms
  Thread calibration: mean lat.: 94.735ms, rate sampling interval: 327ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   110.66ms   55.07ms 333.31ms   67.87%
    Req/Sec     2.21      2.33     6.00     90.94%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  104.25ms
 75.000%  143.36ms
 90.000%  189.31ms
 99.000%  268.29ms
 99.900%  282.37ms
 99.990%  333.57ms
 99.999%  333.57ms
100.000%  333.57ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      11.583     0.000000            1         1.00
      44.255     0.100000          170         1.11
      60.223     0.200000          340         1.25
      76.991     0.300000          509         1.43
      93.759     0.400000          679         1.67
     104.255     0.500000          848         2.00
     110.719     0.550000          933         2.22
     117.695     0.600000         1018         2.50
     125.055     0.650000         1103         2.86
     136.575     0.700000         1188         3.33
     143.359     0.750000         1272         4.00
     148.991     0.775000         1315         4.44
     154.623     0.800000         1357         5.00
     162.047     0.825000         1401         5.71
     168.703     0.850000         1442         6.67
     181.503     0.875000         1484         8.00
     185.471     0.887500         1506         8.89
     189.439     0.900000         1527        10.00
     192.639     0.912500         1548        11.43
     195.967     0.925000         1569        13.33
     199.167     0.937500         1590        16.00
     201.343     0.943750         1601        17.78
     207.231     0.950000         1612        20.00
     214.015     0.956250         1622        22.86
     224.639     0.962500         1633        26.67
     228.863     0.968750         1644        32.00
     229.759     0.971875         1649        35.56
     234.111     0.975000         1654        40.00
     239.999     0.978125         1660        45.71
     242.687     0.981250         1666        53.33
     245.887     0.984375         1670        64.00
     257.151     0.985938         1673        71.11
     267.007     0.987500         1675        80.00
     268.287     0.989062         1679        91.43
     270.591     0.990625         1681       106.67
     271.871     0.992188         1683       128.00
     273.151     0.992969         1685       142.22
     273.663     0.993750         1686       160.00
     274.687     0.994531         1687       182.86
     276.223     0.995313         1689       213.33
     277.247     0.996094         1690       256.00
     280.319     0.996484         1691       284.44
     280.319     0.996875         1691       320.00
     282.111     0.997266         1692       365.71
     282.367     0.997656         1694       426.67
     282.367     0.998047         1694       512.00
     282.367     0.998242         1694       568.89
     282.367     0.998437         1694       640.00
     282.367     0.998633         1694       731.43
     286.207     0.998828         1695       853.33
     286.207     0.999023         1695      1024.00
     286.207     0.999121         1695      1137.78
     286.207     0.999219         1695      1280.00
     286.207     0.999316         1695      1462.86
     333.567     0.999414         1696      1706.67
     333.567     1.000000         1696          inf
#[Mean    =      110.655, StdDeviation   =       55.071]
#[Max     =      333.312, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 60)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 123)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 45)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 82)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 102)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 59)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-4'], 6)
filtered_path (['productpage-1', 'details-2'], 8)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 112)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 113)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 116)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 142)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 33)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 70)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 143)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 33)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 59)
filtered_path (['productpage-1', 'details-3'], 14)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 75)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 53)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 52)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 194)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 75)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 74)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 173)
filtered_path (['productpage-3', 'details-1'], 16)
filtered_path (['productpage-3', 'details-4'], 61)
filtered_path (['productpage-3', 'details-2'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 75)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 124)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 104)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 184)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 75)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 51)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 213)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 75)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 62)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 214)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 84)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 66)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 55)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 72)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 66)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 77)
filtered_path (['productpage-2', 'details-1'], 2)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'details-2'], 0)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 155)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 66)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 107)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 72)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 66)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 54)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 72)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 66)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 65)
filtered_path (['productpage-2', 'details-3'], 2)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 81)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 50)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 43)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 150)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 81)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 38)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 65)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 129)
filtered_path (['productpage-5', 'details-1'], 15)
filtered_path (['productpage-5', 'details-4'], 34)
filtered_path (['productpage-5', 'details-2'], 10)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 81)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 121)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 95)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 140)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 81)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 38)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 42)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 169)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 81)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 38)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 53)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 170)
filtered_path (['productpage-5', 'details-3'], 9)
original graph map
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-2']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 77.561ms, rate sampling interval: 251ms
  Thread calibration: mean lat.: 93.291ms, rate sampling interval: 315ms
  Thread calibration: mean lat.: 106.897ms, rate sampling interval: 312ms
  Thread calibration: mean lat.: 110.627ms, rate sampling interval: 293ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    75.67ms   35.84ms 209.28ms   63.97%
    Req/Sec     2.29      2.91     8.00     92.26%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   72.51ms
 75.000%  105.86ms
 90.000%  124.61ms
 99.000%  163.33ms
 99.900%  177.92ms
 99.990%  209.41ms
 99.999%  209.41ms
100.000%  209.41ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      11.551     0.000000            1         1.00
      37.183     0.100000          170         1.11
      41.503     0.200000          342         1.25
      48.991     0.300000          509         1.43
      56.575     0.400000          679         1.67
      72.511     0.500000          848         2.00
      77.823     0.550000          937         2.22
      80.831     0.600000         1018         2.50
      86.207     0.650000         1104         2.86
      96.767     0.700000         1188         3.33
     105.855     0.750000         1274         4.00
     108.607     0.775000         1315         4.44
     111.167     0.800000         1357         5.00
     115.519     0.825000         1401         5.71
     119.103     0.850000         1442         6.67
     121.599     0.875000         1486         8.00
     123.199     0.887500         1507         8.89
     124.607     0.900000         1527        10.00
     126.015     0.912500         1549        11.43
     128.639     0.925000         1569        13.33
     130.943     0.937500         1590        16.00
     132.351     0.943750         1601        17.78
     135.167     0.950000         1612        20.00
     137.983     0.956250         1622        22.86
     140.799     0.962500         1633        26.67
     147.455     0.968750         1643        32.00
     149.759     0.971875         1649        35.56
     151.679     0.975000         1654        40.00
     152.703     0.978125         1659        45.71
     156.031     0.981250         1665        53.33
     157.567     0.984375         1671        64.00
     158.463     0.985938         1673        71.11
     160.127     0.987500         1675        80.00
     163.071     0.989062         1678        91.43
     164.095     0.990625         1681       106.67
     164.351     0.992188         1683       128.00
     164.991     0.992969         1685       142.22
     165.247     0.993750         1686       160.00
     166.527     0.994531         1687       182.86
     171.135     0.995313         1689       213.33
     174.079     0.996094         1690       256.00
     175.359     0.996484         1691       284.44
     175.359     0.996875         1691       320.00
     175.615     0.997266         1692       365.71
     177.407     0.997656         1693       426.67
     177.407     0.998047         1693       512.00
     177.919     0.998242         1694       568.89
     177.919     0.998437         1694       640.00
     177.919     0.998633         1694       731.43
     194.815     0.998828         1695       853.33
     194.815     0.999023         1695      1024.00
     194.815     0.999121         1695      1137.78
     194.815     0.999219         1695      1280.00
     194.815     0.999316         1695      1462.86
     209.407     0.999414         1696      1706.67
     209.407     1.000000         1696          inf
#[Mean    =       75.666, StdDeviation   =       35.837]
#[Max     =      209.280, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.32MB read
Requests/sec:     10.00
Transfer/sec:    149.74KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 129.550ms, rate sampling interval: 412ms
  Thread calibration: mean lat.: 149.948ms, rate sampling interval: 472ms
  Thread calibration: mean lat.: 170.491ms, rate sampling interval: 649ms
  Thread calibration: mean lat.: 132.614ms, rate sampling interval: 384ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   115.52ms   56.04ms 389.38ms   64.97%
    Req/Sec     4.58      1.30    10.00     85.90%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  109.31ms
 75.000%  151.68ms
 90.000%  192.38ms
 99.000%  263.93ms
 99.900%  313.86ms
 99.990%  389.63ms
 99.999%  389.63ms
100.000%  389.63ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      11.367     0.000000            1         1.00
      47.007     0.100000          340         1.11
      63.391     0.200000          680         1.25
      82.431     0.300000         1021         1.43
      96.575     0.400000         1360         1.67
     109.311     0.500000         1700         2.00
     115.519     0.550000         1870         2.22
     123.071     0.600000         2040         2.50
     135.295     0.650000         2213         2.86
     141.567     0.700000         2380         3.33
     151.679     0.750000         2550         4.00
     157.695     0.775000         2637         4.44
     163.327     0.800000         2721         5.00
     170.879     0.825000         2805         5.71
     179.071     0.850000         2892         6.67
     187.391     0.875000         2978         8.00
     189.823     0.887500         3019         8.89
     192.383     0.900000         3064        10.00
     195.199     0.912500         3104        11.43
     199.039     0.925000         3146        13.33
     206.463     0.937500         3188        16.00
     213.503     0.943750         3209        17.78
     218.367     0.950000         3230        20.00
     221.823     0.956250         3252        22.86
     224.383     0.962500         3273        26.67
     228.351     0.968750         3294        32.00
     230.527     0.971875         3305        35.56
     233.727     0.975000         3315        40.00
     237.823     0.978125         3326        45.71
     240.639     0.981250         3338        53.33
     242.687     0.984375         3347        64.00
     257.791     0.985938         3354        71.11
     261.759     0.987500         3358        80.00
     263.423     0.989062         3364        91.43
     264.191     0.990625         3369       106.67
     265.471     0.992188         3375       128.00
     265.727     0.992969         3378       142.22
     266.239     0.993750         3379       160.00
     268.543     0.994531         3382       182.86
     269.567     0.995313         3385       213.33
     270.335     0.996094         3387       256.00
     270.847     0.996484         3389       284.44
     275.455     0.996875         3390       320.00
     282.367     0.997266         3391       365.71
     285.183     0.997656         3393       426.67
     285.951     0.998047         3394       512.00
     291.071     0.998242         3395       568.89
     291.071     0.998437         3395       640.00
     294.911     0.998633         3396       731.43
     313.855     0.998828         3397       853.33
     313.855     0.999023         3397      1024.00
     353.791     0.999121         3398      1137.78
     353.791     0.999219         3398      1280.00
     353.791     0.999316         3398      1462.86
     389.375     0.999414         3399      1706.67
     389.375     0.999512         3399      2048.00
     389.375     0.999561         3399      2275.56
     389.375     0.999609         3399      2560.00
     389.375     0.999658         3399      2925.71
     389.631     0.999707         3400      3413.33
     389.631     1.000000         3400          inf
#[Mean    =      115.517, StdDeviation   =       56.040]
#[Max     =      389.376, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.48KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 37)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 119)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 97)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 121)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 37)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 36)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 44)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 151)
filtered_path (['productpage-3', 'details-1'], 12)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 37)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 36)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 67)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 110)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 56)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 151)
filtered_path (['productpage-3', 'details-2'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 37)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 48)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 45)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 132)
filtered_path (['productpage-3', 'details-4'], 69)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 103)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 73)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 135)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 20)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 20)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 135)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-4', 'details-1'], 61)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 20)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 43)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 135)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 20)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 32)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 135)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 32)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 21)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 135)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 120)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 118)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 77)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 37)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 39)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 148)
filtered_path (['productpage-5', 'details-1'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 77)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 37)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 107)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 77)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 51)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 148)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 77)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 49)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 129)
filtered_path (['productpage-5', 'details-4'], 35)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 154)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 47)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 36)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 97)
filtered_path (['productpage-2', 'details-3'], 3)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 47)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 66)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 44)
filtered_path (['productpage-2', 'details-1'], 5)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 47)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 25)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 67)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 47)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 66)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 56)
filtered_path (['productpage-2', 'details-2'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 83)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 47)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 47)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 45)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 103)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 81)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 116)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 55)
filtered_path (['productpage-1', 'details-3'], 14)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 50)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 111)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 33)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 55)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 73)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 70)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 55)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 62)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 111)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 33)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 55)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 51)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 92)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 45)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 55)
filtered_path (['productpage-1', 'details-4'], 6)
original graph map
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-2']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 82.484ms, rate sampling interval: 252ms
  Thread calibration: mean lat.: 75.044ms, rate sampling interval: 246ms
  Thread calibration: mean lat.: 84.616ms, rate sampling interval: 292ms
  Thread calibration: mean lat.: 93.081ms, rate sampling interval: 295ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    72.25ms   36.83ms 229.12ms   64.53%
    Req/Sec     4.53      2.82    10.00     78.41%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   71.87ms
 75.000%  100.22ms
 90.000%  121.60ms
 99.000%  157.82ms
 99.900%  171.39ms
 99.990%  229.25ms
 99.999%  229.25ms
100.000%  229.25ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.383     0.000000            1         1.00
      29.183     0.100000          340         1.11
      36.895     0.200000          681         1.25
      44.159     0.300000         1021         1.43
      56.479     0.400000         1360         1.67
      71.871     0.500000         1701         2.00
      75.583     0.550000         1870         2.22
      78.847     0.600000         2041         2.50
      82.943     0.650000         2210         2.86
      91.007     0.700000         2380         3.33
     100.223     0.750000         2550         4.00
     103.487     0.775000         2635         4.44
     107.135     0.800000         2720         5.00
     112.383     0.825000         2805         5.71
     116.607     0.850000         2892         6.67
     118.847     0.875000         2975         8.00
     120.447     0.887500         3018         8.89
     121.599     0.900000         3060        10.00
     123.839     0.912500         3103        11.43
     126.399     0.925000         3145        13.33
     132.863     0.937500         3188        16.00
     135.039     0.943750         3209        17.78
     141.951     0.950000         3231        20.00
     143.615     0.956250         3252        22.86
     145.279     0.962500         3274        26.67
     147.199     0.968750         3295        32.00
     148.095     0.971875         3305        35.56
     149.631     0.975000         3315        40.00
     151.039     0.978125         3326        45.71
     152.063     0.981250         3338        53.33
     152.831     0.984375         3347        64.00
     154.367     0.985938         3356        71.11
     154.879     0.987500         3358        80.00
     156.671     0.989062         3363        91.43
     159.359     0.990625         3369       106.67
     160.767     0.992188         3376       128.00
     161.023     0.992969         3377       142.22
     161.407     0.993750         3379       160.00
     162.559     0.994531         3382       182.86
     162.815     0.995313         3385       213.33
     165.375     0.996094         3387       256.00
     166.143     0.996484         3389       284.44
     167.551     0.996875         3390       320.00
     167.807     0.997266         3391       365.71
     169.215     0.997656         3393       426.67
     169.855     0.998047         3394       512.00
     170.367     0.998242         3395       568.89
     170.367     0.998437         3395       640.00
     171.007     0.998633         3396       731.43
     171.391     0.998828         3397       853.33
     171.391     0.999023         3397      1024.00
     171.519     0.999121         3398      1137.78
     171.519     0.999219         3398      1280.00
     171.519     0.999316         3398      1462.86
     178.175     0.999414         3399      1706.67
     178.175     0.999512         3399      2048.00
     178.175     0.999561         3399      2275.56
     178.175     0.999609         3399      2560.00
     178.175     0.999658         3399      2925.71
     229.247     0.999707         3400      3413.33
     229.247     1.000000         3400          inf
#[Mean    =       72.252, StdDeviation   =       36.833]
#[Max     =      229.120, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.48KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 144.303ms, rate sampling interval: 531ms
  Thread calibration: mean lat.: 139.234ms, rate sampling interval: 521ms
  Thread calibration: mean lat.: 100.717ms, rate sampling interval: 306ms
  Thread calibration: mean lat.: 163.402ms, rate sampling interval: 587ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   109.33ms   54.54ms 387.58ms   67.03%
    Req/Sec     6.90      1.67    13.00     93.62%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  104.96ms
 75.000%  141.05ms
 90.000%  187.01ms
 99.000%  261.25ms
 99.900%  299.01ms
 99.990%  357.12ms
 99.999%  387.84ms
100.000%  387.84ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.783     0.000000            1         1.00
      43.775     0.100000          510         1.11
      59.071     0.200000         1020         1.25
      75.775     0.300000         1531         1.43
      92.415     0.400000         2042         1.67
     104.959     0.500000         2549         2.00
     109.567     0.550000         2807         2.22
     116.095     0.600000         3059         2.50
     123.583     0.650000         3314         2.86
     135.551     0.700000         3575         3.33
     141.055     0.750000         3826         4.00
     146.303     0.775000         3951         4.44
     152.319     0.800000         4079         5.00
     159.487     0.825000         4207         5.71
     170.239     0.850000         4334         6.67
     179.199     0.875000         4463         8.00
     183.039     0.887500         4527         8.89
     187.007     0.900000         4589        10.00
     189.567     0.912500         4653        11.43
     193.407     0.925000         4717        13.33
     198.911     0.937500         4780        16.00
     206.079     0.943750         4813        17.78
     215.423     0.950000         4844        20.00
     217.727     0.956250         4877        22.86
     219.519     0.962500         4908        26.67
     223.999     0.968750         4939        32.00
     226.303     0.971875         4956        35.56
     228.863     0.975000         4973        40.00
     231.423     0.978125         4987        45.71
     234.239     0.981250         5003        53.33
     237.823     0.984375         5019        64.00
     242.175     0.985938         5027        71.11
     259.199     0.987500         5035        80.00
     260.479     0.989062         5043        91.43
     262.399     0.990625         5053       106.67
     263.423     0.992188         5059       128.00
     264.191     0.992969         5065       142.22
     264.959     0.993750         5069       160.00
     265.215     0.994531         5072       182.86
     266.239     0.995313         5076       213.33
     267.775     0.996094         5080       256.00
     268.031     0.996484         5081       284.44
     277.503     0.996875         5083       320.00
     278.015     0.997266         5086       365.71
     278.783     0.997656         5087       426.67
     280.319     0.998047         5089       512.00
     281.343     0.998242         5090       568.89
     284.927     0.998437         5091       640.00
     291.327     0.998633         5092       731.43
     299.007     0.998828         5093       853.33
     312.831     0.999023         5094      1024.00
     312.831     0.999121         5094      1137.78
     330.495     0.999219         5095      1280.00
     330.495     0.999316         5095      1462.86
     356.351     0.999414         5096      1706.67
     356.351     0.999512         5096      2048.00
     356.351     0.999561         5096      2275.56
     357.119     0.999609         5097      2560.00
     357.119     0.999658         5097      2925.71
     357.119     0.999707         5097      3413.33
     357.119     0.999756         5097      4096.00
     357.119     0.999780         5097      4551.11
     387.839     0.999805         5098      5120.00
     387.839     1.000000         5098          inf
#[Mean    =      109.325, StdDeviation   =       54.540]
#[Max     =      387.584, Total count    =         5098]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.22KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 78)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 37)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 39)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 106)
filtered_path (['productpage-5', 'details-2'], 10)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 78)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 49)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 87)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 78)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 51)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 106)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 78)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 120)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 93)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 76)
filtered_path (['productpage-5', 'details-1'], 10)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 78)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 37)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 65)
filtered_path (['productpage-5', 'details-4'], 35)
filtered_path (['productpage-5', 'details-3'], 6)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 40)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 52)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 94)
filtered_path (['productpage-2', 'details-1'], 5)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 63)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'details-3'], 6)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 35)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 39)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 132)
filtered_path (['productpage-3', 'details-2'], 11)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 24)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 47)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 113)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 24)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 35)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 51)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 132)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 24)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 118)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 93)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 102)
filtered_path (['productpage-3', 'details-1'], 13)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 24)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 35)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 62)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 91)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'details-3'], 10)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 44)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 93)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 31)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 52)
filtered_path (['productpage-1', 'details-2'], 8)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 45)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 43)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 52)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 56)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 93)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 31)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 52)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 98)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 63)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 52)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 67)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 52)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 52)
filtered_path (['productpage-1', 'details-4'], 4)
filtered_path (['productpage-1', 'details-3'], 14)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 20)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 133)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-4', 'details-2'], 9)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 34)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 21)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 133)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 32)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 133)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 105)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 74)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 133)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 43)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 133)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-4', 'details-4'], 6)
filtered_path (['productpage-4', 'details-3'], 58)
original graph map
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 80.344ms, rate sampling interval: 252ms
  Thread calibration: mean lat.: 73.451ms, rate sampling interval: 249ms
  Thread calibration: mean lat.: 68.307ms, rate sampling interval: 249ms
  Thread calibration: mean lat.: 66.206ms, rate sampling interval: 255ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    60.81ms   35.98ms 362.75ms   61.83%
    Req/Sec     7.05      2.15    16.00     85.06%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   52.99ms
 75.000%   91.90ms
 90.000%  111.81ms
 99.000%  144.00ms
 99.900%  163.58ms
 99.990%  348.93ms
 99.999%  363.01ms
100.000%  363.01ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.591     0.000000            1         1.00
      14.735     0.100000          510         1.11
      26.655     0.200000         1020         1.25
      36.159     0.300000         1530         1.43
      46.687     0.400000         2040         1.67
      52.991     0.500000         2551         2.00
      57.151     0.550000         2803         2.22
      65.791     0.600000         3059         2.50
      73.535     0.650000         3313         2.86
      81.791     0.700000         3569         3.33
      91.903     0.750000         3823         4.00
      94.207     0.775000         3952         4.44
      96.319     0.800000         4078         5.00
      98.623     0.825000         4209         5.71
     101.183     0.850000         4332         6.67
     104.511     0.875000         4460         8.00
     107.967     0.887500         4523         8.89
     111.871     0.900000         4588        10.00
     113.663     0.912500         4651        11.43
     115.391     0.925000         4715        13.33
     118.527     0.937500         4780        16.00
     120.191     0.943750         4811        17.78
     121.727     0.950000         4844        20.00
     124.607     0.956250         4874        22.86
     127.551     0.962500         4906        26.67
     130.687     0.968750         4938        32.00
     132.479     0.971875         4953        35.56
     133.503     0.975000         4969        40.00
     135.807     0.978125         4988        45.71
     137.343     0.981250         5001        53.33
     139.647     0.984375         5018        64.00
     140.671     0.985938         5025        71.11
     142.335     0.987500         5033        80.00
     143.743     0.989062         5042        91.43
     144.767     0.990625         5049       106.67
     146.047     0.992188         5057       128.00
     147.071     0.992969         5061       142.22
     147.711     0.993750         5066       160.00
     148.095     0.994531         5070       182.86
     149.375     0.995313         5073       213.33
     150.527     0.996094         5077       256.00
     151.039     0.996484         5079       284.44
     152.063     0.996875         5081       320.00
     152.959     0.997266         5083       365.71
     154.367     0.997656         5086       426.67
     154.751     0.998047         5087       512.00
     155.647     0.998242         5088       568.89
     155.775     0.998437         5089       640.00
     162.175     0.998633         5090       731.43
     163.583     0.998828         5091       853.33
     177.023     0.999023         5092      1024.00
     177.023     0.999121         5092      1137.78
     185.215     0.999219         5093      1280.00
     185.215     0.999316         5093      1462.86
     348.159     0.999414         5094      1706.67
     348.159     0.999512         5094      2048.00
     348.159     0.999561         5094      2275.56
     348.927     0.999609         5095      2560.00
     348.927     0.999658         5095      2925.71
     348.927     0.999707         5095      3413.33
     348.927     0.999756         5095      4096.00
     348.927     0.999780         5095      4551.11
     363.007     0.999805         5096      5120.00
     363.007     1.000000         5096          inf
#[Mean    =       60.807, StdDeviation   =       35.980]
#[Max     =      362.752, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.97MB read
Requests/sec:     30.00
Transfer/sec:    449.21KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 133.684ms, rate sampling interval: 439ms
  Thread calibration: mean lat.: 151.130ms, rate sampling interval: 502ms
  Thread calibration: mean lat.: 158.923ms, rate sampling interval: 535ms
  Thread calibration: mean lat.: 121.808ms, rate sampling interval: 408ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   110.19ms   50.00ms 345.60ms   68.63%
    Req/Sec     9.46      1.78    15.00     92.39%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  104.96ms
 75.000%  140.80ms
 90.000%  179.84ms
 99.000%  257.92ms
 99.900%  288.51ms
 99.990%  316.42ms
 99.999%  345.86ms
100.000%  345.86ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.615     0.000000            1         1.00
      53.023     0.100000          680         1.11
      67.199     0.200000         1360         1.25
      79.231     0.300000         2041         1.43
      91.967     0.400000         2720         1.67
     104.959     0.500000         3400         2.00
     111.039     0.550000         3743         2.22
     117.823     0.600000         4081         2.50
     123.455     0.650000         4422         2.86
     133.887     0.700000         4765         3.33
     140.799     0.750000         5105         4.00
     144.511     0.775000         5277         4.44
     150.527     0.800000         5446         5.00
     156.671     0.825000         5613         5.71
     162.431     0.850000         5782         6.67
     170.879     0.875000         5951         8.00
     176.255     0.887500         6036         8.89
     179.839     0.900000         6120        10.00
     184.063     0.912500         6205        11.43
     189.055     0.925000         6291        13.33
     192.255     0.937500         6376        16.00
     194.175     0.943750         6418        17.78
     196.479     0.950000         6462        20.00
     200.191     0.956250         6505        22.86
     214.143     0.962500         6545        26.67
     219.903     0.968750         6591        32.00
     220.671     0.971875         6611        35.56
     221.823     0.975000         6632        40.00
     222.847     0.978125         6654        45.71
     225.919     0.981250         6674        53.33
     234.879     0.984375         6694        64.00
     236.671     0.985938         6705        71.11
     240.383     0.987500         6715        80.00
     254.847     0.989062         6726        91.43
     261.247     0.990625         6737       106.67
     262.399     0.992188         6748       128.00
     263.423     0.992969         6755       142.22
     263.679     0.993750         6759       160.00
     264.191     0.994531         6764       182.86
     264.959     0.995313         6771       213.33
     265.471     0.996094         6774       256.00
     266.751     0.996484         6777       284.44
     267.007     0.996875         6780       320.00
     268.287     0.997266         6783       365.71
     269.311     0.997656         6785       426.67
     276.479     0.998047         6787       512.00
     279.039     0.998242         6789       568.89
     280.319     0.998437         6790       640.00
     281.599     0.998633         6791       731.43
     288.511     0.998828         6793       853.33
     289.535     0.999023         6794      1024.00
     295.679     0.999121         6795      1137.78
     295.679     0.999219         6795      1280.00
     296.959     0.999316         6796      1462.86
     297.215     0.999414         6797      1706.67
     297.215     0.999512         6797      2048.00
     299.263     0.999561         6798      2275.56
     299.263     0.999609         6798      2560.00
     299.263     0.999658         6798      2925.71
     316.415     0.999707         6799      3413.33
     316.415     0.999756         6799      4096.00
     316.415     0.999780         6799      4551.11
     316.415     0.999805         6799      5120.00
     316.415     0.999829         6799      5851.43
     345.855     0.999854         6800      6826.67
     345.855     1.000000         6800          inf
#[Mean    =      110.195, StdDeviation   =       50.000]
#[Max     =      345.600, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     39.99
Transfer/sec:    598.95KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 73)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 34)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 44)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 82)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 73)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 34)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 55)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 41)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 73)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 117)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 86)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 53)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 73)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 46)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 33)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 73)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 34)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 32)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 82)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'details-3'], 4)
filtered_path (['productpage-3', 'details-1'], 11)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 21)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 35)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 52)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 132)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 21)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 35)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 63)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 91)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 21)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 118)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 94)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 103)
filtered_path (['productpage-3', 'details-2'], 11)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 21)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 47)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 41)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 113)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 21)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 35)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 40)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 132)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'details-3'], 10)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-3'], 8)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 21)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 31)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 21)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 42)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 104)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 73)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 33)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 20)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 21)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 19)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-1', 'details-1'], 62)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 52)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 85)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 16)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 51)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 63)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 16)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 51)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 94)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 56)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 51)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 41)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 66)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 28)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 51)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 40)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 85)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 16)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 51)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-3'], 17)
original graph map
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 63.166ms, rate sampling interval: 242ms
  Thread calibration: mean lat.: 81.298ms, rate sampling interval: 238ms
  Thread calibration: mean lat.: 68.739ms, rate sampling interval: 233ms
  Thread calibration: mean lat.: 90.538ms, rate sampling interval: 299ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    68.25ms   35.27ms 236.67ms   67.46%
    Req/Sec     9.55      2.71    17.00     92.37%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   64.45ms
 75.000%   96.57ms
 90.000%  115.90ms
 99.000%  152.06ms
 99.900%  164.61ms
 99.990%  185.98ms
 99.999%  236.80ms
100.000%  236.80ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.951     0.000000            1         1.00
      24.463     0.100000          680         1.11
      35.359     0.200000         1362         1.25
      45.247     0.300000         2042         1.43
      54.687     0.400000         2721         1.67
      64.447     0.500000         3400         2.00
      69.183     0.550000         3745         2.22
      73.919     0.600000         4084         2.50
      81.087     0.650000         4422         2.86
      87.743     0.700000         4761         3.33
      96.575     0.750000         5103         4.00
      99.263     0.775000         5274         4.44
     101.311     0.800000         5440         5.00
     102.975     0.825000         5614         5.71
     105.343     0.850000         5782         6.67
     110.911     0.875000         5953         8.00
     113.535     0.887500         6035         8.89
     115.903     0.900000         6120        10.00
     118.399     0.912500         6206        11.43
     121.727     0.925000         6290        13.33
     124.863     0.937500         6375        16.00
     126.783     0.943750         6419        17.78
     129.023     0.950000         6460        20.00
     133.631     0.956250         6504        22.86
     139.263     0.962500         6547        26.67
     143.999     0.968750         6588        32.00
     145.151     0.971875         6611        35.56
     146.175     0.975000         6632        40.00
     146.815     0.978125         6654        45.71
     147.839     0.981250         6674        53.33
     149.247     0.984375         6694        64.00
     149.887     0.985938         6706        71.11
     150.399     0.987500         6715        80.00
     151.551     0.989062         6726        91.43
     152.575     0.990625         6738       106.67
     153.727     0.992188         6747       128.00
     154.495     0.992969         6753       142.22
     156.287     0.993750         6758       160.00
     156.927     0.994531         6763       182.86
     158.079     0.995313         6770       213.33
     158.463     0.996094         6774       256.00
     159.359     0.996484         6777       284.44
     159.871     0.996875         6780       320.00
     160.383     0.997266         6783       365.71
     161.791     0.997656         6785       426.67
     162.303     0.998047         6787       512.00
     163.839     0.998242         6789       568.89
     163.967     0.998437         6790       640.00
     164.223     0.998633         6791       731.43
     164.607     0.998828         6794       853.33
     164.607     0.999023         6794      1024.00
     169.215     0.999121         6795      1137.78
     169.215     0.999219         6795      1280.00
     172.287     0.999316         6796      1462.86
     184.063     0.999414         6797      1706.67
     184.063     0.999512         6797      2048.00
     184.319     0.999561         6798      2275.56
     184.319     0.999609         6798      2560.00
     184.319     0.999658         6798      2925.71
     185.983     0.999707         6799      3413.33
     185.983     0.999756         6799      4096.00
     185.983     0.999780         6799      4551.11
     185.983     0.999805         6799      5120.00
     185.983     0.999829         6799      5851.43
     236.799     0.999854         6800      6826.67
     236.799     1.000000         6800          inf
#[Mean    =       68.249, StdDeviation   =       35.271]
#[Max     =      236.672, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7201 requests in 3.00m, 105.31MB read
Requests/sec:     40.00
Transfer/sec:    599.04KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 477.256ms, rate sampling interval: 2086ms
  Thread calibration: mean lat.: 161.128ms, rate sampling interval: 663ms
  Thread calibration: mean lat.: 147.051ms, rate sampling interval: 621ms
  Thread calibration: mean lat.: 140.529ms, rate sampling interval: 467ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   116.86ms   56.67ms 502.78ms   67.26%
    Req/Sec    11.91      1.53    17.00     90.24%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  110.27ms
 75.000%  151.81ms
 90.000%  190.59ms
 99.000%  269.82ms
 99.900%  351.49ms
 99.990%  473.34ms
 99.999%  503.04ms
100.000%  503.04ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.431     0.000000            1         1.00
      49.855     0.100000          850         1.11
      67.455     0.200000         1703         1.25
      82.111     0.300000         2551         1.43
      96.895     0.400000         3403         1.67
     110.271     0.500000         4250         2.00
     116.927     0.550000         4674         2.22
     124.159     0.600000         5103         2.50
     134.143     0.650000         5525         2.86
     141.439     0.700000         5951         3.33
     151.807     0.750000         6375         4.00
     156.799     0.775000         6588         4.44
     163.199     0.800000         6804         5.00
     171.135     0.825000         7012         5.71
     177.663     0.850000         7226         6.67
     184.831     0.875000         7436         8.00
     187.903     0.887500         7548         8.89
     190.591     0.900000         7649        10.00
     194.687     0.912500         7757        11.43
     201.215     0.925000         7862        13.33
     211.839     0.937500         7967        16.00
     216.447     0.943750         8020        17.78
     218.751     0.950000         8074        20.00
     223.103     0.956250         8127        22.86
     229.375     0.962500         8181        26.67
     234.239     0.968750         8233        32.00
     237.695     0.971875         8260        35.56
     243.455     0.975000         8286        40.00
     250.111     0.978125         8313        45.71
     256.127     0.981250         8339        53.33
     260.735     0.984375         8366        64.00
     262.143     0.985938         8382        71.11
     263.679     0.987500         8392        80.00
     265.471     0.989062         8406        91.43
     273.663     0.990625         8419       106.67
     276.735     0.992188         8432       128.00
     281.599     0.992969         8439       142.22
     285.439     0.993750         8445       160.00
     290.815     0.994531         8453       182.86
     296.191     0.995313         8459       213.33
     304.383     0.996094         8465       256.00
     308.479     0.996484         8469       284.44
     309.247     0.996875         8472       320.00
     311.039     0.997266         8476       365.71
     317.951     0.997656         8479       426.67
     321.023     0.998047         8482       512.00
     334.079     0.998242         8484       568.89
     335.615     0.998437         8485       640.00
     342.015     0.998633         8487       731.43
     344.575     0.998828         8489       853.33
     351.487     0.999023         8490      1024.00
     353.535     0.999121         8491      1137.78
     368.127     0.999219         8492      1280.00
     386.815     0.999316         8493      1462.86
     388.863     0.999414         8494      1706.67
     388.863     0.999512         8494      2048.00
     399.871     0.999561         8495      2275.56
     399.871     0.999609         8495      2560.00
     428.031     0.999658         8496      2925.71
     428.031     0.999707         8496      3413.33
     428.031     0.999756         8496      4096.00
     473.343     0.999780         8497      4551.11
     473.343     0.999805         8497      5120.00
     473.343     0.999829         8497      5851.43
     473.343     0.999854         8497      6826.67
     473.343     0.999878         8497      8192.00
     503.039     0.999890         8498      9102.22
     503.039     1.000000         8498          inf
#[Mean    =      116.865, StdDeviation   =       56.668]
#[Max     =      502.784, Total count    =         8498]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.63MB read
Requests/sec:     49.99
Transfer/sec:    748.72KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 32)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 53)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 32)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 30)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 115)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 84)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 44)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 31)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'details-1'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 32)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 42)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-3'], 3)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 74)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 115)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 86)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 43)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 96)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'details-1'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 115)
filtered_path (['productpage-3', 'details-2'], 12)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 68)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 68)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 151)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 80)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 68)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-2'], 14)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 38)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 13)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 50)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 79)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 13)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 50)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 50)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 96)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 50)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 60)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 25)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 50)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-1'], 61)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 79)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 13)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 50)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 42)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 19)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 105)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 73)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 34)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 20)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 31)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'details-3'], 58)
original graph map
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 55.391ms, rate sampling interval: 200ms
  Thread calibration: mean lat.: 60.387ms, rate sampling interval: 208ms
  Thread calibration: mean lat.: 62.147ms, rate sampling interval: 230ms
  Thread calibration: mean lat.: 63.271ms, rate sampling interval: 215ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    57.93ms   36.21ms 225.66ms   60.37%
    Req/Sec    12.18      3.57    21.00     82.90%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.79ms
 75.000%   91.52ms
 90.000%  105.47ms
 99.000%  148.86ms
 99.900%  164.35ms
 99.990%  185.21ms
 99.999%  225.79ms
100.000%  225.79ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.791     0.000000            1         1.00
      13.631     0.100000          850         1.11
      24.111     0.200000         1700         1.25
      32.239     0.300000         2551         1.43
      40.927     0.400000         3400         1.67
      53.791     0.500000         4253         2.00
      55.871     0.550000         4676         2.22
      57.951     0.600000         5105         2.50
      62.527     0.650000         5525         2.86
      75.135     0.700000         5951         3.33
      91.519     0.750000         6373         4.00
      95.231     0.775000         6586         4.44
      96.575     0.800000         6798         5.00
      99.007     0.825000         7013         5.71
     100.671     0.850000         7228         6.67
     102.719     0.875000         7438         8.00
     103.743     0.887500         7542         8.89
     105.535     0.900000         7649        10.00
     113.215     0.912500         7756        11.43
     115.199     0.925000         7860        13.33
     117.695     0.937500         7966        16.00
     118.783     0.943750         8023        17.78
     120.063     0.950000         8073        20.00
     122.687     0.956250         8126        22.86
     127.039     0.962500         8180        26.67
     133.119     0.968750         8232        32.00
     138.239     0.971875         8260        35.56
     141.311     0.975000         8285        40.00
     143.615     0.978125         8314        45.71
     144.895     0.981250         8338        53.33
     146.687     0.984375         8366        64.00
     147.583     0.985938         8379        71.11
     147.967     0.987500         8391        80.00
     148.607     0.989062         8406        91.43
     149.631     0.990625         8418       106.67
     150.911     0.992188         8431       128.00
     151.423     0.992969         8438       142.22
     153.087     0.993750         8444       160.00
     154.239     0.994531         8452       182.86
     155.263     0.995313         8458       213.33
     156.927     0.996094         8464       256.00
     157.695     0.996484         8469       284.44
     158.207     0.996875         8471       320.00
     159.359     0.997266         8474       365.71
     160.895     0.997656         8478       426.67
     161.663     0.998047         8481       512.00
     162.303     0.998242         8484       568.89
     162.303     0.998437         8484       640.00
     163.711     0.998633         8486       731.43
     164.223     0.998828         8488       853.33
     164.351     0.999023         8489      1024.00
     165.247     0.999121         8490      1137.78
     165.631     0.999219         8492      1280.00
     165.631     0.999316         8492      1462.86
     168.191     0.999414         8493      1706.67
     168.191     0.999512         8493      2048.00
     168.703     0.999561         8494      2275.56
     168.703     0.999609         8494      2560.00
     170.495     0.999658         8495      2925.71
     170.495     0.999707         8495      3413.33
     170.495     0.999756         8495      4096.00
     185.215     0.999780         8496      4551.11
     185.215     0.999805         8496      5120.00
     185.215     0.999829         8496      5851.43
     185.215     0.999854         8496      6826.67
     185.215     0.999878         8496      8192.00
     225.791     0.999890         8497      9102.22
     225.791     1.000000         8497          inf
#[Mean    =       57.934, StdDeviation   =       36.206]
#[Max     =      225.664, Total count    =         8497]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9001 requests in 3.00m, 131.64MB read
Requests/sec:     50.00
Transfer/sec:    748.77KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 174.104ms, rate sampling interval: 556ms
  Thread calibration: mean lat.: 141.976ms, rate sampling interval: 538ms
  Thread calibration: mean lat.: 192.021ms, rate sampling interval: 664ms
  Thread calibration: mean lat.: 154.872ms, rate sampling interval: 602ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   112.59ms   55.22ms 355.33ms   65.92%
    Req/Sec     2.12      1.25     3.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  106.56ms
 75.000%  147.33ms
 90.000%  187.52ms
 99.000%  261.38ms
 99.900%  353.79ms
 99.990%  355.58ms
 99.999%  355.58ms
100.000%  355.58ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.063     0.000000            1         1.00
      46.687     0.100000          170         1.11
      61.791     0.200000          341         1.25
      78.847     0.300000          509         1.43
      93.119     0.400000          681         1.67
     106.559     0.500000          848         2.00
     113.663     0.550000          935         2.22
     119.551     0.600000         1018         2.50
     129.663     0.650000         1103         2.86
     137.599     0.700000         1188         3.33
     147.327     0.750000         1272         4.00
     155.647     0.775000         1316         4.44
     159.231     0.800000         1357         5.00
     165.759     0.825000         1401         5.71
     174.079     0.850000         1442         6.67
     182.015     0.875000         1485         8.00
     185.727     0.887500         1506         8.89
     187.647     0.900000         1527        10.00
     191.487     0.912500         1548        11.43
     197.119     0.925000         1569        13.33
     201.343     0.937500         1590        16.00
     204.159     0.943750         1601        17.78
     206.975     0.950000         1612        20.00
     211.967     0.956250         1622        22.86
     218.239     0.962500         1633        26.67
     226.815     0.968750         1643        32.00
     229.887     0.971875         1649        35.56
     233.599     0.975000         1654        40.00
     236.671     0.978125         1660        45.71
     239.231     0.981250         1665        53.33
     240.767     0.984375         1670        64.00
     246.655     0.985938         1673        71.11
     255.999     0.987500         1675        80.00
     259.199     0.989062         1678        91.43
     263.167     0.990625         1681       106.67
     265.727     0.992188         1683       128.00
     269.055     0.992969         1685       142.22
     270.079     0.993750         1686       160.00
     272.383     0.994531         1687       182.86
     277.503     0.995313         1689       213.33
     280.063     0.996094         1690       256.00
     281.599     0.996484         1691       284.44
     281.599     0.996875         1691       320.00
     281.855     0.997266         1692       365.71
     296.191     0.997656         1693       426.67
     296.191     0.998047         1693       512.00
     353.791     0.998242         1694       568.89
     353.791     0.998437         1694       640.00
     353.791     0.998633         1694       731.43
     354.303     0.998828         1695       853.33
     354.303     0.999023         1695      1024.00
     354.303     0.999121         1695      1137.78
     354.303     0.999219         1695      1280.00
     354.303     0.999316         1695      1462.86
     355.583     0.999414         1696      1706.67
     355.583     1.000000         1696          inf
#[Mean    =      112.593, StdDeviation   =       55.218]
#[Max     =      355.328, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 57)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 67)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 115)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 79)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 34)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 108)
filtered_path (['productpage-3', 'details-4'], 73)
filtered_path (['productpage-3', 'details-2'], 12)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 43)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 35)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 89)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 46)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 108)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 32)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 53)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 24)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 116)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 84)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 32)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 30)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 65)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-2'], 13)
filtered_path (['productpage-5', 'details-3'], 3)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 44)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 31)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 46)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 70)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 32)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 42)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 65)
filtered_path (['productpage-5', 'details-1'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 42)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 106)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 73)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 19)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 34)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 20)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 22)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 31)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 38)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 50)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 50)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 50)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 79)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 50)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-3'], 17)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 60)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 20)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 50)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 79)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 50)
filtered_path (['productpage-1', 'details-1'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 62)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 93)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 39)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'details-2'], 14)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 51)
filtered_path (['productpage-2', 'details-1'], 8)
original graph map
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 103.609ms, rate sampling interval: 406ms
  Thread calibration: mean lat.: 64.821ms, rate sampling interval: 211ms
  Thread calibration: mean lat.: 71.395ms, rate sampling interval: 276ms
  Thread calibration: mean lat.: 84.879ms, rate sampling interval: 263ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.19ms   33.31ms 165.12ms   65.09%
    Req/Sec     2.27      3.16     9.00     78.32%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.22ms
 75.000%   82.62ms
 90.000%  115.07ms
 99.000%  141.31ms
 99.900%  163.20ms
 99.990%  165.25ms
 99.999%  165.25ms
100.000%  165.25ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.415     0.000000            1         1.00
      24.399     0.100000          171         1.11
      32.511     0.200000          340         1.25
      37.919     0.300000          510         1.43
      47.039     0.400000          679         1.67
      53.215     0.500000          848         2.00
      58.015     0.550000          933         2.22
      69.247     0.600000         1018         2.50
      74.303     0.650000         1103         2.86
      77.887     0.700000         1188         3.33
      82.623     0.750000         1272         4.00
      88.319     0.775000         1316         4.44
      94.847     0.800000         1359         5.00
     100.287     0.825000         1400         5.71
     103.295     0.850000         1443         6.67
     108.287     0.875000         1485         8.00
     113.791     0.887500         1506         8.89
     115.135     0.900000         1527        10.00
     116.415     0.912500         1548        11.43
     118.335     0.925000         1571        13.33
     119.999     0.937500         1591        16.00
     120.895     0.943750         1601        17.78
     122.175     0.950000         1612        20.00
     123.903     0.956250         1622        22.86
     124.799     0.962500         1633        26.67
     126.719     0.968750         1643        32.00
     127.295     0.971875         1649        35.56
     128.191     0.975000         1654        40.00
     129.087     0.978125         1659        45.71
     130.495     0.981250         1665        53.33
     132.863     0.984375         1670        64.00
     134.527     0.985938         1673        71.11
     136.319     0.987500         1675        80.00
     140.287     0.989062         1678        91.43
     143.999     0.990625         1681       106.67
     146.815     0.992188         1683       128.00
     147.071     0.992969         1685       142.22
     147.967     0.993750         1686       160.00
     148.863     0.994531         1687       182.86
     150.399     0.995313         1689       213.33
     151.423     0.996094         1690       256.00
     152.191     0.996484         1691       284.44
     152.191     0.996875         1691       320.00
     153.343     0.997266         1692       365.71
     160.127     0.997656         1693       426.67
     160.127     0.998047         1693       512.00
     163.199     0.998242         1694       568.89
     163.199     0.998437         1694       640.00
     163.199     0.998633         1694       731.43
     165.119     0.998828         1695       853.33
     165.119     0.999023         1695      1024.00
     165.119     0.999121         1695      1137.78
     165.119     0.999219         1695      1280.00
     165.119     0.999316         1695      1462.86
     165.247     0.999414         1696      1706.67
     165.247     1.000000         1696          inf
#[Mean    =       62.185, StdDeviation   =       33.313]
#[Max     =      165.120, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.32MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 154.471ms, rate sampling interval: 557ms
  Thread calibration: mean lat.: 133.225ms, rate sampling interval: 433ms
  Thread calibration: mean lat.: 157.184ms, rate sampling interval: 501ms
  Thread calibration: mean lat.: 131.959ms, rate sampling interval: 466ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   104.90ms   51.88ms 329.73ms   69.29%
    Req/Sec     4.49      1.42     9.00     87.07%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   99.84ms
 75.000%  136.83ms
 90.000%  178.94ms
 99.000%  259.84ms
 99.900%  300.80ms
 99.990%  329.98ms
 99.999%  329.98ms
100.000%  329.98ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.623     0.000000            1         1.00
      40.351     0.100000          340         1.11
      59.455     0.200000          680         1.25
      74.239     0.300000         1020         1.43
      87.999     0.400000         1360         1.67
      99.839     0.500000         1702         2.00
     106.495     0.550000         1873         2.22
     111.807     0.600000         2041         2.50
     117.375     0.650000         2211         2.86
     126.335     0.700000         2382         3.33
     136.831     0.750000         2554         4.00
     140.159     0.775000         2635         4.44
     145.535     0.800000         2720         5.00
     151.551     0.825000         2807         5.71
     156.671     0.850000         2890         6.67
     166.527     0.875000         2976         8.00
     174.719     0.887500         3018         8.89
     178.943     0.900000         3060        10.00
     183.039     0.912500         3104        11.43
     187.519     0.925000         3146        13.33
     190.847     0.937500         3191        16.00
     192.255     0.943750         3212        17.78
     195.455     0.950000         3230        20.00
     202.751     0.956250         3253        22.86
     215.935     0.962500         3275        26.67
     218.239     0.968750         3294        32.00
     219.775     0.971875         3305        35.56
     223.487     0.975000         3315        40.00
     227.711     0.978125         3326        45.71
     230.655     0.981250         3337        53.33
     234.623     0.984375         3347        64.00
     236.287     0.985938         3353        71.11
     238.719     0.987500         3358        80.00
     257.919     0.989062         3363        91.43
     260.095     0.990625         3369       106.67
     261.119     0.992188         3374       128.00
     261.503     0.992969         3377       142.22
     262.015     0.993750         3379       160.00
     263.935     0.994531         3383       182.86
     264.447     0.995313         3385       213.33
     264.959     0.996094         3387       256.00
     265.471     0.996484         3390       284.44
     265.471     0.996875         3390       320.00
     266.239     0.997266         3391       365.71
     269.055     0.997656         3393       426.67
     277.247     0.998047         3395       512.00
     277.247     0.998242         3395       568.89
     277.247     0.998437         3395       640.00
     296.703     0.998633         3396       731.43
     300.799     0.998828         3397       853.33
     300.799     0.999023         3397      1024.00
     307.455     0.999121         3398      1137.78
     307.455     0.999219         3398      1280.00
     307.455     0.999316         3398      1462.86
     311.551     0.999414         3399      1706.67
     311.551     0.999512         3399      2048.00
     311.551     0.999561         3399      2275.56
     311.551     0.999609         3399      2560.00
     311.551     0.999658         3399      2925.71
     329.983     0.999707         3400      3413.33
     329.983     1.000000         3400          inf
#[Mean    =      104.904, StdDeviation   =       51.883]
#[Max     =      329.728, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3601 requests in 3.00m, 52.66MB read
Requests/sec:     20.00
Transfer/sec:    299.57KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 51)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 24)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-2'], 13)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 43)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 46)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 65)
filtered_path (['productpage-5', 'details-3'], 4)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 40)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 65)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 115)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 82)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 36)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 37)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 50)
filtered_path (['productpage-1', 'details-1'], 61)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 59)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 20)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 50)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 78)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 50)
filtered_path (['productpage-1', 'details-3'], 17)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 78)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 50)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 49)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 62)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-2'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 39)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 51)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 93)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 21)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 41)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 33)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 19)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 21)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 18)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 21)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 30)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 105)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 72)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 56)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 63)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'details-2'], 12)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 43)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 34)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 85)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 33)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 104)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 31)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 45)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 104)
filtered_path (['productpage-3', 'details-4'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 115)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 87)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 75)
original graph map
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 63.288ms, rate sampling interval: 246ms
  Thread calibration: mean lat.: 75.354ms, rate sampling interval: 276ms
  Thread calibration: mean lat.: 72.523ms, rate sampling interval: 280ms
  Thread calibration: mean lat.: 71.700ms, rate sampling interval: 257ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    60.15ms   32.87ms 225.28ms   63.12%
    Req/Sec     4.72      3.12     8.00     75.26%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   54.56ms
 75.000%   82.30ms
 90.000%  106.88ms
 99.000%  132.48ms
 99.900%  156.03ms
 99.990%  225.41ms
 99.999%  225.41ms
100.000%  225.41ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.359     0.000000            1         1.00
      22.623     0.100000          341         1.11
      30.639     0.200000          680         1.25
      36.831     0.300000         1021         1.43
      47.295     0.400000         1361         1.67
      54.559     0.500000         1702         2.00
      56.607     0.550000         1872         2.22
      62.079     0.600000         2040         2.50
      72.831     0.650000         2212         2.86
      77.887     0.700000         2381         3.33
      82.303     0.750000         2550         4.00
      84.671     0.775000         2636         4.44
      91.519     0.800000         2720         5.00
      97.407     0.825000         2808         5.71
     101.311     0.850000         2890         6.67
     103.423     0.875000         2978         8.00
     104.639     0.887500         3019         8.89
     106.879     0.900000         3061        10.00
     114.431     0.912500         3105        11.43
     115.967     0.925000         3146        13.33
     118.143     0.937500         3190        16.00
     119.039     0.943750         3210        17.78
     120.383     0.950000         3230        20.00
     121.535     0.956250         3252        22.86
     123.263     0.962500         3274        26.67
     124.351     0.968750         3294        32.00
     125.439     0.971875         3305        35.56
     125.887     0.975000         3315        40.00
     126.463     0.978125         3326        45.71
     128.063     0.981250         3337        53.33
     128.831     0.984375         3347        64.00
     130.175     0.985938         3353        71.11
     130.495     0.987500         3358        80.00
     131.839     0.989062         3363        91.43
     135.039     0.990625         3369       106.67
     142.463     0.992188         3374       128.00
     143.743     0.992969         3378       142.22
     144.127     0.993750         3379       160.00
     146.047     0.994531         3382       182.86
     146.943     0.995313         3385       213.33
     148.095     0.996094         3387       256.00
     149.503     0.996484         3389       284.44
     149.631     0.996875         3390       320.00
     149.759     0.997266         3391       365.71
     149.887     0.997656         3393       426.67
     150.143     0.998047         3394       512.00
     152.831     0.998242         3395       568.89
     152.831     0.998437         3395       640.00
     155.903     0.998633         3396       731.43
     156.031     0.998828         3397       853.33
     156.031     0.999023         3397      1024.00
     162.431     0.999121         3398      1137.78
     162.431     0.999219         3398      1280.00
     162.431     0.999316         3398      1462.86
     169.855     0.999414         3399      1706.67
     169.855     0.999512         3399      2048.00
     169.855     0.999561         3399      2275.56
     169.855     0.999609         3399      2560.00
     169.855     0.999658         3399      2925.71
     225.407     0.999707         3400      3413.33
     225.407     1.000000         3400          inf
#[Mean    =       60.154, StdDeviation   =       32.866]
#[Max     =      225.280, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.47KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 118.037ms, rate sampling interval: 386ms
  Thread calibration: mean lat.: 192.549ms, rate sampling interval: 770ms
  Thread calibration: mean lat.: 134.888ms, rate sampling interval: 512ms
  Thread calibration: mean lat.: 139.062ms, rate sampling interval: 482ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   112.03ms   54.94ms 322.30ms   65.03%
    Req/Sec     6.98      1.55    12.00     87.04%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  107.33ms
 75.000%  146.56ms
 90.000%  188.54ms
 99.000%  261.63ms
 99.900%  278.27ms
 99.990%  312.06ms
 99.999%  322.56ms
100.000%  322.56ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.591     0.000000            1         1.00
      44.127     0.100000          510         1.11
      62.367     0.200000         1020         1.25
      78.591     0.300000         1532         1.43
      94.271     0.400000         2041         1.67
     107.327     0.500000         2553         2.00
     112.895     0.550000         2806         2.22
     119.743     0.600000         3059         2.50
     128.703     0.650000         3315         2.86
     137.983     0.700000         3577         3.33
     146.559     0.750000         3825         4.00
     153.215     0.775000         3951         4.44
     158.975     0.800000         4084         5.00
     166.783     0.825000         4206         5.71
     176.255     0.850000         4335         6.67
     183.423     0.875000         4462         8.00
     186.239     0.887500         4526         8.89
     188.543     0.900000         4593        10.00
     190.463     0.912500         4653        11.43
     194.943     0.925000         4716        13.33
     199.807     0.937500         4781        16.00
     204.671     0.943750         4812        17.78
     215.039     0.950000         4845        20.00
     216.575     0.956250         4879        22.86
     218.623     0.962500         4909        26.67
     222.335     0.968750         4939        32.00
     224.767     0.971875         4955        35.56
     227.839     0.975000         4972        40.00
     230.911     0.978125         4988        45.71
     235.903     0.981250         5003        53.33
     239.615     0.984375         5019        64.00
     243.199     0.985938         5027        71.11
     257.023     0.987500         5035        80.00
     259.711     0.989062         5043        91.43
     261.887     0.990625         5051       106.67
     263.167     0.992188         5059       128.00
     264.191     0.992969         5063       142.22
     264.959     0.993750         5068       160.00
     265.471     0.994531         5072       182.86
     266.495     0.995313         5075       213.33
     266.751     0.996094         5079       256.00
     267.007     0.996484         5081       284.44
     267.263     0.996875         5083       320.00
     268.543     0.997266         5085       365.71
     268.799     0.997656         5087       426.67
     271.103     0.998047         5089       512.00
     271.359     0.998242         5090       568.89
     275.711     0.998437         5091       640.00
     276.479     0.998633         5092       731.43
     278.271     0.998828         5093       853.33
     301.055     0.999023         5094      1024.00
     301.055     0.999121         5094      1137.78
     306.431     0.999219         5095      1280.00
     306.431     0.999316         5095      1462.86
     310.783     0.999414         5096      1706.67
     310.783     0.999512         5096      2048.00
     310.783     0.999561         5096      2275.56
     312.063     0.999609         5097      2560.00
     312.063     0.999658         5097      2925.71
     312.063     0.999707         5097      3413.33
     312.063     0.999756         5097      4096.00
     312.063     0.999780         5097      4551.11
     322.559     0.999805         5098      5120.00
     322.559     1.000000         5098          inf
#[Mean    =      112.030, StdDeviation   =       54.935]
#[Max     =      322.304, Total count    =         5098]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.22KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'details-2'], 11)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 54)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 56)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 31)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 97)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 32)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 78)
filtered_path (['productpage-3', 'details-3'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 85)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 68)
filtered_path (['productpage-3', 'details-4'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 43)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 97)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 19)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 39)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 19)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 31)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 17)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 103)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 70)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 19)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 28)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 60)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 36)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 49)
filtered_path (['productpage-1', 'details-1'], 61)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 77)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 38)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 58)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 21)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 49)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 93)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 49)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 49)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 77)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 49)
filtered_path (['productpage-2', 'details-2'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 62)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 40)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 93)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 51)
filtered_path (['productpage-5', 'details-2'], 13)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 51)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 24)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 65)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 43)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 46)
filtered_path (['productpage-5', 'details-3'], 4)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 115)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 82)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 36)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 40)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 65)
original graph map
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 69.603ms, rate sampling interval: 220ms
  Thread calibration: mean lat.: 65.801ms, rate sampling interval: 233ms
  Thread calibration: mean lat.: 75.153ms, rate sampling interval: 252ms
  Thread calibration: mean lat.: 74.540ms, rate sampling interval: 239ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    61.66ms   34.37ms 185.60ms   62.32%
    Req/Sec     7.03      2.47    17.00     88.87%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   54.37ms
 75.000%   88.00ms
 90.000%  111.29ms
 99.000%  146.30ms
 99.900%  161.66ms
 99.990%  184.96ms
 99.999%  185.73ms
100.000%  185.73ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.759     0.000000            1         1.00
      22.191     0.100000          510         1.11
      29.039     0.200000         1020         1.25
      36.095     0.300000         1529         1.43
      48.959     0.400000         2040         1.67
      54.367     0.500000         2550         2.00
      63.103     0.550000         2803         2.22
      70.079     0.600000         3059         2.50
      74.367     0.650000         3313         2.86
      78.271     0.700000         3568         3.33
      87.999     0.750000         3823         4.00
      93.567     0.775000         3950         4.44
      95.807     0.800000         4077         5.00
      98.111     0.825000         4209         5.71
     100.159     0.850000         4333         6.67
     102.911     0.875000         4459         8.00
     107.263     0.887500         4523         8.89
     111.295     0.900000         4587        10.00
     113.407     0.912500         4651        11.43
     115.391     0.925000         4715        13.33
     117.695     0.937500         4779        16.00
     119.167     0.943750         4810        17.78
     120.895     0.950000         4842        20.00
     123.391     0.956250         4874        22.86
     125.439     0.962500         4906        26.67
     129.279     0.968750         4937        32.00
     131.071     0.971875         4953        35.56
     134.399     0.975000         4969        40.00
     137.599     0.978125         4985        45.71
     140.671     0.981250         5002        53.33
     142.975     0.984375         5017        64.00
     143.871     0.985938         5027        71.11
     144.639     0.987500         5033        80.00
     145.151     0.989062         5041        91.43
     146.815     0.990625         5049       106.67
     148.607     0.992188         5057       128.00
     149.375     0.992969         5061       142.22
     149.887     0.993750         5065       160.00
     150.527     0.994531         5072       182.86
     151.039     0.995313         5073       213.33
     153.599     0.996094         5077       256.00
     153.983     0.996484         5079       284.44
     154.111     0.996875         5081       320.00
     158.463     0.997266         5083       365.71
     158.719     0.997656         5086       426.67
     158.975     0.998047         5088       512.00
     158.975     0.998242         5088       568.89
     160.127     0.998437         5089       640.00
     160.255     0.998633         5090       731.43
     161.663     0.998828         5091       853.33
     162.431     0.999023         5092      1024.00
     162.431     0.999121         5092      1137.78
     164.607     0.999219         5093      1280.00
     164.607     0.999316         5093      1462.86
     169.343     0.999414         5094      1706.67
     169.343     0.999512         5094      2048.00
     169.343     0.999561         5094      2275.56
     184.959     0.999609         5095      2560.00
     184.959     0.999658         5095      2925.71
     184.959     0.999707         5095      3413.33
     184.959     0.999756         5095      4096.00
     184.959     0.999780         5095      4551.11
     185.727     0.999805         5096      5120.00
     185.727     1.000000         5096          inf
#[Mean    =       61.655, StdDeviation   =       34.373]
#[Max     =      185.600, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.97MB read
Requests/sec:     30.00
Transfer/sec:    449.21KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 140.572ms, rate sampling interval: 553ms
  Thread calibration: mean lat.: 132.658ms, rate sampling interval: 436ms
  Thread calibration: mean lat.: 140.586ms, rate sampling interval: 406ms
  Thread calibration: mean lat.: 237.891ms, rate sampling interval: 1165ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   121.85ms   50.75ms 313.60ms   67.49%
    Req/Sec     9.51      1.47    14.00     80.22%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  119.04ms
 75.000%  152.06ms
 90.000%  188.41ms
 99.000%  255.23ms
 99.900%  305.15ms
 99.990%  311.30ms
 99.999%  313.86ms
100.000%  313.86ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.759     0.000000            1         1.00
      56.767     0.100000          681         1.11
      77.503     0.200000         1362         1.25
      95.039     0.300000         2042         1.43
     110.207     0.400000         2721         1.67
     119.039     0.500000         3402         2.00
     123.711     0.550000         3741         2.22
     130.943     0.600000         4083         2.50
     137.727     0.650000         4422         2.86
     143.231     0.700000         4762         3.33
     152.063     0.750000         5104         4.00
     156.799     0.775000         5272         4.44
     162.687     0.800000         5445         5.00
     169.087     0.825000         5614         5.71
     174.847     0.850000         5781         6.67
     181.375     0.875000         5952         8.00
     184.703     0.887500         6036         8.89
     188.415     0.900000         6124        10.00
     190.975     0.912500         6206        11.43
     195.071     0.925000         6293        13.33
     203.391     0.937500         6376        16.00
     213.375     0.943750         6419        17.78
     218.367     0.950000         6463        20.00
     220.415     0.956250         6507        22.86
     222.591     0.962500         6546        26.67
     225.279     0.968750         6589        32.00
     226.687     0.971875         6610        35.56
     229.247     0.975000         6631        40.00
     231.295     0.978125         6653        45.71
     235.775     0.981250         6674        53.33
     241.663     0.984375         6695        64.00
     244.607     0.985938         6707        71.11
     247.423     0.987500         6716        80.00
     253.311     0.989062         6727        91.43
     257.663     0.990625         6738       106.67
     261.119     0.992188         6748       128.00
     262.399     0.992969         6754       142.22
     263.423     0.993750         6759       160.00
     264.703     0.994531         6764       182.86
     265.983     0.995313         6771       213.33
     272.383     0.996094         6775       256.00
     275.711     0.996484         6778       284.44
     278.783     0.996875         6780       320.00
     281.599     0.997266         6783       365.71
     285.183     0.997656         6786       426.67
     289.535     0.998047         6788       512.00
     300.543     0.998242         6792       568.89
     300.543     0.998437         6792       640.00
     300.543     0.998633         6792       731.43
     305.151     0.998828         6795       853.33
     305.151     0.999023         6795      1024.00
     305.663     0.999121         6797      1137.78
     305.663     0.999219         6797      1280.00
     305.663     0.999316         6797      1462.86
     307.455     0.999414         6798      1706.67
     307.455     0.999512         6798      2048.00
     309.759     0.999561         6799      2275.56
     309.759     0.999609         6799      2560.00
     309.759     0.999658         6799      2925.71
     311.295     0.999707         6800      3413.33
     311.295     0.999756         6800      4096.00
     311.295     0.999780         6800      4551.11
     311.295     0.999805         6800      5120.00
     311.295     0.999829         6800      5851.43
     313.855     0.999854         6801      6826.67
     313.855     1.000000         6801          inf
#[Mean    =      121.847, StdDeviation   =       50.746]
#[Max     =      313.600, Total count    =         6801]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.98KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 101)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 70)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'details-1'], 57)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 28)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-4', 'details-3'], 57)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 17)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 39)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 132)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 115)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 82)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 36)
filtered_path (['productpage-5', 'details-2'], 13)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 40)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 65)
filtered_path (['productpage-5', 'details-3'], 4)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 43)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 46)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 51)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 24)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 68)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 31)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 65)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 84)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 65)
filtered_path (['productpage-3', 'details-2'], 11)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-4'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 42)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 94)
filtered_path (['productpage-3', 'details-3'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 31)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 75)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 53)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 53)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 30)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 94)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 47)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 93)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 49)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 49)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 76)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 49)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 38)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 57)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 21)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 60)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 35)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 76)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 49)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 44)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 93)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'details-1'], 9)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 44)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 51)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 44)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 62)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 44)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 39)
original graph map
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 85.887ms, rate sampling interval: 254ms
  Thread calibration: mean lat.: 59.873ms, rate sampling interval: 214ms
  Thread calibration: mean lat.: 69.026ms, rate sampling interval: 246ms
  Thread calibration: mean lat.: 93.755ms, rate sampling interval: 284ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    70.67ms   34.07ms 168.70ms   65.81%
    Req/Sec     9.61      2.67    18.00     82.32%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   67.14ms
 75.000%   96.13ms
 90.000%  116.10ms
 99.000%  156.67ms
 99.900%  164.99ms
 99.990%  168.83ms
 99.999%  168.83ms
100.000%  168.83ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.127     0.000000            1         1.00
      24.527     0.100000          680         1.11
      42.399     0.200000         1361         1.25
      54.271     0.300000         2044         1.43
      58.815     0.400000         2720         1.67
      67.135     0.500000         3406         2.00
      71.743     0.550000         3740         2.22
      77.759     0.600000         4080         2.50
      82.559     0.650000         4423         2.86
      86.975     0.700000         4761         3.33
      96.127     0.750000         5101         4.00
      99.263     0.775000         5271         4.44
     101.311     0.800000         5442         5.00
     103.295     0.825000         5610         5.71
     106.623     0.850000         5780         6.67
     111.871     0.875000         5953         8.00
     113.855     0.887500         6039         8.89
     116.095     0.900000         6121        10.00
     118.399     0.912500         6209        11.43
     121.535     0.925000         6291        13.33
     125.119     0.937500         6375        16.00
     126.911     0.943750         6419        17.78
     129.599     0.950000         6461        20.00
     132.479     0.956250         6505        22.86
     135.807     0.962500         6546        26.67
     139.647     0.968750         6589        32.00
     141.311     0.971875         6612        35.56
     143.231     0.975000         6630        40.00
     144.767     0.978125         6652        45.71
     146.559     0.981250         6674        53.33
     149.503     0.984375         6695        64.00
     151.039     0.985938         6705        71.11
     153.215     0.987500         6715        80.00
     155.647     0.989062         6727        91.43
     156.927     0.990625         6737       106.67
     158.975     0.992188         6748       128.00
     159.359     0.992969         6753       142.22
     159.871     0.993750         6758       160.00
     160.511     0.994531         6764       182.86
     161.407     0.995313         6770       213.33
     161.919     0.996094         6774       256.00
     162.559     0.996484         6777       284.44
     162.943     0.996875         6779       320.00
     163.455     0.997266         6784       365.71
     163.967     0.997656         6785       426.67
     164.095     0.998047         6787       512.00
     164.607     0.998242         6789       568.89
     164.863     0.998437         6792       640.00
     164.863     0.998633         6792       731.43
     164.991     0.998828         6793       853.33
     165.247     0.999023         6795      1024.00
     165.247     0.999121         6795      1137.78
     165.247     0.999219         6795      1280.00
     165.375     0.999316         6796      1462.86
     166.143     0.999414         6797      1706.67
     166.143     0.999512         6797      2048.00
     168.063     0.999561         6798      2275.56
     168.063     0.999609         6798      2560.00
     168.063     0.999658         6798      2925.71
     168.831     0.999707         6800      3413.33
     168.831     1.000000         6800          inf
#[Mean    =       70.671, StdDeviation   =       34.073]
#[Max     =      168.704, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7201 requests in 3.00m, 105.31MB read
Requests/sec:     40.00
Transfer/sec:    599.04KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 106.679ms, rate sampling interval: 330ms
  Thread calibration: mean lat.: 264.393ms, rate sampling interval: 1468ms
  Thread calibration: mean lat.: 257.796ms, rate sampling interval: 1133ms
  Thread calibration: mean lat.: 167.773ms, rate sampling interval: 647ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   119.57ms   58.27ms 534.53ms   68.94%
    Req/Sec    12.18      1.84    18.00     88.77%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  111.74ms
 75.000%  154.11ms
 90.000%  194.94ms
 99.000%  275.97ms
 99.900%  450.56ms
 99.990%  517.12ms
 99.999%  535.04ms
100.000%  535.04ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.543     0.000000            1         1.00
      52.831     0.100000          851         1.11
      69.759     0.200000         1703         1.25
      83.839     0.300000         2554         1.43
      98.303     0.400000         3404         1.67
     111.743     0.500000         4256         2.00
     118.783     0.550000         4676         2.22
     126.143     0.600000         5102         2.50
     135.679     0.650000         5530         2.86
     144.511     0.700000         5952         3.33
     154.111     0.750000         6382         4.00
     158.847     0.775000         6591         4.44
     165.503     0.800000         6801         5.00
     173.567     0.825000         7017         5.71
     180.479     0.850000         7227         6.67
     188.543     0.875000         7443         8.00
     191.231     0.887500         7545         8.89
     194.943     0.900000         7652        10.00
     200.575     0.912500         7758        11.43
     208.383     0.925000         7866        13.33
     216.703     0.937500         7970        16.00
     219.007     0.943750         8023        17.78
     222.719     0.950000         8078        20.00
     229.247     0.956250         8130        22.86
     234.495     0.962500         8183        26.67
     241.919     0.968750         8236        32.00
     244.863     0.971875         8262        35.56
     249.983     0.975000         8289        40.00
     255.359     0.978125         8316        45.71
     260.095     0.981250         8343        53.33
     262.911     0.984375         8369        64.00
     266.751     0.985938         8382        71.11
     270.079     0.987500         8395        80.00
     274.175     0.989062         8409        91.43
     279.039     0.990625         8422       106.67
     284.159     0.992188         8436       128.00
     287.999     0.992969         8442       142.22
     293.887     0.993750         8448       160.00
     299.519     0.994531         8455       182.86
     309.503     0.995313         8462       213.33
     317.439     0.996094         8468       256.00
     323.583     0.996484         8472       284.44
     328.959     0.996875         8475       320.00
     338.687     0.997266         8478       365.71
     352.767     0.997656         8482       426.67
     356.095     0.998047         8485       512.00
     361.215     0.998242         8487       568.89
     366.591     0.998437         8488       640.00
     400.383     0.998633         8490       731.43
     450.559     0.998828         8492       853.33
     457.215     0.999023         8493      1024.00
     468.223     0.999121         8494      1137.78
     486.143     0.999219         8495      1280.00
     488.447     0.999316         8496      1462.86
     493.823     0.999414         8497      1706.67
     493.823     0.999512         8497      2048.00
     496.383     0.999561         8498      2275.56
     496.383     0.999609         8498      2560.00
     500.223     0.999658         8499      2925.71
     500.223     0.999707         8499      3413.33
     500.223     0.999756         8499      4096.00
     517.119     0.999780         8500      4551.11
     517.119     0.999805         8500      5120.00
     517.119     0.999829         8500      5851.43
     517.119     0.999854         8500      6826.67
     517.119     0.999878         8500      8192.00
     535.039     0.999890         8501      9102.22
     535.039     1.000000         8501          inf
#[Mean    =      119.574, StdDeviation   =       58.266]
#[Max     =      534.528, Total count    =         8501]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.63MB read
Requests/sec:     49.99
Transfer/sec:    748.72KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 101)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 70)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 18)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 28)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 18)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 39)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 30)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 17)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-1'], 57)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 18)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 83)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 59)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 41)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 88)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 52)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 30)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 69)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-3'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 29)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 88)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 46)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 75)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 34)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 56)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 21)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 49)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 75)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 9)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 49)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-1'], 9)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 42)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 81)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 39)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 50)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 28)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 64)
original graph map
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 68.834ms, rate sampling interval: 250ms
  Thread calibration: mean lat.: 55.927ms, rate sampling interval: 198ms
  Thread calibration: mean lat.: 77.591ms, rate sampling interval: 252ms
  Thread calibration: mean lat.: 64.688ms, rate sampling interval: 218ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.62ms   33.85ms 158.46ms   63.25%
    Req/Sec    12.15      3.27    20.00     86.12%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   55.29ms
 75.000%   85.57ms
 90.000%  115.07ms
 99.000%  143.23ms
 99.900%  155.39ms
 99.990%  157.57ms
 99.999%  158.59ms
100.000%  158.59ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.311     0.000000            1         1.00
      22.191     0.100000          853         1.11
      34.623     0.200000         1700         1.25
      40.095     0.300000         2550         1.43
      51.615     0.400000         3399         1.67
      55.295     0.500000         4251         2.00
      57.727     0.550000         4674         2.22
      65.407     0.600000         5102         2.50
      71.231     0.650000         5523         2.86
      78.399     0.700000         5948         3.33
      85.567     0.750000         6375         4.00
      93.375     0.775000         6585         4.44
      95.551     0.800000         6806         5.00
      97.727     0.825000         7010         5.71
     100.735     0.850000         7224         6.67
     109.439     0.875000         7435         8.00
     112.575     0.887500         7541         8.89
     115.071     0.900000         7649        10.00
     117.631     0.912500         7754        11.43
     120.063     0.925000         7859        13.33
     122.495     0.937500         7966        16.00
     123.775     0.943750         8019        17.78
     125.183     0.950000         8072        20.00
     126.271     0.956250         8125        22.86
     128.191     0.962500         8179        26.67
     130.239     0.968750         8235        32.00
     131.327     0.971875         8260        35.56
     133.375     0.975000         8285        40.00
     135.295     0.978125         8311        45.71
     137.471     0.981250         8337        53.33
     139.903     0.984375         8364        64.00
     140.671     0.985938         8377        71.11
     141.695     0.987500         8390        80.00
     142.591     0.989062         8405        91.43
     143.999     0.990625         8417       106.67
     145.151     0.992188         8430       128.00
     146.047     0.992969         8437       142.22
     146.687     0.993750         8444       160.00
     147.199     0.994531         8450       182.86
     148.735     0.995313         8458       213.33
     149.631     0.996094         8464       256.00
     150.655     0.996484         8467       284.44
     151.423     0.996875         8470       320.00
     152.063     0.997266         8473       365.71
     152.703     0.997656         8477       426.67
     153.343     0.998047         8480       512.00
     153.471     0.998242         8482       568.89
     153.983     0.998437         8483       640.00
     154.495     0.998633         8486       731.43
     154.879     0.998828         8487       853.33
     155.391     0.999023         8488      1024.00
     156.159     0.999121         8489      1137.78
     156.415     0.999219         8490      1280.00
     156.927     0.999316         8491      1462.86
     157.055     0.999414         8493      1706.67
     157.055     0.999512         8493      2048.00
     157.055     0.999561         8493      2275.56
     157.055     0.999609         8493      2560.00
     157.567     0.999658         8495      2925.71
     157.567     0.999707         8495      3413.33
     157.567     0.999756         8495      4096.00
     157.567     0.999780         8495      4551.11
     157.567     0.999805         8495      5120.00
     157.567     0.999829         8495      5851.43
     157.567     0.999854         8495      6826.67
     157.567     0.999878         8495      8192.00
     158.591     0.999890         8496      9102.22
     158.591     1.000000         8496          inf
#[Mean    =       62.620, StdDeviation   =       33.849]
#[Max     =      158.464, Total count    =         8496]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.62MB read
Requests/sec:     49.99
Transfer/sec:    748.67KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 156.503ms, rate sampling interval: 545ms
  Thread calibration: mean lat.: 143.585ms, rate sampling interval: 522ms
  Thread calibration: mean lat.: 149.614ms, rate sampling interval: 409ms
  Thread calibration: mean lat.: 202.951ms, rate sampling interval: 623ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   118.45ms   55.78ms 481.28ms   68.40%
    Req/Sec     2.02      1.46     4.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  111.36ms
 75.000%  154.37ms
 90.000%  191.10ms
 99.000%  268.03ms
 99.900%  321.54ms
 99.990%  481.54ms
 99.999%  481.54ms
100.000%  481.54ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.471     0.000000            1         1.00
      51.839     0.100000          170         1.11
      71.615     0.200000          341         1.25
      85.759     0.300000          510         1.43
      97.471     0.400000          679         1.67
     111.359     0.500000          848         2.00
     116.799     0.550000          933         2.22
     124.287     0.600000         1020         2.50
     134.399     0.650000         1103         2.86
     142.719     0.700000         1188         3.33
     154.367     0.750000         1272         4.00
     158.847     0.775000         1316         4.44
     164.351     0.800000         1357         5.00
     170.751     0.825000         1400         5.71
     178.815     0.850000         1443         6.67
     183.679     0.875000         1484         8.00
     186.879     0.887500         1506         8.89
     191.359     0.900000         1527        10.00
     194.815     0.912500         1548        11.43
     198.783     0.925000         1569        13.33
     209.919     0.937500         1590        16.00
     216.447     0.943750         1601        17.78
     219.263     0.950000         1612        20.00
     222.847     0.956250         1622        22.86
     226.943     0.962500         1633        26.67
     233.599     0.968750         1643        32.00
     237.311     0.971875         1649        35.56
     245.759     0.975000         1654        40.00
     255.487     0.978125         1659        45.71
     261.887     0.981250         1666        53.33
     263.935     0.984375         1670        64.00
     264.447     0.985938         1673        71.11
     264.959     0.987500         1675        80.00
     267.007     0.989062         1678        91.43
     273.919     0.990625         1681       106.67
     279.295     0.992188         1683       128.00
     280.063     0.992969         1685       142.22
     280.831     0.993750         1686       160.00
     282.111     0.994531         1687       182.86
     286.463     0.995313         1689       213.33
     292.351     0.996094         1690       256.00
     303.871     0.996484         1691       284.44
     303.871     0.996875         1691       320.00
     307.455     0.997266         1692       365.71
     309.247     0.997656         1693       426.67
     309.247     0.998047         1693       512.00
     321.535     0.998242         1694       568.89
     321.535     0.998437         1694       640.00
     321.535     0.998633         1694       731.43
     331.263     0.998828         1695       853.33
     331.263     0.999023         1695      1024.00
     331.263     0.999121         1695      1137.78
     331.263     0.999219         1695      1280.00
     331.263     0.999316         1695      1462.86
     481.535     0.999414         1696      1706.67
     481.535     1.000000         1696          inf
#[Mean    =      118.448, StdDeviation   =       55.776]
#[Max     =      481.280, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.74KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 81)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 50)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 39)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-5', 'details-2'], 13)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 28)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-4', 'details-4'], 4)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 46)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 34)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 49)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 75)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 49)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 56)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 20)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 49)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 75)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 49)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 83)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 58)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 52)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 46)
filtered_path (['productpage-3', 'details-3'], 7)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 41)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 87)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 30)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 68)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 29)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 87)
filtered_path (['productpage-3', 'details-1'], 8)
original graph map
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 69.825ms, rate sampling interval: 231ms
  Thread calibration: mean lat.: 79.271ms, rate sampling interval: 253ms
  Thread calibration: mean lat.: 71.908ms, rate sampling interval: 291ms
  Thread calibration: mean lat.: 92.618ms, rate sampling interval: 290ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    59.09ms   33.21ms 186.11ms   60.50%
    Req/Sec     2.21      3.02     8.00     86.09%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   55.36ms
 75.000%   81.09ms
 90.000%  104.32ms
 99.000%  143.36ms
 99.900%  167.17ms
 99.990%  186.24ms
 99.999%  186.24ms
100.000%  186.24ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.927     0.000000            1         1.00
      17.663     0.100000          170         1.11
      27.167     0.200000          342         1.25
      34.367     0.300000          509         1.43
      46.335     0.400000          679         1.67
      55.359     0.500000          849         2.00
      57.535     0.550000          934         2.22
      60.831     0.600000         1018         2.50
      68.543     0.650000         1103         2.86
      74.303     0.700000         1188         3.33
      81.087     0.750000         1272         4.00
      92.607     0.775000         1315         4.44
      95.487     0.800000         1357         5.00
      97.599     0.825000         1400         5.71
      99.327     0.850000         1442         6.67
     100.991     0.875000         1484         8.00
     102.591     0.887500         1507         8.89
     104.383     0.900000         1527        10.00
     111.295     0.912500         1548        11.43
     112.831     0.925000         1569        13.33
     114.879     0.937500         1591        16.00
     116.159     0.943750         1603        17.78
     117.439     0.950000         1612        20.00
     118.783     0.956250         1622        22.86
     120.063     0.962500         1633        26.67
     122.047     0.968750         1643        32.00
     124.543     0.971875         1649        35.56
     125.887     0.975000         1654        40.00
     126.719     0.978125         1659        45.71
     129.471     0.981250         1665        53.33
     139.135     0.984375         1670        64.00
     139.775     0.985938         1673        71.11
     140.415     0.987500         1675        80.00
     142.463     0.989062         1678        91.43
     144.255     0.990625         1681       106.67
     145.279     0.992188         1683       128.00
     146.175     0.992969         1685       142.22
     146.815     0.993750         1686       160.00
     146.943     0.994531         1687       182.86
     147.711     0.995313         1689       213.33
     148.863     0.996094         1690       256.00
     149.247     0.996484         1691       284.44
     149.247     0.996875         1691       320.00
     150.143     0.997266         1692       365.71
     154.751     0.997656         1693       426.67
     154.751     0.998047         1693       512.00
     167.167     0.998242         1694       568.89
     167.167     0.998437         1694       640.00
     167.167     0.998633         1694       731.43
     185.599     0.998828         1695       853.33
     185.599     0.999023         1695      1024.00
     185.599     0.999121         1695      1137.78
     185.599     0.999219         1695      1280.00
     185.599     0.999316         1695      1462.86
     186.239     0.999414         1696      1706.67
     186.239     1.000000         1696          inf
#[Mean    =       59.088, StdDeviation   =       33.209]
#[Max     =      186.112, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1801 requests in 3.00m, 26.34MB read
Requests/sec:     10.00
Transfer/sec:    149.81KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 146.930ms, rate sampling interval: 532ms
  Thread calibration: mean lat.: 142.915ms, rate sampling interval: 541ms
  Thread calibration: mean lat.: 139.353ms, rate sampling interval: 514ms
  Thread calibration: mean lat.: 129.471ms, rate sampling interval: 407ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   110.41ms   54.71ms 352.51ms   65.97%
    Req/Sec     4.26      1.41     9.00     85.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  103.49ms
 75.000%  144.64ms
 90.000%  186.75ms
 99.000%  261.63ms
 99.900%  308.48ms
 99.990%  352.77ms
 99.999%  352.77ms
100.000%  352.77ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.015     0.000000            1         1.00
      43.743     0.100000          340         1.11
      59.775     0.200000          680         1.25
      76.799     0.300000         1020         1.43
      92.671     0.400000         1360         1.67
     103.487     0.500000         1704         2.00
     110.079     0.550000         1871         2.22
     115.839     0.600000         2041         2.50
     123.967     0.650000         2210         2.86
     136.831     0.700000         2380         3.33
     144.639     0.750000         2551         4.00
     152.191     0.775000         2637         4.44
     157.183     0.800000         2720         5.00
     164.223     0.825000         2807         5.71
     174.463     0.850000         2890         6.67
     181.247     0.875000         2977         8.00
     184.319     0.887500         3018         8.89
     186.751     0.900000         3060        10.00
     190.975     0.912500         3105        11.43
     193.919     0.925000         3148        13.33
     198.399     0.937500         3188        16.00
     201.599     0.943750         3209        17.78
     208.767     0.950000         3230        20.00
     216.319     0.956250         3252        22.86
     218.879     0.962500         3273        26.67
     222.847     0.968750         3294        32.00
     225.407     0.971875         3305        35.56
     226.687     0.975000         3315        40.00
     231.935     0.978125         3326        45.71
     235.903     0.981250         3337        53.33
     239.615     0.984375         3347        64.00
     241.407     0.985938         3353        71.11
     244.991     0.987500         3358        80.00
     260.095     0.989062         3363        91.43
     262.911     0.990625         3369       106.67
     264.447     0.992188         3374       128.00
     266.239     0.992969         3378       142.22
     266.495     0.993750         3380       160.00
     267.007     0.994531         3382       182.86
     268.287     0.995313         3385       213.33
     271.615     0.996094         3387       256.00
     277.503     0.996484         3389       284.44
     278.015     0.996875         3390       320.00
     278.527     0.997266         3391       365.71
     279.807     0.997656         3393       426.67
     280.319     0.998047         3395       512.00
     280.319     0.998242         3395       568.89
     280.319     0.998437         3395       640.00
     304.127     0.998633         3396       731.43
     308.479     0.998828         3397       853.33
     308.479     0.999023         3397      1024.00
     310.527     0.999121         3398      1137.78
     310.527     0.999219         3398      1280.00
     310.527     0.999316         3398      1462.86
     327.423     0.999414         3399      1706.67
     327.423     0.999512         3399      2048.00
     327.423     0.999561         3399      2275.56
     327.423     0.999609         3399      2560.00
     327.423     0.999658         3399      2925.71
     352.767     0.999707         3400      3413.33
     352.767     1.000000         3400          inf
#[Mean    =      110.408, StdDeviation   =       54.711]
#[Max     =      352.512, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.47KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 4)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-2'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 154)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 28)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 50)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-5', 'details-2'], 13)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 39)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-5', 'details-1'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 81)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 20)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 49)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 49)
filtered_path (['productpage-1', 'details-2'], 8)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 49)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 49)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 49)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 67)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 51)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 45)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 40)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 86)
filtered_path (['productpage-3', 'details-3'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 86)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 82)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 57)
original graph map
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 72.492ms, rate sampling interval: 281ms
  Thread calibration: mean lat.: 83.244ms, rate sampling interval: 304ms
  Thread calibration: mean lat.: 58.444ms, rate sampling interval: 250ms
  Thread calibration: mean lat.: 71.021ms, rate sampling interval: 251ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    58.84ms   35.07ms 176.77ms   61.53%
    Req/Sec     4.74      2.98     8.00     77.59%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   52.45ms
 75.000%   85.76ms
 90.000%  112.19ms
 99.000%  142.85ms
 99.900%  159.87ms
 99.990%  176.90ms
 99.999%  176.90ms
100.000%  176.90ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.367     0.000000            1         1.00
      15.503     0.100000          341         1.11
      24.911     0.200000          680         1.25
      34.367     0.300000         1021         1.43
      44.639     0.400000         1360         1.67
      52.447     0.500000         1703         2.00
      54.911     0.550000         1870         2.22
      62.687     0.600000         2041         2.50
      71.871     0.650000         2212         2.86
      75.967     0.700000         2381         3.33
      85.759     0.750000         2550         4.00
      92.415     0.775000         2636         4.44
      94.783     0.800000         2721         5.00
      97.087     0.825000         2806         5.71
     100.543     0.850000         2890         6.67
     102.719     0.875000         2975         8.00
     106.687     0.887500         3018         8.89
     112.191     0.900000         3061        10.00
     114.495     0.912500         3103        11.43
     116.223     0.925000         3146        13.33
     117.951     0.937500         3188        16.00
     119.807     0.943750         3210        17.78
     121.343     0.950000         3230        20.00
     123.711     0.956250         3252        22.86
     125.759     0.962500         3273        26.67
     128.063     0.968750         3294        32.00
     129.727     0.971875         3305        35.56
     132.735     0.975000         3315        40.00
     135.423     0.978125         3327        45.71
     137.087     0.981250         3337        53.33
     138.879     0.984375         3348        64.00
     140.031     0.985938         3353        71.11
     140.671     0.987500         3358        80.00
     141.695     0.989062         3363        91.43
     144.127     0.990625         3369       106.67
     145.151     0.992188         3374       128.00
     145.663     0.992969         3378       142.22
     145.791     0.993750         3379       160.00
     146.303     0.994531         3382       182.86
     147.199     0.995313         3385       213.33
     148.223     0.996094         3388       256.00
     148.991     0.996484         3389       284.44
     149.119     0.996875         3390       320.00
     149.887     0.997266         3391       365.71
     150.527     0.997656         3393       426.67
     152.319     0.998047         3394       512.00
     155.903     0.998242         3395       568.89
     155.903     0.998437         3395       640.00
     156.927     0.998633         3396       731.43
     159.871     0.998828         3397       853.33
     159.871     0.999023         3397      1024.00
     159.999     0.999121         3398      1137.78
     159.999     0.999219         3398      1280.00
     159.999     0.999316         3398      1462.86
     162.431     0.999414         3399      1706.67
     162.431     0.999512         3399      2048.00
     162.431     0.999561         3399      2275.56
     162.431     0.999609         3399      2560.00
     162.431     0.999658         3399      2925.71
     176.895     0.999707         3400      3413.33
     176.895     1.000000         3400          inf
#[Mean    =       58.835, StdDeviation   =       35.073]
#[Max     =      176.768, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3602 requests in 3.00m, 52.68MB read
Requests/sec:     20.01
Transfer/sec:    299.64KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 167.128ms, rate sampling interval: 601ms
  Thread calibration: mean lat.: 161.293ms, rate sampling interval: 631ms
  Thread calibration: mean lat.: 134.911ms, rate sampling interval: 408ms
  Thread calibration: mean lat.: 161.904ms, rate sampling interval: 551ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   123.14ms   52.65ms 343.81ms   65.71%
    Req/Sec     6.99      1.48    12.00     89.10%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  118.78ms
 75.000%  160.26ms
 90.000%  193.02ms
 99.000%  260.48ms
 99.900%  285.18ms
 99.990%  318.98ms
 99.999%  344.06ms
100.000%  344.06ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.895     0.000000            1         1.00
      54.367     0.100000          510         1.11
      77.247     0.200000         1020         1.25
      94.335     0.300000         1532         1.43
     105.983     0.400000         2040         1.67
     118.783     0.500000         2550         2.00
     123.391     0.550000         2807         2.22
     132.095     0.600000         3060         2.50
     139.903     0.650000         3315         2.86
     148.479     0.700000         3571         3.33
     160.255     0.750000         3828         4.00
     164.095     0.775000         3953         4.44
     169.599     0.800000         4082         5.00
     174.975     0.825000         4208         5.71
     182.399     0.850000         4335         6.67
     187.263     0.875000         4468         8.00
     189.439     0.887500         4527         8.89
     193.023     0.900000         4592        10.00
     197.631     0.912500         4654        11.43
     201.087     0.925000         4721        13.33
     204.543     0.937500         4783        16.00
     207.487     0.943750         4814        17.78
     214.015     0.950000         4845        20.00
     217.599     0.956250         4877        22.86
     220.543     0.962500         4909        26.67
     228.351     0.968750         4941        32.00
     230.399     0.971875         4961        35.56
     231.679     0.975000         4973        40.00
     234.239     0.978125         4989        45.71
     238.975     0.981250         5005        53.33
     243.199     0.984375         5021        64.00
     246.527     0.985938         5029        71.11
     255.999     0.987500         5037        80.00
     259.583     0.989062         5045        91.43
     261.119     0.990625         5053       106.67
     266.495     0.992188         5062       128.00
     269.567     0.992969         5065       142.22
     272.127     0.993750         5070       160.00
     273.407     0.994531         5073       182.86
     275.455     0.995313         5077       213.33
     279.295     0.996094         5081       256.00
     280.319     0.996484         5084       284.44
     280.831     0.996875         5085       320.00
     281.599     0.997266         5087       365.71
     281.855     0.997656         5089       426.67
     282.623     0.998047         5091       512.00
     283.391     0.998242         5092       568.89
     283.647     0.998437         5093       640.00
     284.159     0.998633         5094       731.43
     285.183     0.998828         5095       853.33
     285.695     0.999023         5096      1024.00
     285.695     0.999121         5096      1137.78
     308.479     0.999219         5097      1280.00
     308.479     0.999316         5097      1462.86
     315.903     0.999414         5098      1706.67
     315.903     0.999512         5098      2048.00
     315.903     0.999561         5098      2275.56
     318.975     0.999609         5099      2560.00
     318.975     0.999658         5099      2925.71
     318.975     0.999707         5099      3413.33
     318.975     0.999756         5099      4096.00
     318.975     0.999780         5099      4551.11
     344.063     0.999805         5100      5120.00
     344.063     1.000000         5100          inf
#[Mean    =      123.141, StdDeviation   =       52.645]
#[Max     =      343.808, Total count    =         5100]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.22KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 39)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 82)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 82)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 50)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 41)
filtered_path (['productpage-3', 'details-3'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 53)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 28)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 63)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 20)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-4'], 4)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 39)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 62)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'details-1'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 30)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 50)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 21)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 114)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-5', 'details-2'], 13)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 66)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 42)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 28)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 43)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-4'], 16)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 154)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-2'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
original graph map
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 73.863ms, rate sampling interval: 238ms
  Thread calibration: mean lat.: 72.043ms, rate sampling interval: 225ms
  Thread calibration: mean lat.: 92.405ms, rate sampling interval: 281ms
  Thread calibration: mean lat.: 71.248ms, rate sampling interval: 240ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    71.85ms   38.34ms 476.67ms   64.27%
    Req/Sec     7.09      2.20    17.00     93.23%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   69.82ms
 75.000%   99.26ms
 90.000%  121.73ms
 99.000%  160.77ms
 99.900%  212.35ms
 99.990%  244.61ms
 99.999%  476.93ms
100.000%  476.93ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.967     0.000000            1         1.00
      22.943     0.100000          510         1.11
      35.519     0.200000         1020         1.25
      45.279     0.300000         1532         1.43
      57.247     0.400000         2039         1.67
      69.823     0.500000         2548         2.00
      75.839     0.550000         2803         2.22
      81.599     0.600000         3058         2.50
      87.743     0.650000         3313         2.86
      94.591     0.700000         3570         3.33
      99.263     0.750000         3825         4.00
     101.375     0.775000         3951         4.44
     104.383     0.800000         4078         5.00
     109.311     0.825000         4206         5.71
     113.215     0.850000         4332         6.67
     116.863     0.875000         4460         8.00
     119.039     0.887500         4524         8.89
     121.791     0.900000         4589        10.00
     125.375     0.912500         4651        11.43
     129.151     0.925000         4714        13.33
     134.015     0.937500         4782        16.00
     136.959     0.943750         4811        17.78
     139.519     0.950000         4843        20.00
     142.463     0.956250         4874        22.86
     144.511     0.962500         4906        26.67
     146.431     0.968750         4938        32.00
     147.839     0.971875         4954        35.56
     148.735     0.975000         4969        40.00
     150.527     0.978125         4985        45.71
     153.215     0.981250         5001        53.33
     155.647     0.984375         5018        64.00
     156.415     0.985938         5025        71.11
     158.207     0.987500         5033        80.00
     159.359     0.989062         5042        91.43
     162.431     0.990625         5049       106.67
     164.991     0.992188         5057       128.00
     165.759     0.992969         5062       142.22
     166.911     0.993750         5065       160.00
     167.807     0.994531         5070       182.86
     168.319     0.995313         5073       213.33
     169.343     0.996094         5077       256.00
     169.855     0.996484         5079       284.44
     170.239     0.996875         5081       320.00
     171.647     0.997266         5084       365.71
     172.671     0.997656         5085       426.67
     176.895     0.998047         5087       512.00
     177.663     0.998242         5088       568.89
     178.943     0.998437         5089       640.00
     199.423     0.998633         5090       731.43
     212.351     0.998828         5091       853.33
     212.479     0.999023         5092      1024.00
     212.479     0.999121         5092      1137.78
     214.143     0.999219         5093      1280.00
     214.143     0.999316         5093      1462.86
     218.111     0.999414         5094      1706.67
     218.111     0.999512         5094      2048.00
     218.111     0.999561         5094      2275.56
     244.607     0.999609         5095      2560.00
     244.607     0.999658         5095      2925.71
     244.607     0.999707         5095      3413.33
     244.607     0.999756         5095      4096.00
     244.607     0.999780         5095      4551.11
     476.927     0.999805         5096      5120.00
     476.927     1.000000         5096          inf
#[Mean    =       71.850, StdDeviation   =       38.336]
#[Max     =      476.672, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5401 requests in 3.00m, 78.99MB read
Requests/sec:     30.00
Transfer/sec:    449.30KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 135.086ms, rate sampling interval: 443ms
  Thread calibration: mean lat.: 123.307ms, rate sampling interval: 366ms
  Thread calibration: mean lat.: 160.920ms, rate sampling interval: 567ms
  Thread calibration: mean lat.: 139.612ms, rate sampling interval: 501ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   115.17ms   44.35ms 353.79ms   70.40%
    Req/Sec     9.47      1.65    16.00     91.38%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  109.50ms
 75.000%  140.29ms
 90.000%  176.51ms
 99.000%  235.65ms
 99.900%  305.66ms
 99.990%  341.25ms
 99.999%  354.05ms
100.000%  354.05ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.023     0.000000            1         1.00
      64.863     0.100000          683         1.11
      78.911     0.200000         1366         1.25
      88.639     0.300000         2045         1.43
      97.663     0.400000         2721         1.67
     109.503     0.500000         3401         2.00
     114.623     0.550000         3743         2.22
     120.703     0.600000         4081         2.50
     126.527     0.650000         4421         2.86
     133.631     0.700000         4764         3.33
     140.287     0.750000         5103         4.00
     144.767     0.775000         5275         4.44
     150.271     0.800000         5443         5.00
     155.775     0.825000         5611         5.71
     161.023     0.850000         5781         6.67
     167.935     0.875000         5951         8.00
     172.543     0.887500         6038         8.89
     176.511     0.900000         6123        10.00
     179.967     0.912500         6206        11.43
     183.423     0.925000         6294        13.33
     188.927     0.937500         6377        16.00
     192.255     0.943750         6420        17.78
     194.943     0.950000         6465        20.00
     198.911     0.956250         6504        22.86
     205.695     0.962500         6546        26.67
     214.143     0.968750         6589        32.00
     216.959     0.971875         6610        35.56
     218.367     0.975000         6631        40.00
     220.927     0.978125         6653        45.71
     222.719     0.981250         6674        53.33
     226.559     0.984375         6696        64.00
     229.119     0.985938         6706        71.11
     231.295     0.987500         6716        80.00
     233.215     0.989062         6727        91.43
     237.439     0.990625         6738       106.67
     245.247     0.992188         6748       128.00
     248.447     0.992969         6754       142.22
     257.663     0.993750         6759       160.00
     259.071     0.994531         6764       182.86
     261.503     0.995313         6770       213.33
     263.679     0.996094         6775       256.00
     265.983     0.996484         6778       284.44
     267.007     0.996875         6780       320.00
     270.079     0.997266         6783       365.71
     278.271     0.997656         6786       426.67
     281.343     0.998047         6788       512.00
     282.623     0.998242         6790       568.89
     289.535     0.998437         6791       640.00
     293.631     0.998633         6792       731.43
     305.663     0.998828         6794       853.33
     310.015     0.999023         6795      1024.00
     310.527     0.999121         6796      1137.78
     310.527     0.999219         6796      1280.00
     312.319     0.999316         6797      1462.86
     332.287     0.999414         6798      1706.67
     332.287     0.999512         6798      2048.00
     338.943     0.999561         6799      2275.56
     338.943     0.999609         6799      2560.00
     338.943     0.999658         6799      2925.71
     341.247     0.999707         6800      3413.33
     341.247     0.999756         6800      4096.00
     341.247     0.999780         6800      4551.11
     341.247     0.999805         6800      5120.00
     341.247     0.999829         6800      5851.43
     354.047     0.999854         6801      6826.67
     354.047     1.000000         6801          inf
#[Mean    =      115.172, StdDeviation   =       44.347]
#[Max     =      353.792, Total count    =         6801]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.97KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-1'], 9)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 21)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 43)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 62)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 39)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 81)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 50)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 40)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 28)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 62)
filtered_path (['productpage-3', 'details-3'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 81)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 52)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 18)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 81)
filtered_path (['productpage-3', 'details-4'], 72)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-2'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-4'], 4)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 20)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 92)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-1'], 59)
original graph map
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 56.467ms, rate sampling interval: 208ms
  Thread calibration: mean lat.: 64.644ms, rate sampling interval: 210ms
  Thread calibration: mean lat.: 64.423ms, rate sampling interval: 238ms
  Thread calibration: mean lat.: 83.235ms, rate sampling interval: 242ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    60.01ms   32.09ms 188.29ms   63.24%
    Req/Sec     9.53      2.73    19.00     81.78%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   55.87ms
 75.000%   80.13ms
 90.000%  105.86ms
 99.000%  142.34ms
 99.900%  156.54ms
 99.990%  168.83ms
 99.999%  188.41ms
100.000%  188.41ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.831     0.000000            1         1.00
      22.847     0.100000          681         1.11
      30.687     0.200000         1360         1.25
      39.519     0.300000         2043         1.43
      48.671     0.400000         2720         1.67
      55.871     0.500000         3406         2.00
      57.791     0.550000         3742         2.22
      63.743     0.600000         4082         2.50
      68.735     0.650000         4421         2.86
      75.199     0.700000         4761         3.33
      80.127     0.750000         5107         4.00
      82.303     0.775000         5271         4.44
      85.567     0.800000         5441         5.00
      94.527     0.825000         5610         5.71
      99.519     0.850000         5784         6.67
     101.823     0.875000         5955         8.00
     103.359     0.887500         6038         8.89
     105.855     0.900000         6120        10.00
     110.591     0.912500         6205        11.43
     114.367     0.925000         6291        13.33
     117.695     0.937500         6375        16.00
     119.743     0.943750         6418        17.78
     121.407     0.950000         6465        20.00
     122.751     0.956250         6506        22.86
     124.095     0.962500         6548        26.67
     124.927     0.968750         6590        32.00
     125.567     0.971875         6610        35.56
     126.271     0.975000         6631        40.00
     127.231     0.978125         6654        45.71
     128.575     0.981250         6673        53.33
     131.583     0.984375         6694        64.00
     134.271     0.985938         6705        71.11
     139.135     0.987500         6716        80.00
     142.079     0.989062         6727        91.43
     142.975     0.990625         6739       106.67
     144.511     0.992188         6747       128.00
     145.151     0.992969         6753       142.22
     145.663     0.993750         6760       160.00
     146.175     0.994531         6763       182.86
     146.687     0.995313         6770       213.33
     147.455     0.996094         6774       256.00
     148.479     0.996484         6777       284.44
     148.863     0.996875         6779       320.00
     150.271     0.997266         6783       365.71
     150.527     0.997656         6785       426.67
     151.039     0.998047         6787       512.00
     154.239     0.998242         6789       568.89
     154.879     0.998437         6790       640.00
     155.519     0.998633         6791       731.43
     156.543     0.998828         6793       853.33
     156.799     0.999023         6794      1024.00
     157.823     0.999121         6795      1137.78
     157.823     0.999219         6795      1280.00
     160.511     0.999316         6796      1462.86
     161.663     0.999414         6797      1706.67
     161.663     0.999512         6797      2048.00
     165.631     0.999561         6798      2275.56
     165.631     0.999609         6798      2560.00
     165.631     0.999658         6798      2925.71
     168.831     0.999707         6799      3413.33
     168.831     0.999756         6799      4096.00
     168.831     0.999780         6799      4551.11
     168.831     0.999805         6799      5120.00
     168.831     0.999829         6799      5851.43
     188.415     0.999854         6800      6826.67
     188.415     1.000000         6800          inf
#[Mean    =       60.007, StdDeviation   =       32.086]
#[Max     =      188.288, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     39.99
Transfer/sec:    598.94KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 182.619ms, rate sampling interval: 726ms
  Thread calibration: mean lat.: 260.816ms, rate sampling interval: 1228ms
  Thread calibration: mean lat.: 172.927ms, rate sampling interval: 735ms
  Thread calibration: mean lat.: 145.749ms, rate sampling interval: 534ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   124.97ms   61.73ms 452.61ms   68.74%
    Req/Sec    12.15      1.26    17.00     93.27%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  116.74ms
 75.000%  164.35ms
 90.000%  205.05ms
 99.000%  296.19ms
 99.900%  377.86ms
 99.990%  430.33ms
 99.999%  452.86ms
100.000%  452.86ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.327     0.000000            1         1.00
      51.519     0.100000          850         1.11
      71.231     0.200000         1700         1.25
      88.319     0.300000         2550         1.43
     103.807     0.400000         3401         1.67
     116.735     0.500000         4250         2.00
     124.095     0.550000         4677         2.22
     135.295     0.600000         5103         2.50
     143.103     0.650000         5526         2.86
     152.447     0.700000         5953         3.33
     164.351     0.750000         6376         4.00
     172.671     0.775000         6593         4.44
     178.559     0.800000         6805         5.00
     183.679     0.825000         7013         5.71
     188.543     0.850000         7228         6.67
     194.175     0.875000         7438         8.00
     199.039     0.887500         7545         8.89
     205.055     0.900000         7650        10.00
     213.887     0.912500         7759        11.43
     217.855     0.925000         7864        13.33
     224.383     0.937500         7969        16.00
     228.991     0.943750         8025        17.78
     232.575     0.950000         8075        20.00
     239.103     0.956250         8129        22.86
     249.599     0.962500         8183        26.67
     257.919     0.968750         8235        32.00
     260.095     0.971875         8262        35.56
     261.887     0.975000         8290        40.00
     264.959     0.978125         8315        45.71
     271.871     0.981250         8341        53.33
     277.759     0.984375         8368        64.00
     283.903     0.985938         8381        71.11
     287.231     0.987500         8394        80.00
     293.119     0.989062         8408        91.43
     302.847     0.990625         8422       106.67
     310.015     0.992188         8434       128.00
     314.879     0.992969         8441       142.22
     317.695     0.993750         8447       160.00
     321.791     0.994531         8454       182.86
     326.655     0.995313         8461       213.33
     332.287     0.996094         8467       256.00
     334.591     0.996484         8471       284.44
     338.687     0.996875         8474       320.00
     340.223     0.997266         8477       365.71
     346.879     0.997656         8481       426.67
     351.231     0.998047         8484       512.00
     355.327     0.998242         8486       568.89
     357.119     0.998437         8487       640.00
     369.151     0.998633         8489       731.43
     374.271     0.998828         8491       853.33
     377.855     0.999023         8492      1024.00
     388.607     0.999121         8493      1137.78
     391.167     0.999219         8494      1280.00
     401.919     0.999316         8495      1462.86
     407.551     0.999414         8496      1706.67
     407.551     0.999512         8496      2048.00
     422.655     0.999561         8498      2275.56
     422.655     0.999609         8498      2560.00
     422.655     0.999658         8498      2925.71
     422.655     0.999707         8498      3413.33
     422.655     0.999756         8498      4096.00
     430.335     0.999780         8499      4551.11
     430.335     0.999805         8499      5120.00
     430.335     0.999829         8499      5851.43
     430.335     0.999854         8499      6826.67
     430.335     0.999878         8499      8192.00
     452.863     0.999890         8500      9102.22
     452.863     1.000000         8500          inf
#[Mean    =      124.965, StdDeviation   =       61.731]
#[Max     =      452.608, Total count    =         8500]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  8999 requests in 3.00m, 131.61MB read
Requests/sec:     49.99
Transfer/sec:    748.61KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 91)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 20)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'details-1'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-4'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 61)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 20)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 32)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 42)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 19)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 79)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 19)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 38)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 19)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 79)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 19)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 50)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 19)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 60)
filtered_path (['productpage-3', 'details-3'], 7)
original graph map
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 65.445ms, rate sampling interval: 210ms
  Thread calibration: mean lat.: 46.842ms, rate sampling interval: 195ms
  Thread calibration: mean lat.: 66.121ms, rate sampling interval: 207ms
  Thread calibration: mean lat.: 83.084ms, rate sampling interval: 252ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    61.17ms   35.66ms 185.34ms   57.58%
    Req/Sec    11.99      3.53    20.00     84.59%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.98ms
 75.000%   95.55ms
 90.000%  108.42ms
 99.000%  144.26ms
 99.900%  159.62ms
 99.990%  176.00ms
 99.999%  185.47ms
100.000%  185.47ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.471     0.000000            1         1.00
      15.127     0.100000          850         1.11
      25.887     0.200000         1700         1.25
      34.719     0.300000         2553         1.43
      41.215     0.400000         3401         1.67
      53.983     0.500000         4254         2.00
      57.471     0.550000         4678         2.22
      73.023     0.600000         5101         2.50
      76.671     0.650000         5525         2.86
      88.959     0.700000         5952         3.33
      95.551     0.750000         6380         4.00
      97.023     0.775000         6594         4.44
      98.623     0.800000         6803         5.00
     100.607     0.825000         7017         5.71
     102.079     0.850000         7225         6.67
     103.615     0.875000         7444         8.00
     104.767     0.887500         7544         8.89
     108.415     0.900000         7650        10.00
     112.191     0.912500         7757        11.43
     114.111     0.925000         7863        13.33
     115.647     0.937500         7969        16.00
     116.287     0.943750         8024        17.78
     117.119     0.950000         8077        20.00
     118.079     0.956250         8133        22.86
     119.487     0.962500         8183        26.67
     121.727     0.968750         8235        32.00
     124.991     0.971875         8262        35.56
     127.615     0.975000         8288        40.00
     130.431     0.978125         8315        45.71
     134.143     0.981250         8341        53.33
     138.111     0.984375         8370        64.00
     139.391     0.985938         8381        71.11
     142.463     0.987500         8394        80.00
     143.871     0.989062         8410        91.43
     145.151     0.990625         8422       106.67
     147.199     0.992188         8434       128.00
     147.967     0.992969         8441       142.22
     148.863     0.993750         8447       160.00
     149.887     0.994531         8454       182.86
     151.807     0.995313         8461       213.33
     153.727     0.996094         8467       256.00
     154.111     0.996484         8473       284.44
     154.495     0.996875         8474       320.00
     155.007     0.997266         8477       365.71
     155.647     0.997656         8482       426.67
     156.031     0.998047         8484       512.00
     156.543     0.998242         8486       568.89
     156.799     0.998437         8487       640.00
     157.823     0.998633         8490       731.43
     158.719     0.998828         8491       853.33
     159.615     0.999023         8492      1024.00
     160.767     0.999121         8493      1137.78
     161.407     0.999219         8494      1280.00
     161.791     0.999316         8495      1462.86
     162.431     0.999414         8496      1706.67
     162.431     0.999512         8496      2048.00
     164.991     0.999561         8497      2275.56
     164.991     0.999609         8497      2560.00
     165.503     0.999658         8498      2925.71
     165.503     0.999707         8498      3413.33
     165.503     0.999756         8498      4096.00
     175.999     0.999780         8499      4551.11
     175.999     0.999805         8499      5120.00
     175.999     0.999829         8499      5851.43
     175.999     0.999854         8499      6826.67
     175.999     0.999878         8499      8192.00
     185.471     0.999890         8500      9102.22
     185.471     1.000000         8500          inf
#[Mean    =       61.169, StdDeviation   =       35.663]
#[Max     =      185.344, Total count    =         8500]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.62MB read
Requests/sec:     49.99
Transfer/sec:    748.68KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 127.416ms, rate sampling interval: 382ms
  Thread calibration: mean lat.: 152.610ms, rate sampling interval: 478ms
  Thread calibration: mean lat.: 140.735ms, rate sampling interval: 520ms
  Thread calibration: mean lat.: 175.876ms, rate sampling interval: 529ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   105.17ms   53.04ms 351.23ms   67.33%
    Req/Sec     2.13      1.81     5.00     87.41%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  100.54ms
 75.000%  139.13ms
 90.000%  178.43ms
 99.000%  239.10ms
 99.900%  321.79ms
 99.990%  351.49ms
 99.999%  351.49ms
100.000%  351.49ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.911     0.000000            1         1.00
      38.559     0.100000          170         1.11
      56.543     0.200000          340         1.25
      73.279     0.300000          511         1.43
      87.743     0.400000          679         1.67
     100.543     0.500000          848         2.00
     107.071     0.550000          934         2.22
     112.319     0.600000         1019         2.50
     119.359     0.650000         1103         2.86
     129.727     0.700000         1189         3.33
     139.135     0.750000         1272         4.00
     144.127     0.775000         1315         4.44
     150.783     0.800000         1357         5.00
     157.055     0.825000         1401         5.71
     162.175     0.850000         1442         6.67
     172.415     0.875000         1484         8.00
     176.255     0.887500         1506         8.89
     178.559     0.900000         1527        10.00
     182.911     0.912500         1548        11.43
     187.007     0.925000         1570        13.33
     189.183     0.937500         1590        16.00
     191.231     0.943750         1602        17.78
     194.303     0.950000         1612        20.00
     197.119     0.956250         1622        22.86
     205.439     0.962500         1633        26.67
     216.447     0.968750         1643        32.00
     218.111     0.971875         1649        35.56
     218.751     0.975000         1654        40.00
     221.439     0.978125         1660        45.71
     226.303     0.981250         1665        53.33
     231.167     0.984375         1670        64.00
     233.855     0.985938         1673        71.11
     234.367     0.987500         1675        80.00
     236.287     0.989062         1678        91.43
     253.055     0.990625         1681       106.67
     262.911     0.992188         1684       128.00
     265.215     0.992969         1685       142.22
     267.775     0.993750         1687       160.00
     267.775     0.994531         1687       182.86
     269.823     0.995313         1689       213.33
     277.247     0.996094         1690       256.00
     279.039     0.996484         1691       284.44
     279.039     0.996875         1691       320.00
     280.319     0.997266         1692       365.71
     301.567     0.997656         1693       426.67
     301.567     0.998047         1693       512.00
     321.791     0.998242         1694       568.89
     321.791     0.998437         1694       640.00
     321.791     0.998633         1694       731.43
     323.839     0.998828         1695       853.33
     323.839     0.999023         1695      1024.00
     323.839     0.999121         1695      1137.78
     323.839     0.999219         1695      1280.00
     323.839     0.999316         1695      1462.86
     351.487     0.999414         1696      1706.67
     351.487     1.000000         1696          inf
#[Mean    =      105.170, StdDeviation   =       53.043]
#[Max     =      351.232, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'details-3'], 58)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-4'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-4'], 4)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 91)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 38)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 79)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 79)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 60)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 50)
filtered_path (['productpage-3', 'details-1'], 7)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 20)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 42)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 65)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 32)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'details-1'], 9)
original graph map
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 79.557ms, rate sampling interval: 275ms
  Thread calibration: mean lat.: 76.659ms, rate sampling interval: 284ms
  Thread calibration: mean lat.: 106.211ms, rate sampling interval: 325ms
  Thread calibration: mean lat.: 73.400ms, rate sampling interval: 237ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    64.27ms   33.31ms 179.58ms   65.74%
    Req/Sec     2.39      3.16     8.00     77.78%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   61.89ms
 75.000%   87.74ms
 90.000%  111.93ms
 99.000%  147.71ms
 99.900%  166.78ms
 99.990%  179.71ms
 99.999%  179.71ms
100.000%  179.71ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.383     0.000000            1         1.00
      20.783     0.100000          170         1.11
      34.751     0.200000          340         1.25
      41.823     0.300000          509         1.43
      49.279     0.400000          679         1.67
      61.887     0.500000          848         2.00
      67.135     0.550000          934         2.22
      71.231     0.600000         1019         2.50
      74.687     0.650000         1103         2.86
      79.743     0.700000         1188         3.33
      87.743     0.750000         1272         4.00
      90.815     0.775000         1316         4.44
      93.631     0.800000         1357         5.00
      96.703     0.825000         1400         5.71
     100.095     0.850000         1443         6.67
     102.847     0.875000         1484         8.00
     107.711     0.887500         1506         8.89
     111.935     0.900000         1527        10.00
     113.791     0.912500         1548        11.43
     116.159     0.925000         1569        13.33
     119.423     0.937500         1591        16.00
     121.151     0.943750         1601        17.78
     124.159     0.950000         1612        20.00
     127.807     0.956250         1622        22.86
     132.351     0.962500         1633        26.67
     136.191     0.968750         1643        32.00
     141.055     0.971875         1649        35.56
     142.079     0.975000         1654        40.00
     142.463     0.978125         1659        45.71
     143.487     0.981250         1665        53.33
     145.407     0.984375         1670        64.00
     146.943     0.985938         1673        71.11
     147.199     0.987500         1675        80.00
     147.583     0.989062         1678        91.43
     148.863     0.990625         1681       106.67
     150.399     0.992188         1683       128.00
     151.807     0.992969         1685       142.22
     152.831     0.993750         1686       160.00
     154.751     0.994531         1687       182.86
     159.103     0.995313         1689       213.33
     159.615     0.996094         1690       256.00
     161.407     0.996484         1691       284.44
     161.407     0.996875         1691       320.00
     162.431     0.997266         1692       365.71
     163.327     0.997656         1693       426.67
     163.327     0.998047         1693       512.00
     166.783     0.998242         1694       568.89
     166.783     0.998437         1694       640.00
     166.783     0.998633         1694       731.43
     171.519     0.998828         1695       853.33
     171.519     0.999023         1695      1024.00
     171.519     0.999121         1695      1137.78
     171.519     0.999219         1695      1280.00
     171.519     0.999316         1695      1462.86
     179.711     0.999414         1696      1706.67
     179.711     1.000000         1696          inf
#[Mean    =       64.273, StdDeviation   =       33.307]
#[Max     =      179.584, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.32MB read
Requests/sec:     10.00
Transfer/sec:    149.74KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 164.838ms, rate sampling interval: 541ms
  Thread calibration: mean lat.: 155.181ms, rate sampling interval: 544ms
  Thread calibration: mean lat.: 139.115ms, rate sampling interval: 433ms
  Thread calibration: mean lat.: 136.437ms, rate sampling interval: 454ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   113.64ms   54.65ms 311.81ms   65.68%
    Req/Sec     4.44      1.36     9.00     87.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  108.48ms
 75.000%  148.61ms
 90.000%  188.16ms
 99.000%  262.91ms
 99.900%  285.70ms
 99.990%  312.06ms
 99.999%  312.06ms
100.000%  312.06ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.319     0.000000            1         1.00
      45.791     0.100000          341         1.11
      63.327     0.200000          680         1.25
      81.663     0.300000         1022         1.43
      95.103     0.400000         1360         1.67
     108.479     0.500000         1700         2.00
     114.495     0.550000         1870         2.22
     120.383     0.600000         2041         2.50
     131.711     0.650000         2211         2.86
     139.263     0.700000         2380         3.33
     148.607     0.750000         2551         4.00
     156.543     0.775000         2637         4.44
     159.871     0.800000         2722         5.00
     164.863     0.825000         2805         5.71
     174.463     0.850000         2891         6.67
     183.167     0.875000         2976         8.00
     185.983     0.887500         3021         8.89
     188.159     0.900000         3061        10.00
     191.871     0.912500         3103        11.43
     197.887     0.925000         3146        13.33
     201.599     0.937500         3188        16.00
     204.159     0.943750         3210        17.78
     207.103     0.950000         3230        20.00
     213.375     0.956250         3252        22.86
     217.727     0.962500         3273        26.67
     225.023     0.968750         3294        32.00
     229.503     0.971875         3305        35.56
     233.727     0.975000         3315        40.00
     239.103     0.978125         3327        45.71
     242.175     0.981250         3337        53.33
     247.807     0.984375         3347        64.00
     258.303     0.985938         3353        71.11
     260.735     0.987500         3358        80.00
     261.631     0.989062         3363        91.43
     266.239     0.990625         3369       106.67
     268.031     0.992188         3375       128.00
     268.287     0.992969         3377       142.22
     269.311     0.993750         3379       160.00
     269.823     0.994531         3382       182.86
     272.127     0.995313         3386       213.33
     272.639     0.996094         3387       256.00
     272.895     0.996484         3389       284.44
     276.479     0.996875         3390       320.00
     278.015     0.997266         3391       365.71
     280.063     0.997656         3393       426.67
     280.575     0.998047         3394       512.00
     283.135     0.998242         3395       568.89
     283.135     0.998437         3395       640.00
     285.183     0.998633         3396       731.43
     285.695     0.998828         3397       853.33
     285.695     0.999023         3397      1024.00
     286.975     0.999121         3398      1137.78
     286.975     0.999219         3398      1280.00
     286.975     0.999316         3398      1462.86
     312.063     0.999414         3400      1706.67
     312.063     1.000000         3400          inf
#[Mean    =      113.640, StdDeviation   =       54.653]
#[Max     =      311.808, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.48KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 61)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 32)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 20)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 42)
filtered_path (['productpage-5', 'details-4'], 37)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 91)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 4)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 78)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 78)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 49)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 37)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 59)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 154)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-3'], 59)
original graph map
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 74.577ms, rate sampling interval: 255ms
  Thread calibration: mean lat.: 73.233ms, rate sampling interval: 277ms
  Thread calibration: mean lat.: 75.741ms, rate sampling interval: 244ms
  Thread calibration: mean lat.: 79.803ms, rate sampling interval: 268ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    66.08ms   35.25ms 194.69ms   63.68%
    Req/Sec     4.65      3.09     8.00     75.54%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   56.45ms
 75.000%   97.54ms
 90.000%  116.80ms
 99.000%  148.48ms
 99.900%  168.83ms
 99.990%  194.82ms
 99.999%  194.82ms
100.000%  194.82ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.655     0.000000            1         1.00
      24.223     0.100000          342         1.11
      35.999     0.200000          680         1.25
      41.407     0.300000         1020         1.43
      49.279     0.400000         1363         1.67
      56.447     0.500000         1700         2.00
      63.711     0.550000         1870         2.22
      73.599     0.600000         2041         2.50
      78.847     0.650000         2212         2.86
      84.991     0.700000         2380         3.33
      97.535     0.750000         2551         4.00
     101.247     0.775000         2635         4.44
     103.231     0.800000         2720         5.00
     105.343     0.825000         2807         5.71
     108.095     0.850000         2891         6.67
     112.319     0.875000         2975         8.00
     115.135     0.887500         3018         8.89
     116.799     0.900000         3060        10.00
     118.335     0.912500         3103        11.43
     119.999     0.925000         3147        13.33
     122.047     0.937500         3189        16.00
     122.943     0.943750         3209        17.78
     123.711     0.950000         3230        20.00
     125.823     0.956250         3252        22.86
     127.423     0.962500         3274        26.67
     131.199     0.968750         3294        32.00
     133.503     0.971875         3306        35.56
     135.423     0.975000         3315        40.00
     140.671     0.978125         3326        45.71
     142.719     0.981250         3337        53.33
     145.279     0.984375         3347        64.00
     146.175     0.985938         3353        71.11
     146.943     0.987500         3358        80.00
     148.223     0.989062         3365        91.43
     149.119     0.990625         3369       106.67
     152.959     0.992188         3374       128.00
     154.367     0.992969         3377       142.22
     154.623     0.993750         3379       160.00
     155.263     0.994531         3383       182.86
     156.799     0.995313         3385       213.33
     158.719     0.996094         3387       256.00
     159.871     0.996484         3389       284.44
     161.663     0.996875         3390       320.00
     162.047     0.997266         3391       365.71
     163.455     0.997656         3393       426.67
     165.119     0.998047         3394       512.00
     165.759     0.998242         3395       568.89
     165.759     0.998437         3395       640.00
     167.423     0.998633         3396       731.43
     168.831     0.998828         3397       853.33
     168.831     0.999023         3397      1024.00
     175.103     0.999121         3398      1137.78
     175.103     0.999219         3398      1280.00
     175.103     0.999316         3398      1462.86
     187.263     0.999414         3399      1706.67
     187.263     0.999512         3399      2048.00
     187.263     0.999561         3399      2275.56
     187.263     0.999609         3399      2560.00
     187.263     0.999658         3399      2925.71
     194.815     0.999707         3400      3413.33
     194.815     1.000000         3400          inf
#[Mean    =       66.080, StdDeviation   =       35.252]
#[Max     =      194.688, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.48KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 109.198ms, rate sampling interval: 382ms
  Thread calibration: mean lat.: 171.952ms, rate sampling interval: 721ms
  Thread calibration: mean lat.: 126.394ms, rate sampling interval: 481ms
  Thread calibration: mean lat.: 126.057ms, rate sampling interval: 372ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   109.85ms   52.96ms 313.86ms   68.11%
    Req/Sec     7.08      1.75    10.00     83.27%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  105.66ms
 75.000%  143.87ms
 90.000%  182.01ms
 99.000%  261.25ms
 99.900%  301.57ms
 99.990%  306.17ms
 99.999%  314.11ms
100.000%  314.11ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.551     0.000000            1         1.00
      45.663     0.100000          510         1.11
      62.335     0.200000         1021         1.25
      78.527     0.300000         1530         1.43
      90.495     0.400000         2042         1.67
     105.663     0.500000         2551         2.00
     110.591     0.550000         2804         2.22
     117.119     0.600000         3059         2.50
     125.119     0.650000         3315         2.86
     135.295     0.700000         3571         3.33
     143.871     0.750000         3828         4.00
     149.119     0.775000         3953         4.44
     153.087     0.800000         4081         5.00
     158.079     0.825000         4206         5.71
     164.991     0.850000         4335         6.67
     175.231     0.875000         4461         8.00
     178.559     0.887500         4525         8.89
     182.015     0.900000         4590        10.00
     187.263     0.912500         4652        11.43
     191.103     0.925000         4716        13.33
     194.559     0.937500         4780        16.00
     197.759     0.943750         4814        17.78
     202.751     0.950000         4845        20.00
     208.127     0.956250         4875        22.86
     218.111     0.962500         4907        26.67
     222.975     0.968750         4939        32.00
     227.711     0.971875         4955        35.56
     231.679     0.975000         4971        40.00
     234.879     0.978125         4987        45.71
     237.567     0.981250         5004        53.33
     243.071     0.984375         5019        64.00
     252.287     0.985938         5028        71.11
     259.839     0.987500         5036        80.00
     260.991     0.989062         5044        91.43
     262.015     0.990625         5051       106.67
     263.935     0.992188         5060       128.00
     264.959     0.992969         5063       142.22
     265.727     0.993750         5068       160.00
     266.751     0.994531         5071       182.86
     267.263     0.995313         5075       213.33
     269.055     0.996094         5079       256.00
     270.079     0.996484         5081       284.44
     270.847     0.996875         5083       320.00
     271.615     0.997266         5085       365.71
     274.175     0.997656         5087       426.67
     278.015     0.998047         5089       512.00
     278.527     0.998242         5090       568.89
     279.295     0.998437         5091       640.00
     300.799     0.998633         5092       731.43
     301.567     0.998828         5093       853.33
     302.079     0.999023         5094      1024.00
     302.079     0.999121         5094      1137.78
     302.847     0.999219         5095      1280.00
     302.847     0.999316         5095      1462.86
     303.871     0.999414         5096      1706.67
     303.871     0.999512         5096      2048.00
     303.871     0.999561         5096      2275.56
     306.175     0.999609         5097      2560.00
     306.175     0.999658         5097      2925.71
     306.175     0.999707         5097      3413.33
     306.175     0.999756         5097      4096.00
     306.175     0.999780         5097      4551.11
     314.111     0.999805         5098      5120.00
     314.111     1.000000         5098          inf
#[Mean    =      109.850, StdDeviation   =       52.957]
#[Max     =      313.856, Total count    =         5098]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.23KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 42)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 20)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 32)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'details-4'], 4)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 59)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 37)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 78)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 78)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 49)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 28)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 38)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 27)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 69)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-2'], 6)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-3'], 10)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'details-2'], 13)
original graph map
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 64.781ms, rate sampling interval: 244ms
  Thread calibration: mean lat.: 71.785ms, rate sampling interval: 281ms
  Thread calibration: mean lat.: 77.815ms, rate sampling interval: 257ms
  Thread calibration: mean lat.: 67.148ms, rate sampling interval: 239ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    64.00ms   35.91ms 233.09ms   65.24%
    Req/Sec     7.13      2.18    16.00     87.91%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   61.06ms
 75.000%   89.92ms
 90.000%  116.61ms
 99.000%  147.58ms
 99.900%  159.49ms
 99.990%  166.01ms
 99.999%  233.21ms
100.000%  233.21ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.799     0.000000            1         1.00
      21.679     0.100000          510         1.11
      30.431     0.200000         1020         1.25
      37.599     0.300000         1534         1.43
      45.599     0.400000         2040         1.67
      61.055     0.500000         2549         2.00
      66.751     0.550000         2808         2.22
      70.975     0.600000         3061         2.50
      75.007     0.650000         3319         2.86
      79.807     0.700000         3570         3.33
      89.919     0.750000         3824         4.00
      94.399     0.775000         3952         4.44
      98.367     0.800000         4079         5.00
     101.823     0.825000         4206         5.71
     110.271     0.850000         4336         6.67
     113.663     0.875000         4461         8.00
     115.455     0.887500         4526         8.89
     116.671     0.900000         4589        10.00
     118.655     0.912500         4654        11.43
     121.407     0.925000         4717        13.33
     123.967     0.937500         4781        16.00
     125.631     0.943750         4812        17.78
     127.359     0.950000         4845        20.00
     129.599     0.956250         4876        22.86
     132.607     0.962500         4907        26.67
     138.623     0.968750         4939        32.00
     140.159     0.971875         4955        35.56
     142.079     0.975000         4972        40.00
     143.103     0.978125         4987        45.71
     144.383     0.981250         5003        53.33
     145.791     0.984375         5019        64.00
     146.559     0.985938         5030        71.11
     147.071     0.987500         5036        80.00
     147.327     0.989062         5043        91.43
     147.839     0.990625         5053       106.67
     151.039     0.992188         5059       128.00
     151.679     0.992969         5063       142.22
     153.087     0.993750         5067       160.00
     153.727     0.994531         5071       182.86
     154.239     0.995313         5075       213.33
     154.751     0.996094         5079       256.00
     155.263     0.996484         5081       284.44
     155.519     0.996875         5083       320.00
     156.159     0.997266         5085       365.71
     156.671     0.997656         5087       426.67
     158.591     0.998047         5090       512.00
     158.591     0.998242         5090       568.89
     159.103     0.998437         5091       640.00
     159.487     0.998633         5093       731.43
     159.487     0.998828         5093       853.33
     160.767     0.999023         5094      1024.00
     160.767     0.999121         5094      1137.78
     161.023     0.999219         5095      1280.00
     161.023     0.999316         5095      1462.86
     165.119     0.999414         5096      1706.67
     165.119     0.999512         5096      2048.00
     165.119     0.999561         5096      2275.56
     166.015     0.999609         5097      2560.00
     166.015     0.999658         5097      2925.71
     166.015     0.999707         5097      3413.33
     166.015     0.999756         5097      4096.00
     166.015     0.999780         5097      4551.11
     233.215     0.999805         5098      5120.00
     233.215     1.000000         5098          inf
#[Mean    =       64.002, StdDeviation   =       35.912]
#[Max     =      233.088, Total count    =         5098]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.97MB read
Requests/sec:     30.00
Transfer/sec:    449.21KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 134.384ms, rate sampling interval: 531ms
  Thread calibration: mean lat.: 114.436ms, rate sampling interval: 395ms
  Thread calibration: mean lat.: 128.109ms, rate sampling interval: 430ms
  Thread calibration: mean lat.: 148.826ms, rate sampling interval: 651ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   107.85ms   53.10ms 303.10ms   68.27%
    Req/Sec     9.59      1.63    15.00     92.96%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  101.31ms
 75.000%  141.31ms
 90.000%  185.73ms
 99.000%  244.48ms
 99.900%  272.89ms
 99.990%  298.75ms
 99.999%  303.36ms
100.000%  303.36ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.343     0.000000            1         1.00
      43.711     0.100000          680         1.11
      59.423     0.200000         1362         1.25
      74.431     0.300000         2042         1.43
      89.215     0.400000         2720         1.67
     101.311     0.500000         3401         2.00
     108.799     0.550000         3740         2.22
     114.751     0.600000         4081         2.50
     122.943     0.650000         4427         2.86
     135.167     0.700000         4763         3.33
     141.311     0.750000         5105         4.00
     143.871     0.775000         5270         4.44
     149.375     0.800000         5443         5.00
     155.391     0.825000         5611         5.71
     163.839     0.850000         5782         6.67
     178.175     0.875000         5950         8.00
     182.015     0.887500         6035         8.89
     185.727     0.900000         6123        10.00
     189.823     0.912500         6207        11.43
     192.383     0.925000         6291        13.33
     195.583     0.937500         6377        16.00
     199.039     0.943750         6417        17.78
     206.335     0.950000         6460        20.00
     217.599     0.956250         6502        22.86
     220.415     0.962500         6545        26.67
     221.951     0.968750         6588        32.00
     222.975     0.971875         6609        35.56
     224.127     0.975000         6631        40.00
     225.407     0.978125         6654        45.71
     227.199     0.981250         6673        53.33
     233.343     0.984375         6693        64.00
     235.519     0.985938         6704        71.11
     237.823     0.987500         6715        80.00
     241.023     0.989062         6725        91.43
     249.343     0.990625         6736       106.67
     261.119     0.992188         6746       128.00
     262.655     0.992969         6752       142.22
     263.679     0.993750         6758       160.00
     264.191     0.994531         6762       182.86
     265.727     0.995313         6769       213.33
     266.239     0.996094         6774       256.00
     266.495     0.996484         6776       284.44
     266.751     0.996875         6779       320.00
     268.543     0.997266         6781       365.71
     269.311     0.997656         6784       426.67
     270.079     0.998047         6786       512.00
     271.359     0.998242         6788       568.89
     271.615     0.998437         6790       640.00
     271.615     0.998633         6790       731.43
     272.895     0.998828         6792       853.33
     273.151     0.999023         6793      1024.00
     274.943     0.999121         6794      1137.78
     274.943     0.999219         6794      1280.00
     278.015     0.999316         6795      1462.86
     283.135     0.999414         6796      1706.67
     283.135     0.999512         6796      2048.00
     286.719     0.999561         6797      2275.56
     286.719     0.999609         6797      2560.00
     286.719     0.999658         6797      2925.71
     298.751     0.999707         6798      3413.33
     298.751     0.999756         6798      4096.00
     298.751     0.999780         6798      4551.11
     298.751     0.999805         6798      5120.00
     298.751     0.999829         6798      5851.43
     303.359     0.999854         6799      6826.67
     303.359     1.000000         6799          inf
#[Mean    =      107.850, StdDeviation   =       53.098]
#[Max     =      303.104, Total count    =         6799]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7199 requests in 3.00m, 105.29MB read
Requests/sec:     39.99
Transfer/sec:    598.89KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 100)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 38)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 27)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 6)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 4)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 49)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 37)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 78)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 78)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 59)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 35)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 23)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 64)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 45)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 31)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 19)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 41)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-2'], 12)
original graph map
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 66.817ms, rate sampling interval: 234ms
  Thread calibration: mean lat.: 86.724ms, rate sampling interval: 287ms
  Thread calibration: mean lat.: 51.918ms, rate sampling interval: 195ms
  Thread calibration: mean lat.: 65.688ms, rate sampling interval: 198ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    59.89ms   33.04ms 177.66ms   58.81%
    Req/Sec     9.62      2.75    20.00     84.54%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   54.65ms
 75.000%   81.41ms
 90.000%  104.19ms
 99.000%  143.49ms
 99.900%  158.46ms
 99.990%  174.98ms
 99.999%  177.79ms
100.000%  177.79ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.799     0.000000            1         1.00
      21.279     0.100000          680         1.11
      26.623     0.200000         1362         1.25
      38.047     0.300000         2041         1.43
      51.199     0.400000         2726         1.67
      54.655     0.500000         3402         2.00
      56.639     0.550000         3741         2.22
      62.975     0.600000         4080         2.50
      69.247     0.650000         4420         2.86
      75.135     0.700000         4764         3.33
      81.407     0.750000         5103         4.00
      88.959     0.775000         5272         4.44
      94.015     0.800000         5441         5.00
      96.383     0.825000         5612         5.71
      98.239     0.850000         5781         6.67
     100.543     0.875000         5951         8.00
     101.695     0.887500         6037         8.89
     104.191     0.900000         6121        10.00
     110.719     0.912500         6208        11.43
     113.727     0.925000         6290        13.33
     116.479     0.937500         6375        16.00
     117.951     0.943750         6418        17.78
     120.127     0.950000         6460        20.00
     122.175     0.956250         6503        22.86
     124.351     0.962500         6545        26.67
     126.335     0.968750         6589        32.00
     128.319     0.971875         6609        35.56
     129.599     0.975000         6630        40.00
     132.095     0.978125         6652        45.71
     134.655     0.981250         6673        53.33
     137.727     0.984375         6694        64.00
     139.391     0.985938         6705        71.11
     141.311     0.987500         6715        80.00
     142.719     0.989062         6727        91.43
     144.767     0.990625         6737       106.67
     145.791     0.992188         6749       128.00
     146.303     0.992969         6753       142.22
     147.071     0.993750         6758       160.00
     147.711     0.994531         6763       182.86
     148.479     0.995313         6769       213.33
     149.759     0.996094         6774       256.00
     151.295     0.996484         6777       284.44
     151.679     0.996875         6779       320.00
     152.959     0.997266         6782       365.71
     153.855     0.997656         6785       426.67
     154.495     0.998047         6788       512.00
     154.751     0.998242         6789       568.89
     157.183     0.998437         6790       640.00
     157.695     0.998633         6791       731.43
     158.463     0.998828         6793       853.33
     159.615     0.999023         6794      1024.00
     159.743     0.999121         6795      1137.78
     159.743     0.999219         6795      1280.00
     160.511     0.999316         6796      1462.86
     163.839     0.999414         6797      1706.67
     163.839     0.999512         6797      2048.00
     167.935     0.999561         6798      2275.56
     167.935     0.999609         6798      2560.00
     167.935     0.999658         6798      2925.71
     174.975     0.999707         6799      3413.33
     174.975     0.999756         6799      4096.00
     174.975     0.999780         6799      4551.11
     174.975     0.999805         6799      5120.00
     174.975     0.999829         6799      5851.43
     177.791     0.999854         6800      6826.67
     177.791     1.000000         6800          inf
#[Mean    =       59.894, StdDeviation   =       33.044]
#[Max     =      177.664, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7201 requests in 3.00m, 105.31MB read
Requests/sec:     40.00
Transfer/sec:    599.04KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 230.695ms, rate sampling interval: 1207ms
  Thread calibration: mean lat.: 406.800ms, rate sampling interval: 2023ms
  Thread calibration: mean lat.: 126.108ms, rate sampling interval: 401ms
  Thread calibration: mean lat.: 263.860ms, rate sampling interval: 1514ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   120.54ms   58.68ms 420.10ms   67.75%
    Req/Sec    11.96      1.52    17.00     85.24%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  112.06ms
 75.000%  155.52ms
 90.000%  197.63ms
 99.000%  285.44ms
 99.900%  361.47ms
 99.990%  418.56ms
 99.999%  420.35ms
100.000%  420.35ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.431     0.000000            1         1.00
      52.639     0.100000          850         1.11
      68.351     0.200000         1700         1.25
      84.671     0.300000         2554         1.43
      98.495     0.400000         3405         1.67
     112.063     0.500000         4254         2.00
     118.911     0.550000         4677         2.22
     127.295     0.600000         5100         2.50
     136.959     0.650000         5529         2.86
     145.407     0.700000         5955         3.33
     155.519     0.750000         6378         4.00
     161.407     0.775000         6591         4.44
     168.447     0.800000         6800         5.00
     176.127     0.825000         7016         5.71
     183.167     0.850000         7227         6.67
     189.695     0.875000         7439         8.00
     192.767     0.887500         7544         8.89
     197.631     0.900000         7650        10.00
     203.775     0.912500         7757        11.43
     212.607     0.925000         7864        13.33
     218.367     0.937500         7971        16.00
     220.671     0.943750         8022        17.78
     225.663     0.950000         8075        20.00
     230.783     0.956250         8130        22.86
     235.647     0.962500         8182        26.67
     246.783     0.968750         8236        32.00
     252.159     0.971875         8261        35.56
     255.999     0.975000         8288        40.00
     260.735     0.978125         8316        45.71
     263.167     0.981250         8343        53.33
     269.311     0.984375         8368        64.00
     273.407     0.985938         8381        71.11
     278.527     0.987500         8394        80.00
     283.391     0.989062         8408        91.43
     287.487     0.990625         8422       106.67
     296.447     0.992188         8434       128.00
     303.615     0.992969         8441       142.22
     307.711     0.993750         8447       160.00
     314.879     0.994531         8454       182.86
     323.071     0.995313         8461       213.33
     329.215     0.996094         8467       256.00
     332.799     0.996484         8471       284.44
     339.711     0.996875         8474       320.00
     342.783     0.997266         8477       365.71
     346.879     0.997656         8481       426.67
     350.463     0.998047         8484       512.00
     351.231     0.998242         8486       568.89
     352.511     0.998437         8487       640.00
     355.583     0.998633         8489       731.43
     360.703     0.998828         8491       853.33
     361.471     0.999023         8492      1024.00
     362.495     0.999121         8493      1137.78
     364.031     0.999219         8494      1280.00
     369.663     0.999316         8495      1462.86
     380.671     0.999414         8496      1706.67
     380.671     0.999512         8496      2048.00
     387.327     0.999561         8497      2275.56
     387.327     0.999609         8497      2560.00
     417.535     0.999658         8498      2925.71
     417.535     0.999707         8498      3413.33
     417.535     0.999756         8498      4096.00
     418.559     0.999780         8499      4551.11
     418.559     0.999805         8499      5120.00
     418.559     0.999829         8499      5851.43
     418.559     0.999854         8499      6826.67
     418.559     0.999878         8499      8192.00
     420.351     0.999890         8500      9102.22
     420.351     1.000000         8500          inf
#[Mean    =      120.542, StdDeviation   =       58.676]
#[Max     =      420.096, Total count    =         8500]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  8998 requests in 3.00m, 131.60MB read
Requests/sec:     49.98
Transfer/sec:    748.55KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 58)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 77)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 77)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 36)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 48)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-2'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-3'], 15)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 60)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 19)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 64)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 31)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 27)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 38)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 100)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'details-2'], 7)
original graph map
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 70.122ms, rate sampling interval: 245ms
  Thread calibration: mean lat.: 67.837ms, rate sampling interval: 258ms
  Thread calibration: mean lat.: 61.030ms, rate sampling interval: 212ms
  Thread calibration: mean lat.: 76.784ms, rate sampling interval: 285ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    63.26ms   35.62ms 273.66ms   65.47%
    Req/Sec    12.14      2.97    23.00     82.97%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   55.55ms
 75.000%   93.89ms
 90.000%  112.64ms
 99.000%  147.97ms
 99.900%  157.95ms
 99.990%  179.46ms
 99.999%  273.92ms
100.000%  273.92ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.343     0.000000            1         1.00
      22.175     0.100000          850         1.11
      29.759     0.200000         1703         1.25
      37.375     0.300000         2553         1.43
      49.759     0.400000         3402         1.67
      55.551     0.500000         4250         2.00
      63.423     0.550000         4675         2.22
      69.823     0.600000         5100         2.50
      75.583     0.650000         5525         2.86
      83.839     0.700000         5952         3.33
      93.951     0.750000         6384         4.00
      95.743     0.775000         6592         4.44
      97.343     0.800000         6800         5.00
      98.879     0.825000         7016         5.71
     101.183     0.850000         7225         6.67
     107.967     0.875000         7437         8.00
     110.335     0.887500         7545         8.89
     112.639     0.900000         7653        10.00
     114.943     0.912500         7758        11.43
     117.503     0.925000         7863        13.33
     121.471     0.937500         7969        16.00
     123.775     0.943750         8022        17.78
     126.143     0.950000         8075        20.00
     128.511     0.956250         8128        22.86
     133.759     0.962500         8181        26.67
     139.263     0.968750         8234        32.00
     140.159     0.971875         8265        35.56
     141.183     0.975000         8289        40.00
     142.463     0.978125         8314        45.71
     143.743     0.981250         8341        53.33
     145.023     0.984375         8368        64.00
     145.535     0.985938         8380        71.11
     146.047     0.987500         8393        80.00
     147.327     0.989062         8408        91.43
     148.991     0.990625         8420       106.67
     150.527     0.992188         8435       128.00
     151.167     0.992969         8440       142.22
     151.423     0.993750         8446       160.00
     152.703     0.994531         8454       182.86
     153.471     0.995313         8460       213.33
     153.983     0.996094         8466       256.00
     154.367     0.996484         8470       284.44
     155.391     0.996875         8473       320.00
     156.415     0.997266         8476       365.71
     156.543     0.997656         8480       426.67
     156.927     0.998047         8483       512.00
     157.183     0.998242         8485       568.89
     157.439     0.998437         8487       640.00
     157.567     0.998633         8489       731.43
     157.823     0.998828         8490       853.33
     157.951     0.999023         8491      1024.00
     158.335     0.999121         8492      1137.78
     158.975     0.999219         8493      1280.00
     159.743     0.999316         8495      1462.86
     159.743     0.999414         8495      1706.67
     159.743     0.999512         8495      2048.00
     161.151     0.999561         8496      2275.56
     161.151     0.999609         8496      2560.00
     162.303     0.999658         8497      2925.71
     162.303     0.999707         8497      3413.33
     162.303     0.999756         8497      4096.00
     179.455     0.999780         8498      4551.11
     179.455     0.999805         8498      5120.00
     179.455     0.999829         8498      5851.43
     179.455     0.999854         8498      6826.67
     179.455     0.999878         8498      8192.00
     273.919     0.999890         8499      9102.22
     273.919     1.000000         8499          inf
#[Mean    =       63.258, StdDeviation   =       35.622]
#[Max     =      273.664, Total count    =         8499]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9001 requests in 3.00m, 131.64MB read
Requests/sec:     50.00
Transfer/sec:    748.76KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 140.852ms, rate sampling interval: 526ms
  Thread calibration: mean lat.: 141.268ms, rate sampling interval: 458ms
  Thread calibration: mean lat.: 177.290ms, rate sampling interval: 663ms
  Thread calibration: mean lat.: 146.713ms, rate sampling interval: 463ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   104.15ms   50.81ms 397.57ms   68.99%
    Req/Sec     2.23      1.61     4.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   99.39ms
 75.000%  136.83ms
 90.000%  168.96ms
 99.000%  239.74ms
 99.900%  304.64ms
 99.990%  397.82ms
 99.999%  397.82ms
100.000%  397.82ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.999     0.000000            1         1.00
      42.303     0.100000          170         1.11
      59.647     0.200000          340         1.25
      73.855     0.300000          510         1.43
      86.591     0.400000          679         1.67
      99.391     0.500000          848         2.00
     105.535     0.550000          933         2.22
     111.615     0.600000         1018         2.50
     117.503     0.650000         1103         2.86
     127.103     0.700000         1189         3.33
     136.831     0.750000         1273         4.00
     139.775     0.775000         1316         4.44
     143.999     0.800000         1357         5.00
     148.991     0.825000         1400         5.71
     155.263     0.850000         1442         6.67
     160.383     0.875000         1484         8.00
     164.607     0.887500         1506         8.89
     169.087     0.900000         1527        10.00
     176.639     0.912500         1549        11.43
     181.631     0.925000         1569        13.33
     187.903     0.937500         1591        16.00
     190.463     0.943750         1601        17.78
     194.687     0.950000         1612        20.00
     198.527     0.956250         1622        22.86
     206.207     0.962500         1633        26.67
     211.967     0.968750         1643        32.00
     216.703     0.971875         1650        35.56
     218.111     0.975000         1654        40.00
     219.903     0.978125         1659        45.71
     231.039     0.981250         1665        53.33
     233.855     0.984375         1670        64.00
     235.903     0.985938         1673        71.11
     237.055     0.987500         1675        80.00
     238.847     0.989062         1678        91.43
     251.647     0.990625         1681       106.67
     256.511     0.992188         1683       128.00
     258.687     0.992969         1685       142.22
     260.479     0.993750         1686       160.00
     260.991     0.994531         1687       182.86
     264.191     0.995313         1689       213.33
     267.263     0.996094         1690       256.00
     280.319     0.996484         1691       284.44
     280.319     0.996875         1691       320.00
     281.087     0.997266         1692       365.71
     297.215     0.997656         1693       426.67
     297.215     0.998047         1693       512.00
     304.639     0.998242         1694       568.89
     304.639     0.998437         1694       640.00
     304.639     0.998633         1694       731.43
     397.567     0.998828         1695       853.33
     397.567     0.999023         1695      1024.00
     397.567     0.999121         1695      1137.78
     397.567     0.999219         1695      1280.00
     397.567     0.999316         1695      1462.86
     397.823     0.999414         1696      1706.67
     397.823     1.000000         1696          inf
#[Mean    =      104.148, StdDeviation   =       50.813]
#[Max     =      397.568, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 48)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 58)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 36)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 77)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 15)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 77)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 101)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 69)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 38)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 27)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 113)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 31)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 19)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 60)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 91)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-1'], 59)
original graph map
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 74.050ms, rate sampling interval: 241ms
  Thread calibration: mean lat.: 75.255ms, rate sampling interval: 290ms
  Thread calibration: mean lat.: 94.037ms, rate sampling interval: 287ms
  Thread calibration: mean lat.: 93.449ms, rate sampling interval: 329ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    63.17ms   35.15ms 165.76ms   64.56%
    Req/Sec     2.30      2.96     8.00     92.78%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.50ms
 75.000%   93.44ms
 90.000%  115.78ms
 99.000%  148.10ms
 99.900%  163.97ms
 99.990%  165.89ms
 99.999%  165.89ms
100.000%  165.89ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.887     0.000000            1         1.00
      18.671     0.100000          171         1.11
      32.719     0.200000          340         1.25
      38.367     0.300000          510         1.43
      45.279     0.400000          679         1.67
      53.503     0.500000          849         2.00
      63.679     0.550000          933         2.22
      68.543     0.600000         1018         2.50
      75.455     0.650000         1103         2.86
      81.023     0.700000         1189         3.33
      93.439     0.750000         1272         4.00
      95.743     0.775000         1315         4.44
      98.623     0.800000         1357         5.00
     102.399     0.825000         1400         5.71
     104.447     0.850000         1443         6.67
     111.615     0.875000         1484         8.00
     113.983     0.887500         1508         8.89
     115.775     0.900000         1529        10.00
     117.375     0.912500         1548        11.43
     119.359     0.925000         1569        13.33
     120.575     0.937500         1590        16.00
     122.623     0.943750         1601        17.78
     123.775     0.950000         1612        20.00
     124.671     0.956250         1622        22.86
     126.207     0.962500         1634        26.67
     128.319     0.968750         1643        32.00
     130.559     0.971875         1649        35.56
     133.503     0.975000         1654        40.00
     135.935     0.978125         1660        45.71
     139.007     0.981250         1665        53.33
     143.743     0.984375         1670        64.00
     146.431     0.985938         1673        71.11
     147.071     0.987500         1675        80.00
     147.711     0.989062         1678        91.43
     148.351     0.990625         1683       106.67
     148.351     0.992188         1683       128.00
     149.631     0.992969         1685       142.22
     150.143     0.993750         1686       160.00
     150.271     0.994531         1688       182.86
     154.751     0.995313         1689       213.33
     156.287     0.996094         1690       256.00
     162.687     0.996484         1691       284.44
     162.687     0.996875         1691       320.00
     162.943     0.997266         1693       365.71
     162.943     0.997656         1693       426.67
     162.943     0.998047         1693       512.00
     163.967     0.998242         1694       568.89
     163.967     0.998437         1694       640.00
     163.967     0.998633         1694       731.43
     164.991     0.998828         1695       853.33
     164.991     0.999023         1695      1024.00
     164.991     0.999121         1695      1137.78
     164.991     0.999219         1695      1280.00
     164.991     0.999316         1695      1462.86
     165.887     0.999414         1696      1706.67
     165.887     1.000000         1696          inf
#[Mean    =       63.167, StdDeviation   =       35.149]
#[Max     =      165.760, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1801 requests in 3.00m, 26.34MB read
Requests/sec:     10.00
Transfer/sec:    149.81KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 147.140ms, rate sampling interval: 521ms
  Thread calibration: mean lat.: 145.066ms, rate sampling interval: 527ms
  Thread calibration: mean lat.: 150.966ms, rate sampling interval: 509ms
  Thread calibration: mean lat.: 128.134ms, rate sampling interval: 434ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   110.39ms   55.14ms 347.90ms   65.74%
    Req/Sec     4.25      1.43     9.00     87.32%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  106.18ms
 75.000%  144.90ms
 90.000%  185.73ms
 99.000%  262.91ms
 99.900%  316.67ms
 99.990%  348.16ms
 99.999%  348.16ms
100.000%  348.16ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.887     0.000000            1         1.00
      43.135     0.100000          340         1.11
      58.719     0.200000          681         1.25
      76.479     0.300000         1020         1.43
      92.735     0.400000         1363         1.67
     106.175     0.500000         1702         2.00
     111.807     0.550000         1871         2.22
     117.887     0.600000         2040         2.50
     126.271     0.650000         2210         2.86
     136.319     0.700000         2383         3.33
     144.895     0.750000         2553         4.00
     150.655     0.775000         2636         4.44
     157.183     0.800000         2723         5.00
     162.047     0.825000         2805         5.71
     173.567     0.850000         2890         6.67
     179.967     0.875000         2975         8.00
     183.167     0.887500         3019         8.89
     185.727     0.900000         3060        10.00
     188.415     0.912500         3105        11.43
     194.303     0.925000         3146        13.33
     198.527     0.937500         3188        16.00
     203.903     0.943750         3209        17.78
     211.455     0.950000         3230        20.00
     216.191     0.956250         3254        22.86
     217.983     0.962500         3275        26.67
     221.439     0.968750         3294        32.00
     223.359     0.971875         3305        35.56
     226.303     0.975000         3315        40.00
     230.271     0.978125         3326        45.71
     235.263     0.981250         3337        53.33
     243.455     0.984375         3347        64.00
     257.151     0.985938         3353        71.11
     259.711     0.987500         3358        80.00
     261.375     0.989062         3363        91.43
     264.447     0.990625         3369       106.67
     266.239     0.992188         3374       128.00
     267.263     0.992969         3377       142.22
     268.031     0.993750         3379       160.00
     269.055     0.994531         3382       182.86
     271.359     0.995313         3385       213.33
     279.295     0.996094         3387       256.00
     280.319     0.996484         3389       284.44
     281.599     0.996875         3390       320.00
     281.855     0.997266         3391       365.71
     284.927     0.997656         3393       426.67
     294.143     0.998047         3394       512.00
     307.455     0.998242         3395       568.89
     307.455     0.998437         3395       640.00
     308.735     0.998633         3396       731.43
     316.671     0.998828         3397       853.33
     316.671     0.999023         3397      1024.00
     316.927     0.999121         3398      1137.78
     316.927     0.999219         3398      1280.00
     316.927     0.999316         3398      1462.86
     323.839     0.999414         3399      1706.67
     323.839     0.999512         3399      2048.00
     323.839     0.999561         3399      2275.56
     323.839     0.999609         3399      2560.00
     323.839     0.999658         3399      2925.71
     348.159     0.999707         3400      3413.33
     348.159     1.000000         3400          inf
#[Mean    =      110.386, StdDeviation   =       55.141]
#[Max     =      347.904, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.48KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 31)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 41)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 19)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 60)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 100)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 69)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 38)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 27)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 48)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 41)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 58)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 77)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 36)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 77)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 81)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
original graph map
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 73.122ms, rate sampling interval: 238ms
  Thread calibration: mean lat.: 62.820ms, rate sampling interval: 270ms
  Thread calibration: mean lat.: 68.872ms, rate sampling interval: 282ms
  Thread calibration: mean lat.: 85.233ms, rate sampling interval: 296ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    58.99ms   33.71ms 156.54ms   62.88%
    Req/Sec     4.68      2.97     8.00     77.31%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.76ms
 75.000%   79.36ms
 90.000%  111.10ms
 99.000%  144.00ms
 99.900%  153.60ms
 99.990%  156.67ms
 99.999%  156.67ms
100.000%  156.67ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.319     0.000000            1         1.00
      15.783     0.100000          341         1.11
      25.855     0.200000          681         1.25
      37.791     0.300000         1021         1.43
      47.135     0.400000         1360         1.67
      53.759     0.500000         1704         2.00
      55.775     0.550000         1871         2.22
      59.487     0.600000         2040         2.50
      67.583     0.650000         2211         2.86
      75.007     0.700000         2386         3.33
      79.359     0.750000         2550         4.00
      83.007     0.775000         2635         4.44
      90.495     0.800000         2720         5.00
      94.335     0.825000         2806         5.71
      97.535     0.850000         2893         6.67
     101.055     0.875000         2975         8.00
     106.303     0.887500         3018         8.89
     111.103     0.900000         3060        10.00
     114.367     0.912500         3103        11.43
     117.695     0.925000         3145        13.33
     120.319     0.937500         3188        16.00
     121.663     0.943750         3210        17.78
     123.903     0.950000         3230        20.00
     125.375     0.956250         3252        22.86
     127.231     0.962500         3275        26.67
     129.407     0.968750         3294        32.00
     131.455     0.971875         3305        35.56
     133.887     0.975000         3317        40.00
     135.423     0.978125         3326        45.71
     136.575     0.981250         3337        53.33
     138.751     0.984375         3347        64.00
     140.543     0.985938         3353        71.11
     141.439     0.987500         3358        80.00
     143.615     0.989062         3363        91.43
     144.639     0.990625         3369       106.67
     146.431     0.992188         3375       128.00
     147.071     0.992969         3377       142.22
     147.199     0.993750         3379       160.00
     148.479     0.994531         3382       182.86
     148.863     0.995313         3385       213.33
     149.503     0.996094         3387       256.00
     150.015     0.996484         3389       284.44
     150.143     0.996875         3390       320.00
     150.783     0.997266         3391       365.71
     151.167     0.997656         3393       426.67
     151.295     0.998047         3394       512.00
     152.831     0.998242         3396       568.89
     152.831     0.998437         3396       640.00
     152.831     0.998633         3396       731.43
     153.599     0.998828         3397       853.33
     153.599     0.999023         3397      1024.00
     154.111     0.999121         3398      1137.78
     154.111     0.999219         3398      1280.00
     154.111     0.999316         3398      1462.86
     155.007     0.999414         3399      1706.67
     155.007     0.999512         3399      2048.00
     155.007     0.999561         3399      2275.56
     155.007     0.999609         3399      2560.00
     155.007     0.999658         3399      2925.71
     156.671     0.999707         3400      3413.33
     156.671     1.000000         3400          inf
#[Mean    =       58.987, StdDeviation   =       33.708]
#[Max     =      156.544, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3602 requests in 3.00m, 52.68MB read
Requests/sec:     20.01
Transfer/sec:    299.64KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 143.303ms, rate sampling interval: 457ms
  Thread calibration: mean lat.: 130.200ms, rate sampling interval: 520ms
  Thread calibration: mean lat.: 148.199ms, rate sampling interval: 584ms
  Thread calibration: mean lat.: 135.405ms, rate sampling interval: 477ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   111.85ms   52.97ms 357.63ms   67.77%
    Req/Sec     6.91      1.32    12.00     92.19%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  107.01ms
 75.000%  145.41ms
 90.000%  185.09ms
 99.000%  260.73ms
 99.900%  280.06ms
 99.990%  312.32ms
 99.999%  357.89ms
100.000%  357.89ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.839     0.000000            1         1.00
      47.263     0.100000          510         1.11
      63.199     0.200000         1020         1.25
      81.599     0.300000         1530         1.43
      93.439     0.400000         2043         1.67
     107.007     0.500000         2549         2.00
     112.191     0.550000         2806         2.22
     117.823     0.600000         3060         2.50
     127.551     0.650000         3316         2.86
     136.191     0.700000         3571         3.33
     145.407     0.750000         3824         4.00
     152.063     0.775000         3951         4.44
     156.159     0.800000         4082         5.00
     159.743     0.825000         4210         5.71
     165.759     0.850000         4335         6.67
     175.743     0.875000         4461         8.00
     180.735     0.887500         4527         8.89
     185.087     0.900000         4590        10.00
     189.439     0.912500         4652        11.43
     195.839     0.925000         4718        13.33
     199.551     0.937500         4781        16.00
     202.623     0.943750         4812        17.78
     207.871     0.950000         4844        20.00
     212.351     0.956250         4875        22.86
     218.751     0.962500         4907        26.67
     226.559     0.968750         4939        32.00
     229.631     0.971875         4955        35.56
     233.855     0.975000         4971        40.00
     237.567     0.978125         4988        45.71
     239.871     0.981250         5005        53.33
     243.967     0.984375         5019        64.00
     249.343     0.985938         5027        71.11
     257.791     0.987500         5036        80.00
     259.711     0.989062         5043        91.43
     261.247     0.990625         5051       106.67
     265.471     0.992188         5060       128.00
     266.751     0.992969         5064       142.22
     267.519     0.993750         5067       160.00
     269.567     0.994531         5071       182.86
     271.359     0.995313         5075       213.33
     272.639     0.996094         5079       256.00
     273.151     0.996484         5082       284.44
     273.407     0.996875         5083       320.00
     274.175     0.997266         5086       365.71
     274.431     0.997656         5087       426.67
     275.711     0.998047         5089       512.00
     276.479     0.998242         5090       568.89
     277.247     0.998437         5091       640.00
     277.759     0.998633         5092       731.43
     280.063     0.998828         5093       853.33
     280.575     0.999023         5095      1024.00
     280.575     0.999121         5095      1137.78
     280.575     0.999219         5095      1280.00
     280.575     0.999316         5095      1462.86
     283.647     0.999414         5096      1706.67
     283.647     0.999512         5096      2048.00
     283.647     0.999561         5096      2275.56
     312.319     0.999609         5097      2560.00
     312.319     0.999658         5097      2925.71
     312.319     0.999707         5097      3413.33
     312.319     0.999756         5097      4096.00
     312.319     0.999780         5097      4551.11
     357.887     0.999805         5098      5120.00
     357.887     1.000000         5098          inf
#[Mean    =      111.852, StdDeviation   =       52.966]
#[Max     =      357.632, Total count    =         5098]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.23KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 41)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-3'], 5)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 19)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 31)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 27)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 57)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 38)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 76)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 49)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 35)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 76)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 112)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 80)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 47)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 154)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 91)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 27)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 38)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 17)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 101)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 69)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-1'], 58)
filtered_path (['productpage-4', 'details-2'], 7)
original graph map
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 86.598ms, rate sampling interval: 270ms
  Thread calibration: mean lat.: 80.659ms, rate sampling interval: 242ms
  Thread calibration: mean lat.: 72.200ms, rate sampling interval: 253ms
  Thread calibration: mean lat.: 63.739ms, rate sampling interval: 225ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    65.99ms   34.15ms 163.97ms   63.23%
    Req/Sec     6.93      2.24    16.00     86.51%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   64.51ms
 75.000%   91.78ms
 90.000%  116.86ms
 99.000%  145.41ms
 99.900%  155.77ms
 99.990%  160.77ms
 99.999%  164.10ms
100.000%  164.10ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.911     0.000000            1         1.00
      23.135     0.100000          513         1.11
      34.527     0.200000         1020         1.25
      42.591     0.300000         1530         1.43
      50.239     0.400000         2042         1.67
      64.511     0.500000         2549         2.00
      69.247     0.550000         2803         2.22
      73.471     0.600000         3064         2.50
      76.607     0.650000         3315         2.86
      81.343     0.700000         3571         3.33
      91.775     0.750000         3824         4.00
      95.231     0.775000         3950         4.44
      99.135     0.800000         4078         5.00
     102.079     0.825000         4207         5.71
     107.967     0.850000         4332         6.67
     112.959     0.875000         4461         8.00
     115.135     0.887500         4524         8.89
     116.927     0.900000         4591        10.00
     118.783     0.912500         4653        11.43
     120.703     0.925000         4720        13.33
     122.687     0.937500         4778        16.00
     123.839     0.943750         4810        17.78
     125.055     0.950000         4842        20.00
     126.719     0.956250         4875        22.86
     128.767     0.962500         4906        26.67
     131.839     0.968750         4937        32.00
     133.631     0.971875         4953        35.56
     135.807     0.975000         4969        40.00
     137.855     0.978125         4985        45.71
     140.031     0.981250         5001        53.33
     141.823     0.984375         5019        64.00
     142.591     0.985938         5025        71.11
     143.487     0.987500         5034        80.00
     145.023     0.989062         5042        91.43
     145.791     0.990625         5049       106.67
     146.687     0.992188         5058       128.00
     146.943     0.992969         5062       142.22
     147.199     0.993750         5065       160.00
     147.967     0.994531         5069       182.86
     148.223     0.995313         5074       213.33
     149.247     0.996094         5077       256.00
     150.271     0.996484         5079       284.44
     150.783     0.996875         5081       320.00
     152.575     0.997266         5083       365.71
     153.087     0.997656         5085       426.67
     153.599     0.998047         5087       512.00
     154.367     0.998242         5088       568.89
     155.007     0.998437         5089       640.00
     155.647     0.998633         5090       731.43
     155.775     0.998828         5091       853.33
     155.903     0.999023         5092      1024.00
     155.903     0.999121         5092      1137.78
     157.695     0.999219         5093      1280.00
     157.695     0.999316         5093      1462.86
     159.743     0.999414         5094      1706.67
     159.743     0.999512         5094      2048.00
     159.743     0.999561         5094      2275.56
     160.767     0.999609         5095      2560.00
     160.767     0.999658         5095      2925.71
     160.767     0.999707         5095      3413.33
     160.767     0.999756         5095      4096.00
     160.767     0.999780         5095      4551.11
     164.095     0.999805         5096      5120.00
     164.095     1.000000         5096          inf
#[Mean    =       65.991, StdDeviation   =       34.149]
#[Max     =      163.968, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5401 requests in 3.00m, 78.99MB read
Requests/sec:     30.00
Transfer/sec:    449.30KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 154.879ms, rate sampling interval: 489ms
  Thread calibration: mean lat.: 125.671ms, rate sampling interval: 362ms
  Thread calibration: mean lat.: 198.849ms, rate sampling interval: 862ms
  Thread calibration: mean lat.: 181.820ms, rate sampling interval: 678ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   121.37ms   52.51ms 337.41ms   67.15%
    Req/Sec     9.70      1.62    16.00     94.14%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  115.84ms
 75.000%  157.18ms
 90.000%  193.02ms
 99.000%  259.84ms
 99.900%  306.43ms
 99.990%  311.81ms
 99.999%  337.66ms
100.000%  337.66ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.343     0.000000            1         1.00
      55.519     0.100000          682         1.11
      76.991     0.200000         1361         1.25
      90.815     0.300000         2041         1.43
     103.167     0.400000         2720         1.67
     115.839     0.500000         3404         2.00
     121.727     0.550000         3741         2.22
     129.471     0.600000         4080         2.50
     136.575     0.650000         4424         2.86
     145.535     0.700000         4760         3.33
     157.183     0.750000         5110         4.00
     160.511     0.775000         5271         4.44
     164.479     0.800000         5442         5.00
     171.391     0.825000         5612         5.71
     178.559     0.850000         5781         6.67
     185.087     0.875000         5950         8.00
     188.415     0.887500         6037         8.89
     193.023     0.900000         6120        10.00
     198.271     0.912500         6206        11.43
     203.007     0.925000         6293        13.33
     208.639     0.937500         6377        16.00
     211.327     0.943750         6418        17.78
     215.167     0.950000         6461        20.00
     220.671     0.956250         6504        22.86
     226.943     0.962500         6545        26.67
     230.271     0.968750         6588        32.00
     232.959     0.971875         6609        35.56
     235.903     0.975000         6631        40.00
     238.719     0.978125         6653        45.71
     241.535     0.981250         6673        53.33
     247.935     0.984375         6695        64.00
     253.439     0.985938         6705        71.11
     256.127     0.987500         6717        80.00
     258.431     0.989062         6727        91.43
     260.351     0.990625         6737       106.67
     263.167     0.992188         6747       128.00
     265.983     0.992969         6755       142.22
     266.495     0.993750         6763       160.00
     266.495     0.994531         6763       182.86
     269.055     0.995313         6769       213.33
     270.591     0.996094         6774       256.00
     273.407     0.996484         6777       284.44
     278.527     0.996875         6779       320.00
     280.831     0.997266         6782       365.71
     284.671     0.997656         6785       426.67
     291.327     0.998047         6787       512.00
     297.983     0.998242         6789       568.89
     300.031     0.998437         6790       640.00
     305.407     0.998633         6791       731.43
     306.431     0.998828         6793       853.33
     306.943     0.999023         6794      1024.00
     307.967     0.999121         6797      1137.78
     307.967     0.999219         6797      1280.00
     307.967     0.999316         6797      1462.86
     307.967     0.999414         6797      1706.67
     307.967     0.999512         6797      2048.00
     308.991     0.999561         6798      2275.56
     308.991     0.999609         6798      2560.00
     308.991     0.999658         6798      2925.71
     311.807     0.999707         6799      3413.33
     311.807     0.999756         6799      4096.00
     311.807     0.999780         6799      4551.11
     311.807     0.999805         6799      5120.00
     311.807     0.999829         6799      5851.43
     337.663     0.999854         6800      6826.67
     337.663     1.000000         6800          inf
#[Mean    =      121.366, StdDeviation   =       52.514]
#[Max     =      337.408, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     39.99
Transfer/sec:    598.96KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 69)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 38)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 27)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 28)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 46)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 34)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 75)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 56)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 75)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 31)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 19)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 60)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 41)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 60)
filtered_path (['productpage-5', 'details-3'], 6)
original graph map
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 58.625ms, rate sampling interval: 215ms
  Thread calibration: mean lat.: 67.454ms, rate sampling interval: 229ms
  Thread calibration: mean lat.: 68.814ms, rate sampling interval: 283ms
  Thread calibration: mean lat.: 69.895ms, rate sampling interval: 233ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    63.60ms   33.62ms 163.84ms   62.50%
    Req/Sec     9.54      2.76    18.00     85.53%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   57.18ms
 75.000%   86.85ms
 90.000%  112.83ms
 99.000%  143.74ms
 99.900%  158.72ms
 99.990%  163.58ms
 99.999%  163.97ms
100.000%  163.97ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.615     0.000000            1         1.00
      22.495     0.100000          684         1.11
      31.311     0.200000         1362         1.25
      42.079     0.300000         2042         1.43
      52.351     0.400000         2722         1.67
      57.183     0.500000         3400         2.00
      64.671     0.550000         3741         2.22
      70.975     0.600000         4086         2.50
      78.399     0.650000         4420         2.86
      82.303     0.700000         4763         3.33
      86.847     0.750000         5102         4.00
      92.671     0.775000         5274         4.44
      96.447     0.800000         5444         5.00
      98.687     0.825000         5610         5.71
     101.247     0.850000         5782         6.67
     104.767     0.875000         5950         8.00
     108.927     0.887500         6035         8.89
     112.831     0.900000         6121        10.00
     114.943     0.912500         6206        11.43
     118.271     0.925000         6292        13.33
     121.023     0.937500         6377        16.00
     122.623     0.943750         6420        17.78
     123.327     0.950000         6461        20.00
     124.543     0.956250         6504        22.86
     125.631     0.962500         6545        26.67
     127.039     0.968750         6589        32.00
     127.743     0.971875         6611        35.56
     128.383     0.975000         6632        40.00
     129.855     0.978125         6653        45.71
     131.455     0.981250         6673        53.33
     136.447     0.984375         6694        64.00
     141.055     0.985938         6705        71.11
     142.463     0.987500         6717        80.00
     143.359     0.989062         6726        91.43
     144.127     0.990625         6738       106.67
     144.767     0.992188         6748       128.00
     145.279     0.992969         6753       142.22
     145.535     0.993750         6758       160.00
     146.303     0.994531         6766       182.86
     146.687     0.995313         6769       213.33
     147.455     0.996094         6775       256.00
     149.119     0.996484         6777       284.44
     149.247     0.996875         6779       320.00
     149.887     0.997266         6782       365.71
     150.783     0.997656         6785       426.67
     153.471     0.998047         6787       512.00
     155.647     0.998242         6789       568.89
     156.287     0.998437         6790       640.00
     156.927     0.998633         6791       731.43
     158.719     0.998828         6793       853.33
     159.615     0.999023         6794      1024.00
     160.511     0.999121         6795      1137.78
     160.511     0.999219         6795      1280.00
     161.151     0.999316         6796      1462.86
     161.279     0.999414         6797      1706.67
     161.279     0.999512         6797      2048.00
     163.455     0.999561         6798      2275.56
     163.455     0.999609         6798      2560.00
     163.455     0.999658         6798      2925.71
     163.583     0.999707         6799      3413.33
     163.583     0.999756         6799      4096.00
     163.583     0.999780         6799      4551.11
     163.583     0.999805         6799      5120.00
     163.583     0.999829         6799      5851.43
     163.967     0.999854         6800      6826.67
     163.967     1.000000         6800          inf
#[Mean    =       63.600, StdDeviation   =       33.623]
#[Max     =      163.840, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.95KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 305.562ms, rate sampling interval: 1134ms
  Thread calibration: mean lat.: 166.432ms, rate sampling interval: 740ms
  Thread calibration: mean lat.: 192.754ms, rate sampling interval: 769ms
  Thread calibration: mean lat.: 125.725ms, rate sampling interval: 477ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   122.69ms   60.92ms 576.51ms   69.33%
    Req/Sec    12.06      1.33    16.00     97.07%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  113.92ms
 75.000%  158.85ms
 90.000%  199.04ms
 99.000%  300.80ms
 99.900%  375.30ms
 99.990%  566.27ms
 99.999%  577.02ms
100.000%  577.02ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.631     0.000000            1         1.00
      50.911     0.100000          852         1.11
      70.463     0.200000         1703         1.25
      86.975     0.300000         2552         1.43
     102.335     0.400000         3406         1.67
     113.919     0.500000         4254         2.00
     121.663     0.550000         4677         2.22
     131.327     0.600000         5102         2.50
     139.007     0.650000         5529         2.86
     149.759     0.700000         5954         3.33
     158.847     0.750000         6378         4.00
     164.223     0.775000         6593         4.44
     172.799     0.800000         6804         5.00
     178.431     0.825000         7017         5.71
     184.447     0.850000         7236         6.67
     190.335     0.875000         7441         8.00
     193.535     0.887500         7549         8.89
     199.039     0.900000         7653        10.00
     207.359     0.912500         7760        11.43
     215.551     0.925000         7866        13.33
     222.079     0.937500         7973        16.00
     227.455     0.943750         8027        17.78
     231.039     0.950000         8080        20.00
     235.391     0.956250         8131        22.86
     243.327     0.962500         8185        26.67
     254.847     0.968750         8238        32.00
     257.151     0.971875         8266        35.56
     259.583     0.975000         8291        40.00
     262.655     0.978125         8317        45.71
     269.055     0.981250         8347        53.33
     275.711     0.984375         8373        64.00
     280.831     0.985938         8384        71.11
     286.463     0.987500         8397        80.00
     295.423     0.989062         8410        91.43
     303.359     0.990625         8425       106.67
     311.551     0.992188         8437       128.00
     316.671     0.992969         8444       142.22
     322.559     0.993750         8450       160.00
     328.191     0.994531         8457       182.86
     333.311     0.995313         8464       213.33
     336.639     0.996094         8470       256.00
     340.991     0.996484         8474       284.44
     348.671     0.996875         8477       320.00
     353.535     0.997266         8480       365.71
     355.839     0.997656         8484       426.67
     363.007     0.998047         8487       512.00
     367.871     0.998242         8489       568.89
     368.127     0.998437         8490       640.00
     372.223     0.998633         8492       731.43
     375.295     0.998828         8494       853.33
     379.647     0.999023         8495      1024.00
     391.167     0.999121         8496      1137.78
     396.543     0.999219         8497      1280.00
     445.951     0.999316         8498      1462.86
     495.871     0.999414         8499      1706.67
     495.871     0.999512         8499      2048.00
     545.791     0.999561         8500      2275.56
     545.791     0.999609         8500      2560.00
     554.495     0.999658         8501      2925.71
     554.495     0.999707         8501      3413.33
     554.495     0.999756         8501      4096.00
     566.271     0.999780         8502      4551.11
     566.271     0.999805         8502      5120.00
     566.271     0.999829         8502      5851.43
     566.271     0.999854         8502      6826.67
     566.271     0.999878         8502      8192.00
     577.023     0.999890         8503      9102.22
     577.023     1.000000         8503          inf
#[Mean    =      122.695, StdDeviation   =       60.925]
#[Max     =      576.512, Total count    =         8503]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  8999 requests in 3.00m, 131.61MB read
Requests/sec:     49.99
Transfer/sec:    748.61KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 46)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 75)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 56)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 34)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 75)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 31)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 41)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 19)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 60)
filtered_path (['productpage-5', 'details-3'], 6)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-2'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-3'], 9)
original graph map
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 66.608ms, rate sampling interval: 240ms
  Thread calibration: mean lat.: 77.534ms, rate sampling interval: 247ms
  Thread calibration: mean lat.: 80.510ms, rate sampling interval: 265ms
  Thread calibration: mean lat.: 62.422ms, rate sampling interval: 231ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    65.98ms   34.56ms 195.07ms   65.68%
    Req/Sec    12.13      3.08    21.00     69.69%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   61.82ms
 75.000%   94.46ms
 90.000%  115.39ms
 99.000%  148.22ms
 99.900%  163.58ms
 99.990%  187.01ms
 99.999%  195.20ms
100.000%  195.20ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.455     0.000000            1         1.00
      23.471     0.100000          850         1.11
      34.687     0.200000         1700         1.25
      43.839     0.300000         2550         1.43
      53.535     0.400000         3402         1.67
      61.823     0.500000         4251         2.00
      66.047     0.550000         4675         2.22
      73.087     0.600000         5103         2.50
      78.271     0.650000         5527         2.86
      83.583     0.700000         5951         3.33
      94.463     0.750000         6378         4.00
      96.447     0.775000         6593         4.44
      99.327     0.800000         6802         5.00
     101.695     0.825000         7019         5.71
     103.487     0.850000         7228         6.67
     107.519     0.875000         7437         8.00
     113.279     0.887500         7544         8.89
     115.391     0.900000         7651        10.00
     117.503     0.912500         7757        11.43
     119.807     0.925000         7863        13.33
     122.047     0.937500         7968        16.00
     123.455     0.943750         8023        17.78
     124.863     0.950000         8076        20.00
     126.399     0.956250         8130        22.86
     128.639     0.962500         8183        26.67
     133.119     0.968750         8235        32.00
     140.287     0.971875         8261        35.56
     143.487     0.975000         8289        40.00
     145.023     0.978125         8314        45.71
     145.919     0.981250         8343        53.33
     146.687     0.984375         8367        64.00
     147.071     0.985938         8383        71.11
     147.455     0.987500         8393        80.00
     148.095     0.989062         8409        91.43
     148.479     0.990625         8421       106.67
     149.247     0.992188         8435       128.00
     149.759     0.992969         8442       142.22
     150.015     0.993750         8446       160.00
     150.655     0.994531         8455       182.86
     151.295     0.995313         8460       213.33
     153.343     0.996094         8466       256.00
     157.055     0.996484         8470       284.44
     157.951     0.996875         8473       320.00
     158.463     0.997266         8476       365.71
     159.487     0.997656         8480       426.67
     159.871     0.998047         8483       512.00
     160.383     0.998242         8486       568.89
     160.383     0.998437         8486       640.00
     161.407     0.998633         8488       731.43
     162.559     0.998828         8490       853.33
     163.583     0.999023         8491      1024.00
     164.479     0.999121         8492      1137.78
     164.863     0.999219         8493      1280.00
     166.783     0.999316         8494      1462.86
     167.167     0.999414         8495      1706.67
     167.167     0.999512         8495      2048.00
     169.599     0.999561         8496      2275.56
     169.599     0.999609         8496      2560.00
     175.743     0.999658         8497      2925.71
     175.743     0.999707         8497      3413.33
     175.743     0.999756         8497      4096.00
     187.007     0.999780         8498      4551.11
     187.007     0.999805         8498      5120.00
     187.007     0.999829         8498      5851.43
     187.007     0.999854         8498      6826.67
     187.007     0.999878         8498      8192.00
     195.199     0.999890         8499      9102.22
     195.199     1.000000         8499          inf
#[Mean    =       65.981, StdDeviation   =       34.560]
#[Max     =      195.072, Total count    =         8499]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9001 requests in 3.00m, 131.64MB read
Requests/sec:     50.00
Transfer/sec:    748.79KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 191.009ms, rate sampling interval: 754ms
  Thread calibration: mean lat.: 160.937ms, rate sampling interval: 526ms
  Thread calibration: mean lat.: 157.985ms, rate sampling interval: 451ms
  Thread calibration: mean lat.: 126.679ms, rate sampling interval: 428ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   111.81ms   51.57ms 393.22ms   69.16%
    Req/Sec     2.07      1.57     4.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  107.07ms
 75.000%  145.15ms
 90.000%  179.46ms
 99.000%  251.01ms
 99.900%  318.72ms
 99.990%  393.47ms
 99.999%  393.47ms
100.000%  393.47ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.143     0.000000            1         1.00
      48.351     0.100000          170         1.11
      66.303     0.200000          340         1.25
      81.535     0.300000          509         1.43
      94.207     0.400000          679         1.67
     107.071     0.500000          848         2.00
     113.215     0.550000          933         2.22
     118.975     0.600000         1018         2.50
     126.911     0.650000         1103         2.86
     135.807     0.700000         1188         3.33
     145.151     0.750000         1272         4.00
     150.271     0.775000         1318         4.44
     153.855     0.800000         1357         5.00
     157.567     0.825000         1400         5.71
     163.199     0.850000         1442         6.67
     172.415     0.875000         1484         8.00
     176.639     0.887500         1506         8.89
     179.839     0.900000         1527        10.00
     184.191     0.912500         1549        11.43
     188.543     0.925000         1569        13.33
     194.175     0.937500         1591        16.00
     197.119     0.943750         1601        17.78
     200.063     0.950000         1612        20.00
     206.207     0.956250         1622        22.86
     215.807     0.962500         1633        26.67
     219.903     0.968750         1643        32.00
     223.487     0.971875         1649        35.56
     225.407     0.975000         1654        40.00
     228.223     0.978125         1659        45.71
     234.623     0.981250         1665        53.33
     238.591     0.984375         1671        64.00
     240.255     0.985938         1673        71.11
     244.223     0.987500         1675        80.00
     249.727     0.989062         1678        91.43
     255.999     0.990625         1681       106.67
     259.327     0.992188         1683       128.00
     259.583     0.992969         1685       142.22
     261.119     0.993750         1686       160.00
     262.015     0.994531         1687       182.86
     274.175     0.995313         1689       213.33
     293.887     0.996094         1690       256.00
     309.759     0.996484         1691       284.44
     309.759     0.996875         1691       320.00
     312.575     0.997266         1692       365.71
     312.831     0.997656         1693       426.67
     312.831     0.998047         1693       512.00
     318.719     0.998242         1694       568.89
     318.719     0.998437         1694       640.00
     318.719     0.998633         1694       731.43
     334.847     0.998828         1695       853.33
     334.847     0.999023         1695      1024.00
     334.847     0.999121         1695      1137.78
     334.847     0.999219         1695      1280.00
     334.847     0.999316         1695      1462.86
     393.471     0.999414         1696      1706.67
     393.471     1.000000         1696          inf
#[Mean    =      111.814, StdDeviation   =       51.568]
#[Max     =      393.216, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-4'], 4)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-2'], 8)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-4'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-3'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-3'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 30)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 75)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 56)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 75)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 34)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 46)
filtered_path (['productpage-3', 'details-1'], 8)
original graph map
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 91.244ms, rate sampling interval: 232ms
  Thread calibration: mean lat.: 94.298ms, rate sampling interval: 261ms
  Thread calibration: mean lat.: 92.688ms, rate sampling interval: 307ms
  Thread calibration: mean lat.: 108.077ms, rate sampling interval: 375ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    77.07ms   34.85ms 186.50ms   64.62%
    Req/Sec     2.29      2.96     8.00     85.59%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   79.10ms
 75.000%  103.61ms
 90.000%  122.43ms
 99.000%  163.46ms
 99.900%  177.28ms
 99.990%  186.62ms
 99.999%  186.62ms
100.000%  186.62ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.503     0.000000            1         1.00
      37.791     0.100000          171         1.11
      42.463     0.200000          340         1.25
      48.639     0.300000          510         1.43
      60.991     0.400000          680         1.67
      79.103     0.500000          853         2.00
      81.343     0.550000          933         2.22
      84.095     0.600000         1020         2.50
      88.319     0.650000         1103         2.86
      92.927     0.700000         1188         3.33
     103.615     0.750000         1272         4.00
     106.815     0.775000         1315         4.44
     108.351     0.800000         1357         5.00
     110.271     0.825000         1401         5.71
     113.919     0.850000         1442         6.67
     118.911     0.875000         1484         8.00
     120.831     0.887500         1506         8.89
     122.431     0.900000         1527        10.00
     124.287     0.912500         1549        11.43
     126.271     0.925000         1569        13.33
     131.967     0.937500         1590        16.00
     139.263     0.943750         1601        17.78
     147.711     0.950000         1612        20.00
     150.527     0.956250         1625        22.86
     151.423     0.962500         1633        26.67
     152.575     0.968750         1645        32.00
     153.087     0.971875         1649        35.56
     154.879     0.975000         1654        40.00
     156.031     0.978125         1659        45.71
     157.567     0.981250         1665        53.33
     159.231     0.984375         1671        64.00
     161.791     0.985938         1673        71.11
     162.303     0.987500         1675        80.00
     163.327     0.989062         1678        91.43
     163.711     0.990625         1681       106.67
     164.607     0.992188         1683       128.00
     165.503     0.992969         1685       142.22
     167.807     0.993750         1686       160.00
     169.343     0.994531         1687       182.86
     169.727     0.995313         1689       213.33
     170.879     0.996094         1691       256.00
     170.879     0.996484         1691       284.44
     170.879     0.996875         1691       320.00
     171.263     0.997266         1692       365.71
     173.823     0.997656         1693       426.67
     173.823     0.998047         1693       512.00
     177.279     0.998242         1694       568.89
     177.279     0.998437         1694       640.00
     177.279     0.998633         1694       731.43
     184.831     0.998828         1695       853.33
     184.831     0.999023         1695      1024.00
     184.831     0.999121         1695      1137.78
     184.831     0.999219         1695      1280.00
     184.831     0.999316         1695      1462.86
     186.623     0.999414         1696      1706.67
     186.623     1.000000         1696          inf
#[Mean    =       77.070, StdDeviation   =       34.849]
#[Max     =      186.496, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.32MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 135.103ms, rate sampling interval: 397ms
  Thread calibration: mean lat.: 133.947ms, rate sampling interval: 466ms
  Thread calibration: mean lat.: 155.717ms, rate sampling interval: 637ms
  Thread calibration: mean lat.: 141.071ms, rate sampling interval: 459ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   108.40ms   54.74ms 359.42ms   67.88%
    Req/Sec     4.70      1.35    10.00     90.90%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  101.82ms
 75.000%  140.41ms
 90.000%  184.45ms
 99.000%  262.65ms
 99.900%  340.22ms
 99.990%  359.68ms
 99.999%  359.68ms
100.000%  359.68ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.999     0.000000            1         1.00
      40.479     0.100000          340         1.11
      59.487     0.200000          680         1.25
      75.519     0.300000         1021         1.43
      91.071     0.400000         1361         1.67
     101.823     0.500000         1701         2.00
     109.119     0.550000         1870         2.22
     113.727     0.600000         2040         2.50
     121.663     0.650000         2210         2.86
     134.783     0.700000         2380         3.33
     140.415     0.750000         2551         4.00
     145.663     0.775000         2635         4.44
     151.679     0.800000         2722         5.00
     158.591     0.825000         2807         5.71
     170.111     0.850000         2890         6.67
     178.815     0.875000         2977         8.00
     181.247     0.887500         3019         8.89
     184.447     0.900000         3060        10.00
     188.799     0.912500         3103        11.43
     191.359     0.925000         3147        13.33
     195.327     0.937500         3188        16.00
     201.727     0.943750         3209        17.78
     215.679     0.950000         3230        20.00
     217.727     0.956250         3252        22.86
     220.031     0.962500         3274        26.67
     222.207     0.968750         3294        32.00
     223.103     0.971875         3306        35.56
     224.639     0.975000         3315        40.00
     229.503     0.978125         3326        45.71
     236.287     0.981250         3337        53.33
     256.511     0.984375         3347        64.00
     259.071     0.985938         3353        71.11
     260.223     0.987500         3358        80.00
     261.631     0.989062         3363        91.43
     262.911     0.990625         3370       106.67
     264.447     0.992188         3374       128.00
     264.959     0.992969         3378       142.22
     265.215     0.993750         3379       160.00
     266.239     0.994531         3382       182.86
     267.007     0.995313         3386       213.33
     268.799     0.996094         3387       256.00
     269.567     0.996484         3389       284.44
     270.591     0.996875         3390       320.00
     276.223     0.997266         3391       365.71
     279.039     0.997656         3393       426.67
     279.551     0.998047         3394       512.00
     282.623     0.998242         3395       568.89
     282.623     0.998437         3395       640.00
     305.919     0.998633         3396       731.43
     340.223     0.998828         3397       853.33
     340.223     0.999023         3397      1024.00
     351.743     0.999121         3398      1137.78
     351.743     0.999219         3398      1280.00
     351.743     0.999316         3398      1462.86
     353.791     0.999414         3399      1706.67
     353.791     0.999512         3399      2048.00
     353.791     0.999561         3399      2275.56
     353.791     0.999609         3399      2560.00
     353.791     0.999658         3399      2925.71
     359.679     0.999707         3400      3413.33
     359.679     1.000000         3400          inf
#[Mean    =      108.405, StdDeviation   =       54.745]
#[Max     =      359.424, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.47KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'details-4'], 6)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 68)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-2'], 8)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 28)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 75)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 34)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 46)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 75)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 56)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 92)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-3'], 8)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 79)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 30)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-3'], 6)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
original graph map
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 58.693ms, rate sampling interval: 247ms
  Thread calibration: mean lat.: 67.431ms, rate sampling interval: 238ms
  Thread calibration: mean lat.: 70.530ms, rate sampling interval: 252ms
  Thread calibration: mean lat.: 71.348ms, rate sampling interval: 279ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    59.60ms   33.29ms 189.95ms   65.00%
    Req/Sec     4.71      3.27     8.00     72.82%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.82ms
 75.000%   79.93ms
 90.000%  108.35ms
 99.000%  146.05ms
 99.900%  159.49ms
 99.990%  190.08ms
 99.999%  190.08ms
100.000%  190.08ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.735     0.000000            1         1.00
      18.607     0.100000          340         1.11
      29.119     0.200000          680         1.25
      36.159     0.300000         1021         1.43
      45.855     0.400000         1360         1.67
      53.823     0.500000         1701         2.00
      61.503     0.550000         1871         2.22
      67.135     0.600000         2040         2.50
      71.231     0.650000         2210         2.86
      75.711     0.700000         2384         3.33
      79.935     0.750000         2550         4.00
      83.455     0.775000         2636         4.44
      90.239     0.800000         2720         5.00
      93.631     0.825000         2805         5.71
      97.663     0.850000         2894         6.67
     100.095     0.875000         2976         8.00
     102.847     0.887500         3018         8.89
     108.351     0.900000         3060        10.00
     112.447     0.912500         3105        11.43
     114.111     0.925000         3145        13.33
     115.519     0.937500         3189        16.00
     117.439     0.943750         3210        17.78
     118.911     0.950000         3230        20.00
     120.575     0.956250         3252        22.86
     123.327     0.962500         3273        26.67
     126.719     0.968750         3294        32.00
     128.895     0.971875         3305        35.56
     133.631     0.975000         3315        40.00
     138.239     0.978125         3326        45.71
     140.799     0.981250         3337        53.33
     142.975     0.984375         3347        64.00
     144.127     0.985938         3353        71.11
     145.151     0.987500         3359        80.00
     145.663     0.989062         3363        91.43
     146.303     0.990625         3369       106.67
     147.455     0.992188         3374       128.00
     148.351     0.992969         3377       142.22
     148.863     0.993750         3379       160.00
     149.759     0.994531         3382       182.86
     151.807     0.995313         3385       213.33
     153.215     0.996094         3387       256.00
     155.135     0.996484         3389       284.44
     155.391     0.996875         3390       320.00
     155.519     0.997266         3392       365.71
     156.031     0.997656         3393       426.67
     156.927     0.998047         3395       512.00
     156.927     0.998242         3395       568.89
     156.927     0.998437         3395       640.00
     158.335     0.998633         3396       731.43
     159.487     0.998828         3397       853.33
     159.487     0.999023         3397      1024.00
     160.127     0.999121         3398      1137.78
     160.127     0.999219         3398      1280.00
     160.127     0.999316         3398      1462.86
     184.959     0.999414         3399      1706.67
     184.959     0.999512         3399      2048.00
     184.959     0.999561         3399      2275.56
     184.959     0.999609         3399      2560.00
     184.959     0.999658         3399      2925.71
     190.079     0.999707         3400      3413.33
     190.079     1.000000         3400          inf
#[Mean    =       59.604, StdDeviation   =       33.290]
#[Max     =      189.952, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.47KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 152.284ms, rate sampling interval: 525ms
  Thread calibration: mean lat.: 162.745ms, rate sampling interval: 587ms
  Thread calibration: mean lat.: 106.126ms, rate sampling interval: 322ms
  Thread calibration: mean lat.: 179.931ms, rate sampling interval: 726ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   124.43ms   53.19ms 327.94ms   66.73%
    Req/Sec     7.03      1.59    12.00     93.88%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  117.76ms
 75.000%  161.02ms
 90.000%  199.55ms
 99.000%  263.42ms
 99.900%  315.14ms
 99.990%  324.86ms
 99.999%  328.19ms
100.000%  328.19ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.791     0.000000            1         1.00
      57.791     0.100000          510         1.11
      78.463     0.200000         1020         1.25
      93.183     0.300000         1531         1.43
     105.215     0.400000         2041         1.67
     117.759     0.500000         2554         2.00
     124.159     0.550000         2806         2.22
     132.479     0.600000         3064         2.50
     139.903     0.650000         3314         2.86
     152.703     0.700000         3570         3.33
     161.023     0.750000         3825         4.00
     164.223     0.775000         3956         4.44
     168.703     0.800000         4079         5.00
     175.103     0.825000         4206         5.71
     183.807     0.850000         4335         6.67
     190.079     0.875000         4462         8.00
     194.047     0.887500         4525         8.89
     199.551     0.900000         4591        10.00
     202.495     0.912500         4654        11.43
     205.567     0.925000         4720        13.33
     210.431     0.937500         4782        16.00
     214.399     0.943750         4814        17.78
     217.599     0.950000         4844        20.00
     222.975     0.956250         4875        22.86
     228.991     0.962500         4909        26.67
     232.191     0.968750         4939        32.00
     234.495     0.971875         4955        35.56
     237.695     0.975000         4971        40.00
     240.767     0.978125         4987        45.71
     244.351     0.981250         5003        53.33
     248.319     0.984375         5021        64.00
     249.855     0.985938         5027        71.11
     254.591     0.987500         5036        80.00
     261.247     0.989062         5043        91.43
     269.311     0.990625         5051       106.67
     272.127     0.992188         5059       128.00
     274.687     0.992969         5064       142.22
     275.711     0.993750         5067       160.00
     278.015     0.994531         5071       182.86
     279.295     0.995313         5075       213.33
     283.135     0.996094         5079       256.00
     283.391     0.996484         5081       284.44
     284.415     0.996875         5083       320.00
     285.183     0.997266         5085       365.71
     285.695     0.997656         5087       426.67
     287.999     0.998047         5089       512.00
     309.759     0.998242         5090       568.89
     312.831     0.998437         5091       640.00
     314.623     0.998633         5092       731.43
     315.135     0.998828         5093       853.33
     317.183     0.999023         5094      1024.00
     317.183     0.999121         5094      1137.78
     318.207     0.999219         5095      1280.00
     318.207     0.999316         5095      1462.86
     318.719     0.999414         5096      1706.67
     318.719     0.999512         5096      2048.00
     318.719     0.999561         5096      2275.56
     324.863     0.999609         5097      2560.00
     324.863     0.999658         5097      2925.71
     324.863     0.999707         5097      3413.33
     324.863     0.999756         5097      4096.00
     324.863     0.999780         5097      4551.11
     328.191     0.999805         5098      5120.00
     328.191     1.000000         5098          inf
#[Mean    =      124.434, StdDeviation   =       53.188]
#[Max     =      327.936, Total count    =         5098]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.23KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'details-3'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-4'], 15)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 34)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 45)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-5', 'details-3'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 30)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 63)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
original graph map
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 77.017ms, rate sampling interval: 257ms
  Thread calibration: mean lat.: 51.406ms, rate sampling interval: 193ms
  Thread calibration: mean lat.: 69.323ms, rate sampling interval: 252ms
  Thread calibration: mean lat.: 82.927ms, rate sampling interval: 237ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.63ms   35.44ms 225.79ms   59.99%
    Req/Sec     6.94      2.68    16.00     84.89%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   55.62ms
 75.000%   94.91ms
 90.000%  112.13ms
 99.000%  147.97ms
 99.900%  162.82ms
 99.990%  166.14ms
 99.999%  225.92ms
100.000%  225.92ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.119     0.000000            1         1.00
      22.159     0.100000          510         1.11
      27.487     0.200000         1020         1.25
      35.679     0.300000         1530         1.43
      51.519     0.400000         2040         1.67
      55.615     0.500000         2550         2.00
      60.031     0.550000         2803         2.22
      68.671     0.600000         3058         2.50
      74.239     0.650000         3314         2.86
      83.135     0.700000         3568         3.33
      94.911     0.750000         3823         4.00
      96.703     0.775000         3950         4.44
      98.303     0.800000         4079         5.00
      99.775     0.825000         4212         5.71
     101.887     0.850000         4335         6.67
     108.095     0.875000         4460         8.00
     110.463     0.887500         4526         8.89
     112.127     0.900000         4587        10.00
     113.599     0.912500         4651        11.43
     115.455     0.925000         4715        13.33
     118.015     0.937500         4779        16.00
     119.551     0.943750         4810        17.78
     121.919     0.950000         4844        20.00
     125.119     0.956250         4875        22.86
     127.551     0.962500         4905        26.67
     132.095     0.968750         4937        32.00
     133.887     0.971875         4953        35.56
     136.575     0.975000         4970        40.00
     140.287     0.978125         4985        45.71
     142.847     0.981250         5001        53.33
     144.895     0.984375         5017        64.00
     145.919     0.985938         5027        71.11
     146.431     0.987500         5034        80.00
     147.327     0.989062         5041        91.43
     148.095     0.990625         5049       106.67
     149.631     0.992188         5057       128.00
     149.887     0.992969         5061       142.22
     151.295     0.993750         5065       160.00
     152.575     0.994531         5069       182.86
     153.215     0.995313         5074       213.33
     154.751     0.996094         5078       256.00
     155.647     0.996484         5079       284.44
     156.159     0.996875         5081       320.00
     156.671     0.997266         5083       365.71
     157.567     0.997656         5085       426.67
     159.487     0.998047         5088       512.00
     159.487     0.998242         5088       568.89
     160.127     0.998437         5089       640.00
     162.687     0.998633         5090       731.43
     162.815     0.998828         5091       853.33
     162.943     0.999023         5092      1024.00
     162.943     0.999121         5092      1137.78
     163.583     0.999219         5093      1280.00
     163.583     0.999316         5093      1462.86
     163.711     0.999414         5094      1706.67
     163.711     0.999512         5094      2048.00
     163.711     0.999561         5094      2275.56
     166.143     0.999609         5095      2560.00
     166.143     0.999658         5095      2925.71
     166.143     0.999707         5095      3413.33
     166.143     0.999756         5095      4096.00
     166.143     0.999780         5095      4551.11
     225.919     0.999805         5096      5120.00
     225.919     1.000000         5096          inf
#[Mean    =       62.627, StdDeviation   =       35.444]
#[Max     =      225.792, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.97MB read
Requests/sec:     30.00
Transfer/sec:    449.22KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 137.298ms, rate sampling interval: 668ms
  Thread calibration: mean lat.: 160.023ms, rate sampling interval: 470ms
  Thread calibration: mean lat.: 134.472ms, rate sampling interval: 473ms
  Thread calibration: mean lat.: 165.735ms, rate sampling interval: 546ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   118.92ms   55.31ms 448.51ms   65.87%
    Req/Sec     9.43      1.45    14.00     87.94%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  113.02ms
 75.000%  156.03ms
 90.000%  192.26ms
 99.000%  261.50ms
 99.900%  348.93ms
 99.990%  428.54ms
 99.999%  448.77ms
100.000%  448.77ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.591     0.000000            1         1.00
      49.343     0.100000          681         1.11
      69.567     0.200000         1361         1.25
      88.127     0.300000         2041         1.43
     100.607     0.400000         2722         1.67
     113.023     0.500000         3404         2.00
     118.911     0.550000         3741         2.22
     127.359     0.600000         4081         2.50
     136.447     0.650000         4425         2.86
     146.175     0.700000         4766         3.33
     156.031     0.750000         5102         4.00
     159.487     0.775000         5271         4.44
     166.143     0.800000         5443         5.00
     173.055     0.825000         5612         5.71
     179.711     0.850000         5781         6.67
     185.343     0.875000         5952         8.00
     187.903     0.887500         6037         8.89
     192.255     0.900000         6121        10.00
     196.095     0.912500         6206        11.43
     200.319     0.925000         6292        13.33
     206.463     0.937500         6376        16.00
     210.815     0.943750         6420        17.78
     215.039     0.950000         6461        20.00
     220.159     0.956250         6504        22.86
     224.255     0.962500         6546        26.67
     229.119     0.968750         6591        32.00
     231.551     0.971875         6611        35.56
     234.111     0.975000         6631        40.00
     236.543     0.978125         6654        45.71
     240.639     0.981250         6674        53.33
     254.079     0.984375         6695        64.00
     256.511     0.985938         6706        71.11
     257.535     0.987500         6716        80.00
     260.223     0.989062         6727        91.43
     262.911     0.990625         6739       106.67
     265.471     0.992188         6749       128.00
     267.519     0.992969         6754       142.22
     273.663     0.993750         6759       160.00
     275.199     0.994531         6764       182.86
     279.551     0.995313         6770       213.33
     281.087     0.996094         6775       256.00
     291.071     0.996484         6778       284.44
     293.631     0.996875         6780       320.00
     304.127     0.997266         6783       365.71
     306.687     0.997656         6786       426.67
     309.503     0.998047         6788       512.00
     316.415     0.998242         6790       568.89
     324.351     0.998437         6791       640.00
     334.079     0.998633         6792       731.43
     348.927     0.998828         6794       853.33
     354.047     0.999023         6795      1024.00
     354.815     0.999121         6796      1137.78
     354.815     0.999219         6796      1280.00
     403.199     0.999316         6797      1462.86
     424.191     0.999414         6798      1706.67
     424.191     0.999512         6798      2048.00
     427.007     0.999561         6799      2275.56
     427.007     0.999609         6799      2560.00
     427.007     0.999658         6799      2925.71
     428.543     0.999707         6800      3413.33
     428.543     0.999756         6800      4096.00
     428.543     0.999780         6800      4551.11
     428.543     0.999805         6800      5120.00
     428.543     0.999829         6800      5851.43
     448.767     0.999854         6801      6826.67
     448.767     1.000000         6801          inf
#[Mean    =      118.921, StdDeviation   =       55.308]
#[Max     =      448.512, Total count    =         6801]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.98KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-3', 'details-4'], 71)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-3'], 6)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-1'], 6)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-3'], 8)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 15)
original graph map
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 86.085ms, rate sampling interval: 286ms
  Thread calibration: mean lat.: 82.959ms, rate sampling interval: 258ms
  Thread calibration: mean lat.: 82.037ms, rate sampling interval: 279ms
  Thread calibration: mean lat.: 98.262ms, rate sampling interval: 263ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    79.25ms   34.85ms 187.14ms   63.57%
    Req/Sec     9.45      2.76    15.00     86.36%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   81.21ms
 75.000%  105.02ms
 90.000%  123.20ms
 99.000%  151.55ms
 99.900%  166.27ms
 99.990%  184.19ms
 99.999%  187.26ms
100.000%  187.26ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.863     0.000000            1         1.00
      31.663     0.100000          680         1.11
      46.463     0.200000         1362         1.25
      55.743     0.300000         2042         1.43
      71.487     0.400000         2722         1.67
      81.215     0.500000         3403         2.00
      85.695     0.550000         3740         2.22
      92.799     0.600000         4082         2.50
      97.599     0.650000         4424         2.86
     101.055     0.700000         4768         3.33
     105.023     0.750000         5101         4.00
     107.647     0.775000         5272         4.44
     111.423     0.800000         5440         5.00
     114.495     0.825000         5619         5.71
     117.311     0.850000         5780         6.67
     120.383     0.875000         5954         8.00
     121.727     0.887500         6039         8.89
     123.199     0.900000         6126        10.00
     124.735     0.912500         6205        11.43
     126.527     0.925000         6291        13.33
     129.215     0.937500         6375        16.00
     131.007     0.943750         6418        17.78
     133.247     0.950000         6460        20.00
     135.167     0.956250         6505        22.86
     137.471     0.962500         6548        26.67
     139.647     0.968750         6589        32.00
     140.927     0.971875         6613        35.56
     142.335     0.975000         6630        40.00
     143.615     0.978125         6657        45.71
     145.023     0.981250         6673        53.33
     146.175     0.984375         6695        64.00
     147.199     0.985938         6705        71.11
     148.223     0.987500         6715        80.00
     149.759     0.989062         6726        91.43
     153.599     0.990625         6737       106.67
     156.159     0.992188         6748       128.00
     157.439     0.992969         6754       142.22
     158.207     0.993750         6759       160.00
     159.615     0.994531         6764       182.86
     160.383     0.995313         6770       213.33
     161.151     0.996094         6775       256.00
     161.407     0.996484         6777       284.44
     161.919     0.996875         6780       320.00
     162.047     0.997266         6782       365.71
     162.687     0.997656         6785       426.67
     163.711     0.998047         6787       512.00
     165.247     0.998242         6789       568.89
     165.631     0.998437         6790       640.00
     166.015     0.998633         6791       731.43
     166.271     0.998828         6793       853.33
     166.655     0.999023         6794      1024.00
     168.319     0.999121         6795      1137.78
     168.319     0.999219         6795      1280.00
     168.575     0.999316         6796      1462.86
     171.007     0.999414         6797      1706.67
     171.007     0.999512         6797      2048.00
     181.887     0.999561         6798      2275.56
     181.887     0.999609         6798      2560.00
     181.887     0.999658         6798      2925.71
     184.191     0.999707         6799      3413.33
     184.191     0.999756         6799      4096.00
     184.191     0.999780         6799      4551.11
     184.191     0.999805         6799      5120.00
     184.191     0.999829         6799      5851.43
     187.263     0.999854         6800      6826.67
     187.263     1.000000         6800          inf
#[Mean    =       79.252, StdDeviation   =       34.847]
#[Max     =      187.136, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.96KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 312.574ms, rate sampling interval: 1403ms
  Thread calibration: mean lat.: 263.997ms, rate sampling interval: 1249ms
  Thread calibration: mean lat.: 122.036ms, rate sampling interval: 354ms
  Thread calibration: mean lat.: 120.444ms, rate sampling interval: 410ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   120.67ms   56.37ms 417.28ms   70.16%
    Req/Sec    12.09      1.88    17.00     83.15%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  111.74ms
 75.000%  154.11ms
 90.000%  194.43ms
 99.000%  286.98ms
 99.900%  361.47ms
 99.990%  409.09ms
 99.999%  417.54ms
100.000%  417.54ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.231     0.000000            1         1.00
      55.743     0.100000          850         1.11
      74.303     0.200000         1703         1.25
      86.399     0.300000         2553         1.43
      98.879     0.400000         3401         1.67
     111.743     0.500000         4251         2.00
     118.143     0.550000         4675         2.22
     124.671     0.600000         5100         2.50
     134.527     0.650000         5531         2.86
     144.255     0.700000         5955         3.33
     154.111     0.750000         6382         4.00
     158.463     0.775000         6591         4.44
     164.863     0.800000         6802         5.00
     171.903     0.825000         7012         5.71
     179.071     0.850000         7229         6.67
     186.239     0.875000         7437         8.00
     190.079     0.887500         7547         8.89
     194.431     0.900000         7650        10.00
     200.319     0.912500         7759        11.43
     207.999     0.925000         7864        13.33
     217.215     0.937500         7968        16.00
     220.287     0.943750         8022        17.78
     225.663     0.950000         8075        20.00
     230.783     0.956250         8128        22.86
     237.823     0.962500         8182        26.67
     246.655     0.968750         8235        32.00
     251.775     0.971875         8260        35.56
     257.279     0.975000         8287        40.00
     260.351     0.978125         8314        45.71
     263.679     0.981250         8343        53.33
     270.591     0.984375         8368        64.00
     273.663     0.985938         8380        71.11
     277.247     0.987500         8394        80.00
     284.415     0.989062         8407        91.43
     288.767     0.990625         8420       106.67
     298.239     0.992188         8433       128.00
     302.079     0.992969         8440       142.22
     304.127     0.993750         8446       160.00
     306.943     0.994531         8453       182.86
     312.831     0.995313         8460       213.33
     317.439     0.996094         8466       256.00
     319.999     0.996484         8470       284.44
     325.375     0.996875         8473       320.00
     327.167     0.997266         8476       365.71
     334.335     0.997656         8480       426.67
     335.615     0.998047         8483       512.00
     342.271     0.998242         8485       568.89
     345.343     0.998437         8486       640.00
     348.159     0.998633         8488       731.43
     357.887     0.998828         8490       853.33
     361.471     0.999023         8491      1024.00
     364.031     0.999121         8492      1137.78
     365.823     0.999219         8493      1280.00
     371.199     0.999316         8494      1462.86
     372.479     0.999414         8495      1706.67
     372.479     0.999512         8495      2048.00
     376.319     0.999561         8496      2275.56
     376.319     0.999609         8496      2560.00
     384.255     0.999658         8497      2925.71
     384.255     0.999707         8497      3413.33
     384.255     0.999756         8497      4096.00
     409.087     0.999780         8498      4551.11
     409.087     0.999805         8498      5120.00
     409.087     0.999829         8498      5851.43
     409.087     0.999854         8498      6826.67
     409.087     0.999878         8498      8192.00
     417.535     0.999890         8499      9102.22
     417.535     1.000000         8499          inf
#[Mean    =      120.666, StdDeviation   =       56.375]
#[Max     =      417.280, Total count    =         8499]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.63MB read
Requests/sec:     49.99
Transfer/sec:    748.71KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-3'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-1'], 7)
original graph map
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 76.760ms, rate sampling interval: 249ms
  Thread calibration: mean lat.: 97.032ms, rate sampling interval: 275ms
  Thread calibration: mean lat.: 81.992ms, rate sampling interval: 227ms
  Thread calibration: mean lat.: 82.617ms, rate sampling interval: 274ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    80.22ms   30.38ms 223.23ms   65.15%
    Req/Sec    12.04      2.95    21.00     64.04%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   79.23ms
 75.000%  100.80ms
 90.000%  118.59ms
 99.000%  152.45ms
 99.900%  172.03ms
 99.990%  193.92ms
 99.999%  223.36ms
100.000%  223.36ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      11.127     0.000000            1         1.00
      37.119     0.100000          851         1.11
      50.943     0.200000         1700         1.25
      64.831     0.300000         2552         1.43
      70.911     0.400000         3407         1.67
      79.231     0.500000         4256         2.00
      83.647     0.550000         4680         2.22
      88.191     0.600000         5105         2.50
      92.223     0.650000         5531         2.86
      97.151     0.700000         5956         3.33
     100.799     0.750000         6379         4.00
     103.487     0.775000         6588         4.44
     106.367     0.800000         6800         5.00
     109.183     0.825000         7012         5.71
     111.871     0.850000         7227         6.67
     114.751     0.875000         7445         8.00
     116.351     0.887500         7543         8.89
     118.591     0.900000         7651        10.00
     121.151     0.912500         7756        11.43
     124.415     0.925000         7864        13.33
     128.511     0.937500         7969        16.00
     131.327     0.943750         8021        17.78
     133.759     0.950000         8079        20.00
     137.599     0.956250         8128        22.86
     140.543     0.962500         8182        26.67
     142.463     0.968750         8235        32.00
     143.615     0.971875         8261        35.56
     144.895     0.975000         8287        40.00
     146.303     0.978125         8320        45.71
     147.327     0.981250         8342        53.33
     149.247     0.984375         8368        64.00
     149.887     0.985938         8380        71.11
     150.783     0.987500         8393        80.00
     151.807     0.989062         8407        91.43
     152.959     0.990625         8420       106.67
     154.623     0.992188         8434       128.00
     155.263     0.992969         8443       142.22
     155.647     0.993750         8446       160.00
     157.183     0.994531         8453       182.86
     158.207     0.995313         8460       213.33
     159.103     0.996094         8466       256.00
     159.615     0.996484         8470       284.44
     160.255     0.996875         8473       320.00
     161.663     0.997266         8476       365.71
     162.559     0.997656         8480       426.67
     163.327     0.998047         8483       512.00
     166.271     0.998242         8485       568.89
     167.423     0.998437         8486       640.00
     167.807     0.998633         8488       731.43
     168.703     0.998828         8490       853.33
     172.031     0.999023         8491      1024.00
     173.567     0.999121         8492      1137.78
     173.695     0.999219         8493      1280.00
     173.951     0.999316         8494      1462.86
     179.583     0.999414         8495      1706.67
     179.583     0.999512         8495      2048.00
     183.295     0.999561         8496      2275.56
     183.295     0.999609         8496      2560.00
     184.575     0.999658         8497      2925.71
     184.575     0.999707         8497      3413.33
     184.575     0.999756         8497      4096.00
     193.919     0.999780         8498      4551.11
     193.919     0.999805         8498      5120.00
     193.919     0.999829         8498      5851.43
     193.919     0.999854         8498      6826.67
     193.919     0.999878         8498      8192.00
     223.359     0.999890         8499      9102.22
     223.359     1.000000         8499          inf
#[Mean    =       80.218, StdDeviation   =       30.383]
#[Max     =      223.232, Total count    =         8499]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.62MB read
Requests/sec:     49.99
Transfer/sec:    748.69KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 172.776ms, rate sampling interval: 519ms
  Thread calibration: mean lat.: 211.174ms, rate sampling interval: 696ms
  Thread calibration: mean lat.: 161.537ms, rate sampling interval: 544ms
  Thread calibration: mean lat.: 137.868ms, rate sampling interval: 472ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   114.37ms   57.32ms 394.24ms   65.04%
    Req/Sec     2.00      1.38     4.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  107.90ms
 75.000%  149.76ms
 90.000%  189.31ms
 99.000%  264.96ms
 99.900%  385.28ms
 99.990%  394.49ms
 99.999%  394.49ms
100.000%  394.49ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.831     0.000000            1         1.00
      45.343     0.100000          171         1.11
      62.751     0.200000          340         1.25
      79.871     0.300000          511         1.43
      95.103     0.400000          679         1.67
     107.903     0.500000          849         2.00
     112.831     0.550000          933         2.22
     121.343     0.600000         1018         2.50
     133.503     0.650000         1103         2.86
     139.007     0.700000         1188         3.33
     149.759     0.750000         1273         4.00
     155.519     0.775000         1316         4.44
     163.839     0.800000         1357         5.00
     171.519     0.825000         1400         5.71
     178.175     0.850000         1442         6.67
     185.599     0.875000         1484         8.00
     187.903     0.887500         1508         8.89
     189.311     0.900000         1527        10.00
     191.615     0.912500         1548        11.43
     196.607     0.925000         1569        13.33
     207.999     0.937500         1590        16.00
     216.191     0.943750         1601        17.78
     217.855     0.950000         1612        20.00
     219.903     0.956250         1622        22.86
     221.567     0.962500         1633        26.67
     228.607     0.968750         1643        32.00
     232.191     0.971875         1650        35.56
     235.903     0.975000         1654        40.00
     241.663     0.978125         1659        45.71
     256.895     0.981250         1665        53.33
     260.735     0.984375         1671        64.00
     261.887     0.985938         1673        71.11
     262.015     0.987500         1675        80.00
     264.447     0.989062         1678        91.43
     265.727     0.990625         1681       106.67
     267.263     0.992188         1683       128.00
     270.335     0.992969         1685       142.22
     275.711     0.993750         1686       160.00
     276.223     0.994531         1687       182.86
     280.319     0.995313         1689       213.33
     286.975     0.996094         1690       256.00
     309.759     0.996484         1691       284.44
     309.759     0.996875         1691       320.00
     357.631     0.997266         1692       365.71
     368.895     0.997656         1693       426.67
     368.895     0.998047         1693       512.00
     385.279     0.998242         1694       568.89
     385.279     0.998437         1694       640.00
     385.279     0.998633         1694       731.43
     388.607     0.998828         1695       853.33
     388.607     0.999023         1695      1024.00
     388.607     0.999121         1695      1137.78
     388.607     0.999219         1695      1280.00
     388.607     0.999316         1695      1462.86
     394.495     0.999414         1696      1706.67
     394.495     1.000000         1696          inf
#[Mean    =      114.365, StdDeviation   =       57.324]
#[Max     =      394.240, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 28)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 37)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 49)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 60)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-1'], 7)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
original graph map
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 71.118ms, rate sampling interval: 276ms
  Thread calibration: mean lat.: 67.653ms, rate sampling interval: 316ms
  Thread calibration: mean lat.: 87.159ms, rate sampling interval: 257ms
  Thread calibration: mean lat.: 93.658ms, rate sampling interval: 357ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    61.72ms   34.93ms 185.47ms   62.91%
    Req/Sec     2.28      2.89     7.00     84.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.18ms
 75.000%   85.95ms
 90.000%  114.69ms
 99.000%  145.02ms
 99.900%  165.25ms
 99.990%  185.60ms
 99.999%  185.60ms
100.000%  185.60ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.399     0.000000            1         1.00
      21.263     0.100000          170         1.11
      29.311     0.200000          340         1.25
      37.535     0.300000          510         1.43
      45.951     0.400000          679         1.67
      53.183     0.500000          848         2.00
      61.215     0.550000          933         2.22
      68.671     0.600000         1018         2.50
      74.559     0.650000         1104         2.86
      77.951     0.700000         1189         3.33
      85.951     0.750000         1272         4.00
      93.183     0.775000         1317         4.44
      95.615     0.800000         1357         5.00
      98.367     0.825000         1400         5.71
     101.503     0.850000         1442         6.67
     110.975     0.875000         1486         8.00
     113.151     0.887500         1506         8.89
     114.687     0.900000         1527        10.00
     116.543     0.912500         1548        11.43
     119.167     0.925000         1569        13.33
     122.175     0.937500         1591        16.00
     122.879     0.943750         1601        17.78
     123.775     0.950000         1612        20.00
     125.759     0.956250         1622        22.86
     127.679     0.962500         1633        26.67
     131.071     0.968750         1643        32.00
     133.119     0.971875         1649        35.56
     134.655     0.975000         1654        40.00
     136.575     0.978125         1659        45.71
     140.287     0.981250         1667        53.33
     141.695     0.984375         1670        64.00
     142.335     0.985938         1673        71.11
     143.615     0.987500         1675        80.00
     144.895     0.989062         1678        91.43
     145.407     0.990625         1681       106.67
     146.559     0.992188         1684       128.00
     146.687     0.992969         1685       142.22
     146.815     0.993750         1686       160.00
     148.223     0.994531         1687       182.86
     148.735     0.995313         1689       213.33
     149.503     0.996094         1690       256.00
     151.935     0.996484         1691       284.44
     151.935     0.996875         1691       320.00
     152.319     0.997266         1692       365.71
     161.919     0.997656         1693       426.67
     161.919     0.998047         1693       512.00
     165.247     0.998242         1694       568.89
     165.247     0.998437         1694       640.00
     165.247     0.998633         1694       731.43
     170.239     0.998828         1695       853.33
     170.239     0.999023         1695      1024.00
     170.239     0.999121         1695      1137.78
     170.239     0.999219         1695      1280.00
     170.239     0.999316         1695      1462.86
     185.599     0.999414         1696      1706.67
     185.599     1.000000         1696          inf
#[Mean    =       61.723, StdDeviation   =       34.933]
#[Max     =      185.472, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1801 requests in 3.00m, 26.34MB read
Requests/sec:     10.00
Transfer/sec:    149.82KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 124.470ms, rate sampling interval: 433ms
  Thread calibration: mean lat.: 149.155ms, rate sampling interval: 525ms
  Thread calibration: mean lat.: 155.516ms, rate sampling interval: 561ms
  Thread calibration: mean lat.: 150.639ms, rate sampling interval: 541ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   109.22ms   53.10ms 388.61ms   67.00%
    Req/Sec     4.41      1.50     9.00     83.40%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  105.92ms
 75.000%  141.70ms
 90.000%  181.89ms
 99.000%  259.71ms
 99.900%  304.64ms
 99.990%  388.86ms
 99.999%  388.86ms
100.000%  388.86ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.527     0.000000            1         1.00
      41.599     0.100000          340         1.11
      60.543     0.200000          680         1.25
      78.271     0.300000         1020         1.43
      92.991     0.400000         1360         1.67
     105.919     0.500000         1701         2.00
     111.103     0.550000         1871         2.22
     118.079     0.600000         2040         2.50
     125.503     0.650000         2210         2.86
     134.783     0.700000         2382         3.33
     141.695     0.750000         2552         4.00
     147.071     0.775000         2635         4.44
     152.831     0.800000         2721         5.00
     158.207     0.825000         2806         5.71
     165.247     0.850000         2890         6.67
     174.463     0.875000         2975         8.00
     178.559     0.887500         3018         8.89
     181.887     0.900000         3062        10.00
     185.983     0.912500         3104        11.43
     189.183     0.925000         3146        13.33
     192.511     0.937500         3189        16.00
     194.559     0.943750         3210        17.78
     198.783     0.950000         3231        20.00
     208.383     0.956250         3252        22.86
     215.295     0.962500         3273        26.67
     218.751     0.968750         3294        32.00
     221.695     0.971875         3305        35.56
     226.687     0.975000         3315        40.00
     231.167     0.978125         3326        45.71
     233.983     0.981250         3337        53.33
     236.287     0.984375         3347        64.00
     239.871     0.985938         3353        71.11
     252.671     0.987500         3358        80.00
     258.815     0.989062         3363        91.43
     260.479     0.990625         3369       106.67
     261.503     0.992188         3374       128.00
     262.655     0.992969         3377       142.22
     265.215     0.993750         3379       160.00
     266.239     0.994531         3383       182.86
     269.823     0.995313         3385       213.33
     271.103     0.996094         3387       256.00
     274.175     0.996484         3390       284.44
     274.175     0.996875         3390       320.00
     276.223     0.997266         3391       365.71
     277.759     0.997656         3393       426.67
     278.271     0.998047         3394       512.00
     279.295     0.998242         3395       568.89
     279.295     0.998437         3395       640.00
     303.103     0.998633         3396       731.43
     304.639     0.998828         3397       853.33
     304.639     0.999023         3397      1024.00
     306.175     0.999121         3398      1137.78
     306.175     0.999219         3398      1280.00
     306.175     0.999316         3398      1462.86
     308.735     0.999414         3399      1706.67
     308.735     0.999512         3399      2048.00
     308.735     0.999561         3399      2275.56
     308.735     0.999609         3399      2560.00
     308.735     0.999658         3399      2925.71
     388.863     0.999707         3400      3413.33
     388.863     1.000000         3400          inf
#[Mean    =      109.221, StdDeviation   =       53.103]
#[Max     =      388.608, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.48KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-1'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-3'], 59)
original graph map
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 86.128ms, rate sampling interval: 307ms
  Thread calibration: mean lat.: 95.898ms, rate sampling interval: 289ms
  Thread calibration: mean lat.: 73.607ms, rate sampling interval: 250ms
  Thread calibration: mean lat.: 79.983ms, rate sampling interval: 312ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    74.61ms   35.27ms 195.20ms   58.09%
    Req/Sec     4.67      2.58     8.00     82.44%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   74.37ms
 75.000%  101.82ms
 90.000%  121.79ms
 99.000%  153.47ms
 99.900%  165.89ms
 99.990%  195.33ms
 99.999%  195.33ms
100.000%  195.33ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.679     0.000000            1         1.00
      30.479     0.100000          340         1.11
      36.927     0.200000          680         1.25
      48.383     0.300000         1020         1.43
      63.807     0.400000         1360         1.67
      74.367     0.500000         1700         2.00
      77.823     0.550000         1873         2.22
      82.111     0.600000         2040         2.50
      89.279     0.650000         2210         2.86
      97.599     0.700000         2381         3.33
     101.823     0.750000         2552         4.00
     103.999     0.775000         2635         4.44
     108.031     0.800000         2721         5.00
     111.871     0.825000         2805         5.71
     115.391     0.850000         2892         6.67
     118.975     0.875000         2975         8.00
     120.191     0.887500         3018         8.89
     121.791     0.900000         3060        10.00
     123.903     0.912500         3103        11.43
     125.695     0.925000         3147        13.33
     128.447     0.937500         3189        16.00
     130.175     0.943750         3209        17.78
     133.375     0.950000         3231        20.00
     136.959     0.956250         3255        22.86
     138.879     0.962500         3273        26.67
     141.951     0.968750         3294        32.00
     143.743     0.971875         3307        35.56
     144.255     0.975000         3316        40.00
     145.407     0.978125         3329        45.71
     146.687     0.981250         3337        53.33
     148.607     0.984375         3347        64.00
     150.143     0.985938         3354        71.11
     151.551     0.987500         3358        80.00
     152.575     0.989062         3363        91.43
     154.751     0.990625         3369       106.67
     156.287     0.992188         3374       128.00
     157.567     0.992969         3377       142.22
     158.591     0.993750         3379       160.00
     160.127     0.994531         3382       182.86
     161.151     0.995313         3385       213.33
     161.407     0.996094         3387       256.00
     162.175     0.996484         3390       284.44
     162.175     0.996875         3390       320.00
     162.559     0.997266         3391       365.71
     163.327     0.997656         3393       426.67
     163.967     0.998047         3394       512.00
     165.119     0.998242         3395       568.89
     165.119     0.998437         3395       640.00
     165.503     0.998633         3396       731.43
     165.887     0.998828         3397       853.33
     165.887     0.999023         3397      1024.00
     166.911     0.999121         3398      1137.78
     166.911     0.999219         3398      1280.00
     166.911     0.999316         3398      1462.86
     168.831     0.999414         3399      1706.67
     168.831     0.999512         3399      2048.00
     168.831     0.999561         3399      2275.56
     168.831     0.999609         3399      2560.00
     168.831     0.999658         3399      2925.71
     195.327     0.999707         3400      3413.33
     195.327     1.000000         3400          inf
#[Mean    =       74.614, StdDeviation   =       35.266]
#[Max     =      195.200, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3601 requests in 3.00m, 52.66MB read
Requests/sec:     20.00
Transfer/sec:    299.55KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 144.268ms, rate sampling interval: 559ms
  Thread calibration: mean lat.: 182.745ms, rate sampling interval: 654ms
  Thread calibration: mean lat.: 104.522ms, rate sampling interval: 345ms
  Thread calibration: mean lat.: 149.608ms, rate sampling interval: 539ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   111.53ms   54.29ms 350.72ms   66.33%
    Req/Sec     7.00      1.61    11.00     93.14%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  106.37ms
 75.000%  147.20ms
 90.000%  185.98ms
 99.000%  260.61ms
 99.900%  283.65ms
 99.990%  315.39ms
 99.999%  350.98ms
100.000%  350.98ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.655     0.000000            1         1.00
      45.503     0.100000          510         1.11
      61.471     0.200000         1020         1.25
      79.423     0.300000         1532         1.43
      92.927     0.400000         2043         1.67
     106.367     0.500000         2550         2.00
     112.383     0.550000         2805         2.22
     119.295     0.600000         3059         2.50
     128.575     0.650000         3315         2.86
     137.471     0.700000         3571         3.33
     147.199     0.750000         3823         4.00
     153.471     0.775000         3951         4.44
     157.951     0.800000         4080         5.00
     162.815     0.825000         4206         5.71
     172.159     0.850000         4333         6.67
     180.607     0.875000         4460         8.00
     183.679     0.887500         4526         8.89
     185.983     0.900000         4590        10.00
     189.695     0.912500         4653        11.43
     195.071     0.925000         4715        13.33
     198.783     0.937500         4779        16.00
     201.983     0.943750         4812        17.78
     207.999     0.950000         4843        20.00
     213.887     0.956250         4875        22.86
     216.959     0.962500         4906        26.67
     227.199     0.968750         4938        32.00
     228.607     0.971875         4954        35.56
     230.271     0.975000         4971        40.00
     233.215     0.978125         4987        45.71
     236.671     0.981250         5002        53.33
     241.151     0.984375         5018        64.00
     243.711     0.985938         5026        71.11
     250.111     0.987500         5034        80.00
     259.199     0.989062         5042        91.43
     261.375     0.990625         5050       106.67
     264.447     0.992188         5058       128.00
     265.471     0.992969         5064       142.22
     266.495     0.993750         5070       160.00
     266.495     0.994531         5070       182.86
     268.543     0.995313         5074       213.33
     270.847     0.996094         5078       256.00
     274.175     0.996484         5080       284.44
     274.943     0.996875         5082       320.00
     277.247     0.997266         5084       365.71
     278.527     0.997656         5086       426.67
     280.063     0.998047         5088       512.00
     280.319     0.998242         5090       568.89
     280.319     0.998437         5090       640.00
     282.879     0.998633         5091       731.43
     283.647     0.998828         5092       853.33
     288.255     0.999023         5093      1024.00
     288.255     0.999121         5093      1137.78
     289.279     0.999219         5094      1280.00
     289.279     0.999316         5094      1462.86
     310.527     0.999414         5095      1706.67
     310.527     0.999512         5095      2048.00
     310.527     0.999561         5095      2275.56
     315.391     0.999609         5096      2560.00
     315.391     0.999658         5096      2925.71
     315.391     0.999707         5096      3413.33
     315.391     0.999756         5096      4096.00
     315.391     0.999780         5096      4551.11
     350.975     0.999805         5097      5120.00
     350.975     1.000000         5097          inf
#[Mean    =      111.533, StdDeviation   =       54.295]
#[Max     =      350.720, Total count    =         5097]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.23KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 55)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 74)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 44)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 33)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 74)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
original graph map
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 84.420ms, rate sampling interval: 254ms
  Thread calibration: mean lat.: 80.700ms, rate sampling interval: 291ms
  Thread calibration: mean lat.: 72.033ms, rate sampling interval: 236ms
  Thread calibration: mean lat.: 72.211ms, rate sampling interval: 281ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    67.24ms   35.41ms 169.98ms   66.37%
    Req/Sec     6.94      2.12    17.00     88.50%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   64.25ms
 75.000%   97.34ms
 90.000%  116.42ms
 99.000%  150.91ms
 99.900%  163.97ms
 99.990%  169.85ms
 99.999%  170.11ms
100.000%  170.11ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.223     0.000000            1         1.00
      25.919     0.100000          510         1.11
      33.663     0.200000         1021         1.25
      38.815     0.300000         1529         1.43
      50.687     0.400000         2040         1.67
      64.255     0.500000         2549         2.00
      70.527     0.550000         2804         2.22
      73.599     0.600000         3058         2.50
      78.207     0.650000         3315         2.86
      87.743     0.700000         3568         3.33
      97.343     0.750000         3822         4.00
      99.967     0.775000         3950         4.44
     101.567     0.800000         4079         5.00
     103.935     0.825000         4207         5.71
     109.631     0.850000         4332         6.67
     113.471     0.875000         4459         8.00
     114.751     0.887500         4523         8.89
     116.479     0.900000         4590        10.00
     118.783     0.912500         4653        11.43
     121.087     0.925000         4715        13.33
     123.775     0.937500         4779        16.00
     125.119     0.943750         4810        17.78
     127.039     0.950000         4843        20.00
     129.791     0.956250         4874        22.86
     133.119     0.962500         4905        26.67
     140.159     0.968750         4937        32.00
     141.823     0.971875         4953        35.56
     143.359     0.975000         4970        40.00
     145.023     0.978125         4985        45.71
     146.175     0.981250         5003        53.33
     147.711     0.984375         5017        64.00
     148.607     0.985938         5026        71.11
     149.119     0.987500         5034        80.00
     150.143     0.989062         5041        91.43
     151.295     0.990625         5049       106.67
     152.831     0.992188         5057       128.00
     153.727     0.992969         5061       142.22
     154.111     0.993750         5065       160.00
     154.879     0.994531         5069       182.86
     156.031     0.995313         5075       213.33
     156.927     0.996094         5078       256.00
     157.183     0.996484         5079       284.44
     158.207     0.996875         5081       320.00
     159.999     0.997266         5083       365.71
     160.895     0.997656         5085       426.67
     161.151     0.998047         5087       512.00
     162.047     0.998242         5088       568.89
     162.175     0.998437         5089       640.00
     162.943     0.998633         5090       731.43
     163.967     0.998828         5091       853.33
     164.863     0.999023         5092      1024.00
     164.863     0.999121         5092      1137.78
     165.247     0.999219         5093      1280.00
     165.247     0.999316         5093      1462.86
     165.503     0.999414         5094      1706.67
     165.503     0.999512         5094      2048.00
     165.503     0.999561         5094      2275.56
     169.855     0.999609         5095      2560.00
     169.855     0.999658         5095      2925.71
     169.855     0.999707         5095      3413.33
     169.855     0.999756         5095      4096.00
     169.855     0.999780         5095      4551.11
     170.111     0.999805         5096      5120.00
     170.111     1.000000         5096          inf
#[Mean    =       67.240, StdDeviation   =       35.414]
#[Max     =      169.984, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.97MB read
Requests/sec:     30.00
Transfer/sec:    449.20KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 135.260ms, rate sampling interval: 566ms
  Thread calibration: mean lat.: 176.168ms, rate sampling interval: 594ms
  Thread calibration: mean lat.: 157.795ms, rate sampling interval: 610ms
  Thread calibration: mean lat.: 160.397ms, rate sampling interval: 510ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   120.46ms   55.07ms 326.14ms   64.94%
    Req/Sec     9.42      1.44    14.00     93.82%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  114.88ms
 75.000%  158.08ms
 90.000%  194.05ms
 99.000%  263.42ms
 99.900%  282.62ms
 99.990%  311.81ms
 99.999%  326.40ms
100.000%  326.40ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.127     0.000000            1         1.00
      50.527     0.100000          680         1.11
      71.551     0.200000         1362         1.25
      88.319     0.300000         2041         1.43
     101.183     0.400000         2720         1.67
     114.879     0.500000         3402         2.00
     121.791     0.550000         3742         2.22
     131.839     0.600000         4080         2.50
     140.159     0.650000         4424         2.86
     151.167     0.700000         4762         3.33
     158.079     0.750000         5102         4.00
     162.431     0.775000         5270         4.44
     168.831     0.800000         5445         5.00
     175.487     0.825000         5612         5.71
     181.759     0.850000         5782         6.67
     186.495     0.875000         5950         8.00
     189.567     0.887500         6038         8.89
     194.175     0.900000         6124        10.00
     197.375     0.912500         6207        11.43
     201.343     0.925000         6290        13.33
     208.127     0.937500         6375        16.00
     212.735     0.943750         6417        17.78
     216.959     0.950000         6460        20.00
     220.415     0.956250         6503        22.86
     225.535     0.962500         6547        26.67
     230.271     0.968750         6589        32.00
     232.831     0.971875         6609        35.56
     235.775     0.975000         6631        40.00
     237.951     0.978125         6651        45.71
     242.687     0.981250         6672        53.33
     257.023     0.984375         6693        64.00
     258.303     0.985938         6704        71.11
     260.223     0.987500         6715        80.00
     262.399     0.989062         6725        91.43
     263.935     0.990625         6738       106.67
     265.727     0.992188         6747       128.00
     267.007     0.992969         6753       142.22
     268.031     0.993750         6757       160.00
     271.359     0.994531         6762       182.86
     274.431     0.995313         6769       213.33
     275.455     0.996094         6773       256.00
     278.271     0.996484         6776       284.44
     278.783     0.996875         6779       320.00
     279.295     0.997266         6782       365.71
     279.551     0.997656         6784       426.67
     280.575     0.998047         6786       512.00
     280.831     0.998242         6789       568.89
     280.831     0.998437         6789       640.00
     281.599     0.998633         6790       731.43
     282.623     0.998828         6792       853.33
     297.215     0.999023         6793      1024.00
     304.383     0.999121         6794      1137.78
     304.383     0.999219         6794      1280.00
     305.663     0.999316         6795      1462.86
     307.711     0.999414         6796      1706.67
     307.711     0.999512         6796      2048.00
     308.479     0.999561         6797      2275.56
     308.479     0.999609         6797      2560.00
     308.479     0.999658         6797      2925.71
     311.807     0.999707         6798      3413.33
     311.807     0.999756         6798      4096.00
     311.807     0.999780         6798      4551.11
     311.807     0.999805         6798      5120.00
     311.807     0.999829         6798      5851.43
     326.399     0.999854         6799      6826.67
     326.399     1.000000         6799          inf
#[Mean    =      120.460, StdDeviation   =       55.067]
#[Max     =      326.144, Total count    =         6799]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     39.99
Transfer/sec:    598.97KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-2', 'details-3'], 8)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-2'], 12)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
original graph map
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 64.191ms, rate sampling interval: 227ms
  Thread calibration: mean lat.: 71.411ms, rate sampling interval: 239ms
  Thread calibration: mean lat.: 84.354ms, rate sampling interval: 240ms
  Thread calibration: mean lat.: 68.059ms, rate sampling interval: 238ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    69.16ms   35.29ms 190.34ms   63.91%
    Req/Sec     9.52      2.75    17.00     90.06%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   66.24ms
 75.000%  100.29ms
 90.000%  117.44ms
 99.000%  151.55ms
 99.900%  162.82ms
 99.990%  167.68ms
 99.999%  190.46ms
100.000%  190.46ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.919     0.000000            1         1.00
      25.503     0.100000          680         1.11
      36.063     0.200000         1362         1.25
      42.591     0.300000         2040         1.43
      52.223     0.400000         2723         1.67
      66.239     0.500000         3400         2.00
      72.959     0.550000         3740         2.22
      76.991     0.600000         4086         2.50
      82.943     0.650000         4422         2.86
      92.735     0.700000         4763         3.33
     100.287     0.750000         5102         4.00
     102.463     0.775000         5271         4.44
     104.895     0.800000         5442         5.00
     107.007     0.825000         5613         5.71
     111.295     0.850000         5781         6.67
     114.431     0.875000         5951         8.00
     116.287     0.887500         6037         8.89
     117.439     0.900000         6121        10.00
     118.655     0.912500         6209        11.43
     120.191     0.925000         6291        13.33
     122.559     0.937500         6376        16.00
     123.903     0.943750         6420        17.78
     125.247     0.950000         6461        20.00
     127.039     0.956250         6505        22.86
     128.895     0.962500         6545        26.67
     132.479     0.968750         6588        32.00
     134.015     0.971875         6610        35.56
     136.959     0.975000         6631        40.00
     142.975     0.978125         6653        45.71
     144.767     0.981250         6673        53.33
     147.583     0.984375         6694        64.00
     148.095     0.985938         6705        71.11
     149.119     0.987500         6715        80.00
     150.655     0.989062         6727        91.43
     152.063     0.990625         6737       106.67
     152.831     0.992188         6748       128.00
     154.623     0.992969         6754       142.22
     155.135     0.993750         6759       160.00
     155.647     0.994531         6765       182.86
     156.159     0.995313         6769       213.33
     157.439     0.996094         6774       256.00
     158.207     0.996484         6777       284.44
     158.463     0.996875         6779       320.00
     159.231     0.997266         6782       365.71
     159.487     0.997656         6785       426.67
     160.255     0.998047         6787       512.00
     161.919     0.998242         6789       568.89
     162.175     0.998437         6791       640.00
     162.175     0.998633         6791       731.43
     162.815     0.998828         6793       853.33
     163.583     0.999023         6794      1024.00
     164.095     0.999121         6795      1137.78
     164.095     0.999219         6795      1280.00
     164.991     0.999316         6796      1462.86
     166.271     0.999414         6797      1706.67
     166.271     0.999512         6797      2048.00
     167.423     0.999561         6798      2275.56
     167.423     0.999609         6798      2560.00
     167.423     0.999658         6798      2925.71
     167.679     0.999707         6799      3413.33
     167.679     0.999756         6799      4096.00
     167.679     0.999780         6799      4551.11
     167.679     0.999805         6799      5120.00
     167.679     0.999829         6799      5851.43
     190.463     0.999854         6800      6826.67
     190.463     1.000000         6800          inf
#[Mean    =       69.160, StdDeviation   =       35.286]
#[Max     =      190.336, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7201 requests in 3.00m, 105.31MB read
Requests/sec:     40.00
Transfer/sec:    599.05KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 153.090ms, rate sampling interval: 578ms
  Thread calibration: mean lat.: 146.782ms, rate sampling interval: 587ms
  Thread calibration: mean lat.: 301.234ms, rate sampling interval: 1182ms
  Thread calibration: mean lat.: 127.153ms, rate sampling interval: 418ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   114.94ms   55.49ms 434.69ms   70.18%
    Req/Sec    11.90      1.60    17.00     88.52%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  106.69ms
 75.000%  147.58ms
 90.000%  187.52ms
 99.000%  274.69ms
 99.900%  378.62ms
 99.990%  429.31ms
 99.999%  434.94ms
100.000%  434.94ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.159     0.000000            1         1.00
      53.023     0.100000          852         1.11
      68.223     0.200000         1703         1.25
      80.127     0.300000         2554         1.43
      93.695     0.400000         3402         1.67
     106.687     0.500000         4255         2.00
     113.215     0.550000         4677         2.22
     120.511     0.600000         5101         2.50
     128.383     0.650000         5529         2.86
     137.343     0.700000         5955         3.33
     147.583     0.750000         6378         4.00
     153.215     0.775000         6589         4.44
     157.951     0.800000         6803         5.00
     164.607     0.825000         7014         5.71
     172.287     0.850000         7228         6.67
     180.095     0.875000         7440         8.00
     183.039     0.887500         7547         8.89
     187.519     0.900000         7653        10.00
     191.871     0.912500         7758        11.43
     197.119     0.925000         7865        13.33
     205.951     0.937500         7970        16.00
     212.479     0.943750         8023        17.78
     217.727     0.950000         8076        20.00
     223.743     0.956250         8131        22.86
     231.039     0.962500         8183        26.67
     237.183     0.968750         8238        32.00
     241.023     0.971875         8263        35.56
     248.319     0.975000         8289        40.00
     255.871     0.978125         8316        45.71
     261.119     0.981250         8343        53.33
     263.679     0.984375         8369        64.00
     264.959     0.985938         8384        71.11
     267.263     0.987500         8395        80.00
     272.895     0.989062         8409        91.43
     280.319     0.990625         8422       106.67
     286.463     0.992188         8435       128.00
     288.255     0.992969         8442       142.22
     291.583     0.993750         8448       160.00
     297.471     0.994531         8455       182.86
     307.199     0.995313         8462       213.33
     313.087     0.996094         8468       256.00
     315.647     0.996484         8472       284.44
     318.719     0.996875         8475       320.00
     321.023     0.997266         8478       365.71
     326.143     0.997656         8482       426.67
     342.783     0.998047         8485       512.00
     346.879     0.998242         8487       568.89
     350.975     0.998437         8488       640.00
     359.935     0.998633         8490       731.43
     378.623     0.998828         8492       853.33
     379.903     0.999023         8493      1024.00
     380.927     0.999121         8494      1137.78
     381.183     0.999219         8495      1280.00
     400.383     0.999316         8496      1462.86
     402.687     0.999414         8497      1706.67
     402.687     0.999512         8497      2048.00
     414.207     0.999561         8498      2275.56
     414.207     0.999609         8498      2560.00
     424.191     0.999658         8499      2925.71
     424.191     0.999707         8499      3413.33
     424.191     0.999756         8499      4096.00
     429.311     0.999780         8500      4551.11
     429.311     0.999805         8500      5120.00
     429.311     0.999829         8500      5851.43
     429.311     0.999854         8500      6826.67
     429.311     0.999878         8500      8192.00
     434.943     0.999890         8501      9102.22
     434.943     1.000000         8501          inf
#[Mean    =      114.938, StdDeviation   =       55.488]
#[Max     =      434.688, Total count    =         8501]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.63MB read
Requests/sec:     49.99
Transfer/sec:    748.69KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
original graph map
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 1516.089ms, rate sampling interval: 5316ms
  Thread calibration: mean lat.: 1783.176ms, rate sampling interval: 6565ms
  Thread calibration: mean lat.: 2021.477ms, rate sampling interval: 6660ms
  Thread calibration: mean lat.: 78.073ms, rate sampling interval: 293ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    20.45s    19.09s    0.97m    44.99%
    Req/Sec    11.51      2.57    20.00     88.50%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   17.63s 
 75.000%   37.39s 
 90.000%   49.22s 
 99.000%    0.94m 
 99.900%    0.97m 
 99.990%    0.97m 
 99.999%    0.97m 
100.000%    0.97m 

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.423     0.000000            1         1.00
      36.831     0.100000          649         1.11
      73.215     0.200000         1297         1.25
     110.911     0.300000         1945         1.43
    9297.919     0.400000         2593         1.67
   17629.183     0.500000         3241         2.00
   21397.503     0.550000         3567         2.22
   24821.759     0.600000         3890         2.50
   28966.911     0.650000         4215         2.86
   33259.519     0.700000         4538         3.33
   37388.287     0.750000         4863         4.00
   39321.599     0.775000         5025         4.44
   41320.447     0.800000         5186         5.00
   43515.903     0.825000         5348         5.71
   45416.447     0.850000         5512         6.67
   47316.991     0.875000         5673         8.00
   48267.263     0.887500         5755         8.89
   49217.535     0.900000         5834        10.00
   50200.575     0.912500         5918        11.43
   51281.919     0.925000         5997        13.33
   52232.191     0.937500         6078        16.00
   52723.711     0.943750         6120        17.78
   53182.463     0.950000         6158        20.00
   53739.519     0.956250         6199        22.86
   54198.271     0.962500         6240        26.67
   54755.327     0.968750         6282        32.00
   54951.935     0.971875         6302        35.56
   55181.311     0.975000         6321        40.00
   55476.223     0.978125         6341        45.71
   55705.599     0.981250         6365        53.33
   55934.975     0.984375         6383        64.00
   56033.279     0.985938         6392        71.11
   56197.119     0.987500         6401        80.00
   56393.727     0.989062         6413        91.43
   56623.103     0.990625         6425       106.67
   56754.175     0.992188         6432       128.00
   56918.015     0.992969         6438       142.22
   57114.623     0.993750         6442       160.00
   57311.231     0.994531         6448       182.86
   57409.535     0.995313         6452       213.33
   57638.911     0.996094         6458       256.00
   57704.447     0.996484         6460       284.44
   57737.215     0.996875         6462       320.00
   57868.287     0.997266         6465       365.71
   57933.823     0.997656         6467       426.67
   57999.359     0.998047         6470       512.00
   58064.895     0.998242         6471       568.89
   58097.663     0.998437         6473       640.00
   58228.735     0.998633         6474       731.43
   58261.503     0.998828         6476       853.33
   58261.503     0.999023         6476      1024.00
   58294.271     0.999121         6478      1137.78
   58294.271     0.999219         6478      1280.00
   58294.271     0.999316         6478      1462.86
   58359.807     0.999414         6479      1706.67
   58359.807     0.999512         6479      2048.00
   58392.575     0.999561         6480      2275.56
   58392.575     0.999609         6480      2560.00
   58392.575     0.999658         6480      2925.71
   58425.343     0.999707         6481      3413.33
   58425.343     0.999756         6481      4096.00
   58425.343     0.999780         6481      4551.11
   58425.343     0.999805         6481      5120.00
   58425.343     0.999829         6481      5851.43
   58490.879     0.999854         6482      6826.67
   58490.879     1.000000         6482          inf
#[Mean    =    20454.171, StdDeviation   =    19091.975]
#[Max     =    58458.112, Total count    =         6482]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  6856 requests in 3.00m, 100.27MB read
Requests/sec:     38.08
Transfer/sec:    570.35KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 152.409ms, rate sampling interval: 550ms
  Thread calibration: mean lat.: 158.699ms, rate sampling interval: 524ms
  Thread calibration: mean lat.: 125.091ms, rate sampling interval: 416ms
  Thread calibration: mean lat.: 137.274ms, rate sampling interval: 473ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   103.67ms   49.48ms 379.65ms   67.10%
    Req/Sec     2.10      1.65     4.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   97.66ms
 75.000%  137.98ms
 90.000%  174.21ms
 99.000%  229.89ms
 99.900%  280.58ms
 99.990%  379.90ms
 99.999%  379.90ms
100.000%  379.90ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.575     0.000000            1         1.00
      43.871     0.100000          171         1.11
      59.519     0.200000          340         1.25
      72.703     0.300000          510         1.43
      88.127     0.400000          679         1.67
      97.663     0.500000          848         2.00
     104.767     0.550000          933         2.22
     111.039     0.600000         1018         2.50
     118.271     0.650000         1103         2.86
     126.591     0.700000         1189         3.33
     137.983     0.750000         1272         4.00
     141.055     0.775000         1315         4.44
     143.999     0.800000         1357         5.00
     149.119     0.825000         1400         5.71
     159.103     0.850000         1442         6.67
     163.967     0.875000         1484         8.00
     168.063     0.887500         1506         8.89
     174.207     0.900000         1527        10.00
     178.175     0.912500         1549        11.43
     181.887     0.925000         1569        13.33
     186.495     0.937500         1590        16.00
     188.927     0.943750         1601        17.78
     190.463     0.950000         1612        20.00
     191.231     0.956250         1622        22.86
     193.663     0.962500         1633        26.67
     198.143     0.968750         1643        32.00
     202.239     0.971875         1649        35.56
     205.951     0.975000         1654        40.00
     208.767     0.978125         1659        45.71
     218.623     0.981250         1665        53.33
     220.159     0.984375         1670        64.00
     222.079     0.985938         1673        71.11
     223.487     0.987500         1675        80.00
     225.535     0.989062         1678        91.43
     233.471     0.990625         1681       106.67
     238.207     0.992188         1683       128.00
     239.487     0.992969         1685       142.22
     240.255     0.993750         1686       160.00
     243.967     0.994531         1687       182.86
     258.943     0.995313         1689       213.33
     260.607     0.996094         1690       256.00
     263.679     0.996484         1691       284.44
     263.679     0.996875         1691       320.00
     265.215     0.997266         1692       365.71
     267.263     0.997656         1693       426.67
     267.263     0.998047         1693       512.00
     280.575     0.998242         1694       568.89
     280.575     0.998437         1694       640.00
     280.575     0.998633         1694       731.43
     281.855     0.998828         1695       853.33
     281.855     0.999023         1695      1024.00
     281.855     0.999121         1695      1137.78
     281.855     0.999219         1695      1280.00
     281.855     0.999316         1695      1462.86
     379.903     0.999414         1696      1706.67
     379.903     1.000000         1696          inf
#[Mean    =      103.674, StdDeviation   =       49.475]
#[Max     =      379.648, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1801 requests in 3.00m, 26.34MB read
Requests/sec:     10.00
Transfer/sec:    149.82KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-1'], 7)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 38)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 37)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 60)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 49)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'details-3'], 9)
original graph map
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 80.620ms, rate sampling interval: 205ms
  Thread calibration: mean lat.: 89.987ms, rate sampling interval: 277ms
  Thread calibration: mean lat.: 89.592ms, rate sampling interval: 351ms
  Thread calibration: mean lat.: 104.507ms, rate sampling interval: 362ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    77.42ms   32.35ms 219.52ms   64.27%
    Req/Sec     2.26      3.07     9.00     84.91%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   77.31ms
 75.000%  100.16ms
 90.000%  118.14ms
 99.000%  154.49ms
 99.900%  165.76ms
 99.990%  219.65ms
 99.999%  219.65ms
100.000%  219.65ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      12.311     0.000000            1         1.00
      31.583     0.100000          170         1.11
      45.727     0.200000          340         1.25
      57.439     0.300000          509         1.43
      70.399     0.400000          679         1.67
      77.311     0.500000          848         2.00
      81.535     0.550000          933         2.22
      86.143     0.600000         1019         2.50
      91.199     0.650000         1103         2.86
      96.703     0.700000         1188         3.33
     100.159     0.750000         1274         4.00
     102.911     0.775000         1316         4.44
     105.663     0.800000         1357         5.00
     108.607     0.825000         1400         5.71
     111.231     0.850000         1442         6.67
     114.431     0.875000         1484         8.00
     116.607     0.887500         1506         8.89
     118.527     0.900000         1527        10.00
     120.575     0.912500         1548        11.43
     123.647     0.925000         1570        13.33
     126.463     0.937500         1590        16.00
     128.831     0.943750         1601        17.78
     131.327     0.950000         1612        20.00
     132.863     0.956250         1622        22.86
     136.063     0.962500         1633        26.67
     140.415     0.968750         1644        32.00
     141.695     0.971875         1649        35.56
     143.999     0.975000         1655        40.00
     145.151     0.978125         1659        45.71
     148.991     0.981250         1665        53.33
     150.527     0.984375         1670        64.00
     152.959     0.985938         1673        71.11
     154.239     0.987500         1677        80.00
     154.367     0.989062         1678        91.43
     154.623     0.990625         1681       106.67
     155.007     0.992188         1683       128.00
     155.391     0.992969         1685       142.22
     155.519     0.993750         1686       160.00
     156.031     0.994531         1687       182.86
     156.543     0.995313         1689       213.33
     156.799     0.996094         1690       256.00
     157.183     0.996484         1691       284.44
     157.183     0.996875         1691       320.00
     158.463     0.997266         1692       365.71
     164.991     0.997656         1693       426.67
     164.991     0.998047         1693       512.00
     165.759     0.998242         1694       568.89
     165.759     0.998437         1694       640.00
     165.759     0.998633         1694       731.43
     177.279     0.998828         1695       853.33
     177.279     0.999023         1695      1024.00
     177.279     0.999121         1695      1137.78
     177.279     0.999219         1695      1280.00
     177.279     0.999316         1695      1462.86
     219.647     0.999414         1696      1706.67
     219.647     1.000000         1696          inf
#[Mean    =       77.425, StdDeviation   =       32.347]
#[Max     =      219.520, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1801 requests in 3.00m, 26.34MB read
Requests/sec:     10.00
Transfer/sec:    149.82KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 135.853ms, rate sampling interval: 477ms
  Thread calibration: mean lat.: 170.574ms, rate sampling interval: 663ms
  Thread calibration: mean lat.: 122.545ms, rate sampling interval: 425ms
  Thread calibration: mean lat.: 164.533ms, rate sampling interval: 712ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   108.25ms   53.68ms 349.44ms   66.41%
    Req/Sec     4.60      1.28     9.00     87.99%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  102.46ms
 75.000%  141.05ms
 90.000%  185.47ms
 99.000%  257.92ms
 99.900%  277.76ms
 99.990%  349.70ms
 99.999%  349.70ms
100.000%  349.70ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.999     0.000000            1         1.00
      41.727     0.100000          340         1.11
      58.303     0.200000          681         1.25
      75.903     0.300000         1021         1.43
      91.583     0.400000         1360         1.67
     102.463     0.500000         1700         2.00
     108.863     0.550000         1874         2.22
     114.239     0.600000         2041         2.50
     122.751     0.650000         2210         2.86
     135.551     0.700000         2382         3.33
     141.055     0.750000         2552         4.00
     146.943     0.775000         2636         4.44
     151.935     0.800000         2720         5.00
     158.335     0.825000         2805         5.71
     168.319     0.850000         2891         6.67
     178.559     0.875000         2975         8.00
     182.015     0.887500         3018         8.89
     185.471     0.900000         3061        10.00
     188.671     0.912500         3103        11.43
     190.847     0.925000         3145        13.33
     193.919     0.937500         3188        16.00
     197.631     0.943750         3209        17.78
     204.799     0.950000         3230        20.00
     215.423     0.956250         3254        22.86
     217.471     0.962500         3274        26.67
     218.879     0.968750         3294        32.00
     219.903     0.971875         3305        35.56
     221.311     0.975000         3315        40.00
     223.231     0.978125         3326        45.71
     226.175     0.981250         3337        53.33
     235.135     0.984375         3347        64.00
     236.671     0.985938         3353        71.11
     238.847     0.987500         3358        80.00
     255.871     0.989062         3363        91.43
     259.327     0.990625         3369       106.67
     260.607     0.992188         3375       128.00
     261.119     0.992969         3378       142.22
     262.655     0.993750         3381       160.00
     262.911     0.994531         3382       182.86
     263.935     0.995313         3385       213.33
     264.703     0.996094         3387       256.00
     266.751     0.996484         3389       284.44
     267.007     0.996875         3391       320.00
     267.007     0.997266         3391       365.71
     267.775     0.997656         3394       426.67
     267.775     0.998047         3394       512.00
     268.031     0.998242         3395       568.89
     268.031     0.998437         3395       640.00
     268.543     0.998633         3396       731.43
     277.759     0.998828         3397       853.33
     277.759     0.999023         3397      1024.00
     309.247     0.999121         3398      1137.78
     309.247     0.999219         3398      1280.00
     309.247     0.999316         3398      1462.86
     318.207     0.999414         3399      1706.67
     318.207     0.999512         3399      2048.00
     318.207     0.999561         3399      2275.56
     318.207     0.999609         3399      2560.00
     318.207     0.999658         3399      2925.71
     349.695     0.999707         3400      3413.33
     349.695     1.000000         3400          inf
#[Mean    =      108.248, StdDeviation   =       53.681]
#[Max     =      349.440, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.50KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 49)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 37)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 60)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 99)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 28)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-1'], 8)
original graph map
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 75.790ms, rate sampling interval: 312ms
  Thread calibration: mean lat.: 64.583ms, rate sampling interval: 285ms
  Thread calibration: mean lat.: 64.773ms, rate sampling interval: 231ms
  Thread calibration: mean lat.: 71.147ms, rate sampling interval: 247ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    60.88ms   33.38ms 188.80ms   62.09%
    Req/Sec     4.78      3.09     8.00     76.31%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.09ms
 75.000%   81.28ms
 90.000%  114.75ms
 99.000%  138.11ms
 99.900%  153.34ms
 99.990%  188.93ms
 99.999%  188.93ms
100.000%  188.93ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.223     0.000000            1         1.00
      18.575     0.100000          340         1.11
      32.479     0.200000          680         1.25
      39.103     0.300000         1021         1.43
      46.559     0.400000         1360         1.67
      53.087     0.500000         1700         2.00
      58.399     0.550000         1870         2.22
      65.599     0.600000         2043         2.50
      71.743     0.650000         2210         2.86
      76.415     0.700000         2380         3.33
      81.279     0.750000         2550         4.00
      86.719     0.775000         2635         4.44
      94.015     0.800000         2720         5.00
      95.999     0.825000         2807         5.71
      99.391     0.850000         2890         6.67
     107.711     0.875000         2976         8.00
     111.807     0.887500         3018         8.89
     114.751     0.900000         3064        10.00
     116.799     0.912500         3104        11.43
     119.103     0.925000         3147        13.33
     121.407     0.937500         3189        16.00
     122.047     0.943750         3210        17.78
     123.263     0.950000         3231        20.00
     124.351     0.956250         3252        22.86
     125.439     0.962500         3273        26.67
     127.103     0.968750         3294        32.00
     128.127     0.971875         3306        35.56
     128.575     0.975000         3315        40.00
     131.007     0.978125         3326        45.71
     134.015     0.981250         3338        53.33
     135.039     0.984375         3347        64.00
     136.063     0.985938         3354        71.11
     136.319     0.987500         3358        80.00
     137.983     0.989062         3363        91.43
     138.495     0.990625         3369       106.67
     140.031     0.992188         3375       128.00
     140.671     0.992969         3377       142.22
     141.439     0.993750         3379       160.00
     142.335     0.994531         3382       182.86
     143.359     0.995313         3386       213.33
     143.615     0.996094         3387       256.00
     144.127     0.996484         3389       284.44
     144.255     0.996875         3390       320.00
     144.895     0.997266         3391       365.71
     146.303     0.997656         3393       426.67
     147.327     0.998047         3394       512.00
     148.223     0.998242         3395       568.89
     148.223     0.998437         3395       640.00
     153.215     0.998633         3396       731.43
     153.343     0.998828         3397       853.33
     153.343     0.999023         3397      1024.00
     154.239     0.999121         3398      1137.78
     154.239     0.999219         3398      1280.00
     154.239     0.999316         3398      1462.86
     157.823     0.999414         3399      1706.67
     157.823     0.999512         3399      2048.00
     157.823     0.999561         3399      2275.56
     157.823     0.999609         3399      2560.00
     157.823     0.999658         3399      2925.71
     188.927     0.999707         3400      3413.33
     188.927     1.000000         3400          inf
#[Mean    =       60.883, StdDeviation   =       33.376]
#[Max     =      188.800, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.47KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 168.885ms, rate sampling interval: 550ms
  Thread calibration: mean lat.: 126.805ms, rate sampling interval: 433ms
  Thread calibration: mean lat.: 138.093ms, rate sampling interval: 465ms
  Thread calibration: mean lat.: 158.598ms, rate sampling interval: 635ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   110.47ms   53.29ms 343.30ms   67.13%
    Req/Sec     7.01      1.56    11.00     88.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  105.86ms
 75.000%  145.15ms
 90.000%  184.19ms
 99.000%  259.97ms
 99.900%  304.89ms
 99.990%  342.27ms
 99.999%  343.55ms
100.000%  343.55ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.959     0.000000            1         1.00
      45.151     0.100000          510         1.11
      62.335     0.200000         1020         1.25
      78.655     0.300000         1531         1.43
      93.311     0.400000         2040         1.67
     105.855     0.500000         2551         2.00
     110.783     0.550000         2806         2.22
     117.247     0.600000         3063         2.50
     125.951     0.650000         3316         2.86
     136.575     0.700000         3572         3.33
     145.151     0.750000         3825         4.00
     150.783     0.775000         3952         4.44
     154.879     0.800000         4086         5.00
     160.639     0.825000         4209         5.71
     168.575     0.850000         4335         6.67
     177.791     0.875000         4463         8.00
     180.479     0.887500         4526         8.89
     184.447     0.900000         4594        10.00
     188.159     0.912500         4653        11.43
     190.847     0.925000         4718        13.33
     195.071     0.937500         4781        16.00
     198.143     0.943750         4813        17.78
     203.647     0.950000         4845        20.00
     212.735     0.956250         4876        22.86
     217.215     0.962500         4908        26.67
     220.799     0.968750         4941        32.00
     223.743     0.971875         4956        35.56
     227.967     0.975000         4972        40.00
     230.527     0.978125         4989        45.71
     234.879     0.981250         5004        53.33
     237.439     0.984375         5020        64.00
     241.535     0.985938         5028        71.11
     245.631     0.987500         5036        80.00
     258.303     0.989062         5044        91.43
     260.607     0.990625         5053       106.67
     261.887     0.992188         5060       128.00
     262.399     0.992969         5065       142.22
     262.655     0.993750         5068       160.00
     263.423     0.994531         5074       182.86
     263.935     0.995313         5076       213.33
     264.959     0.996094         5080       256.00
     266.239     0.996484         5082       284.44
     268.287     0.996875         5084       320.00
     269.823     0.997266         5086       365.71
     271.871     0.997656         5088       426.67
     273.919     0.998047         5090       512.00
     279.551     0.998242         5091       568.89
     280.063     0.998437         5092       640.00
     280.575     0.998633         5093       731.43
     304.895     0.998828         5094       853.33
     305.151     0.999023         5095      1024.00
     305.151     0.999121         5095      1137.78
     308.991     0.999219         5096      1280.00
     308.991     0.999316         5096      1462.86
     315.903     0.999414         5097      1706.67
     315.903     0.999512         5097      2048.00
     315.903     0.999561         5097      2275.56
     342.271     0.999609         5098      2560.00
     342.271     0.999658         5098      2925.71
     342.271     0.999707         5098      3413.33
     342.271     0.999756         5098      4096.00
     342.271     0.999780         5098      4551.11
     343.551     0.999805         5099      5120.00
     343.551     1.000000         5099          inf
#[Mean    =      110.471, StdDeviation   =       53.291]
#[Max     =      343.296, Total count    =         5099]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5401 requests in 3.00m, 78.99MB read
Requests/sec:     30.00
Transfer/sec:    449.31KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 89)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 59)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 37)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 19)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 27)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 78)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 37)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 48)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 26)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-1'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 37)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 49)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 60)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 82)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 38)
filtered_path (['productpage-2', 'details-4'], 14)
filtered_path (['productpage-2', 'details-3'], 9)
original graph map
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 112.183ms, rate sampling interval: 291ms
  Thread calibration: mean lat.: 117.701ms, rate sampling interval: 313ms
  Thread calibration: mean lat.: 79.018ms, rate sampling interval: 276ms
  Thread calibration: mean lat.: 58.440ms, rate sampling interval: 164ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    90.02ms   43.51ms 239.49ms   64.09%
    Req/Sec     7.12      3.50    14.00     68.22%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   89.15ms
 75.000%  126.46ms
 90.000%  144.64ms
 99.000%  180.48ms
 99.900%  206.08ms
 99.990%  228.99ms
 99.999%  239.62ms
100.000%  239.62ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.167     0.000000            1         1.00
      26.639     0.100000          510         1.11
      51.551     0.200000         1020         1.25
      62.335     0.300000         1529         1.43
      76.031     0.400000         2044         1.67
      89.151     0.500000         2548         2.00
      98.111     0.550000         2803         2.22
     107.135     0.600000         3059         2.50
     116.543     0.650000         3313         2.86
     122.239     0.700000         3570         3.33
     126.463     0.750000         3825         4.00
     128.447     0.775000         3954         4.44
     130.751     0.800000         4077         5.00
     133.887     0.825000         4206         5.71
     136.831     0.850000         4335         6.67
     140.671     0.875000         4462         8.00
     142.591     0.887500         4523         8.89
     144.639     0.900000         4587        10.00
     146.175     0.912500         4653        11.43
     148.223     0.925000         4714        13.33
     151.807     0.937500         4780        16.00
     153.215     0.943750         4811        17.78
     154.751     0.950000         4844        20.00
     157.183     0.956250         4874        22.86
     160.511     0.962500         4905        26.67
     163.455     0.968750         4939        32.00
     164.863     0.971875         4955        35.56
     166.399     0.975000         4969        40.00
     167.807     0.978125         4985        45.71
     169.599     0.981250         5001        53.33
     171.135     0.984375         5018        64.00
     172.159     0.985938         5027        71.11
     173.439     0.987500         5034        80.00
     176.511     0.989062         5041        91.43
     182.911     0.990625         5049       106.67
     186.111     0.992188         5059       128.00
     186.751     0.992969         5061       142.22
     189.311     0.993750         5065       160.00
     190.335     0.994531         5069       182.86
     191.359     0.995313         5073       213.33
     192.127     0.996094         5077       256.00
     192.511     0.996484         5079       284.44
     192.895     0.996875         5081       320.00
     193.279     0.997266         5084       365.71
     194.047     0.997656         5085       426.67
     195.711     0.998047         5088       512.00
     195.711     0.998242         5088       568.89
     198.527     0.998437         5089       640.00
     203.391     0.998633         5090       731.43
     206.079     0.998828         5092       853.33
     206.079     0.999023         5092      1024.00
     206.079     0.999121         5092      1137.78
     217.215     0.999219         5093      1280.00
     217.215     0.999316         5093      1462.86
     225.279     0.999414         5094      1706.67
     225.279     0.999512         5094      2048.00
     225.279     0.999561         5094      2275.56
     228.991     0.999609         5095      2560.00
     228.991     0.999658         5095      2925.71
     228.991     0.999707         5095      3413.33
     228.991     0.999756         5095      4096.00
     228.991     0.999780         5095      4551.11
     239.615     0.999805         5096      5120.00
     239.615     1.000000         5096          inf
#[Mean    =       90.017, StdDeviation   =       43.514]
#[Max     =      239.488, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5401 requests in 3.00m, 78.99MB read
Requests/sec:     30.00
Transfer/sec:    449.30KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 151.501ms, rate sampling interval: 482ms
  Thread calibration: mean lat.: 159.948ms, rate sampling interval: 526ms
  Thread calibration: mean lat.: 143.849ms, rate sampling interval: 492ms
  Thread calibration: mean lat.: 218.560ms, rate sampling interval: 900ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   126.92ms   48.88ms 338.69ms   69.61%
    Req/Sec     9.69      1.50    14.00     94.04%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  123.84ms
 75.000%  157.44ms
 90.000%  189.57ms
 99.000%  258.82ms
 99.900%  299.26ms
 99.990%  336.13ms
 99.999%  338.94ms
100.000%  338.94ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.519     0.000000            1         1.00
      65.791     0.100000          680         1.11
      87.359     0.200000         1364         1.25
      99.199     0.300000         2041         1.43
     112.191     0.400000         2722         1.67
     123.839     0.500000         3399         2.00
     130.047     0.550000         3739         2.22
     136.191     0.600000         4082         2.50
     141.695     0.650000         4423         2.86
     149.503     0.700000         4764         3.33
     157.439     0.750000         5105         4.00
     161.919     0.775000         5271         4.44
     167.551     0.800000         5440         5.00
     173.567     0.825000         5609         5.71
     179.327     0.850000         5779         6.67
     184.703     0.875000         5953         8.00
     186.751     0.887500         6034         8.89
     189.695     0.900000         6121        10.00
     193.663     0.912500         6204        11.43
     197.631     0.925000         6291        13.33
     204.287     0.937500         6374        16.00
     209.279     0.943750         6416        17.78
     214.911     0.950000         6459        20.00
     219.135     0.956250         6501        22.86
     223.231     0.962500         6544        26.67
     225.919     0.968750         6587        32.00
     228.607     0.971875         6607        35.56
     231.167     0.975000         6631        40.00
     233.343     0.978125         6650        45.71
     236.671     0.981250         6672        53.33
     241.791     0.984375         6692        64.00
     248.703     0.985938         6704        71.11
     253.311     0.987500         6714        80.00
     257.919     0.989062         6724        91.43
     259.455     0.990625         6735       106.67
     260.735     0.992188         6745       128.00
     262.399     0.992969         6752       142.22
     263.679     0.993750         6756       160.00
     265.215     0.994531         6761       182.86
     267.519     0.995313         6767       213.33
     268.543     0.996094         6772       256.00
     270.335     0.996484         6775       284.44
     271.103     0.996875         6777       320.00
     275.199     0.997266         6780       365.71
     278.783     0.997656         6783       426.67
     283.391     0.998047         6786       512.00
     283.903     0.998242         6787       568.89
     285.439     0.998437         6788       640.00
     290.303     0.998633         6789       731.43
     299.263     0.998828         6791       853.33
     307.199     0.999023         6792      1024.00
     307.711     0.999121         6793      1137.78
     307.711     0.999219         6793      1280.00
     315.135     0.999316         6794      1462.86
     321.279     0.999414         6795      1706.67
     321.279     0.999512         6795      2048.00
     330.751     0.999561         6796      2275.56
     330.751     0.999609         6796      2560.00
     330.751     0.999658         6796      2925.71
     336.127     0.999707         6797      3413.33
     336.127     0.999756         6797      4096.00
     336.127     0.999780         6797      4551.11
     336.127     0.999805         6797      5120.00
     336.127     0.999829         6797      5851.43
     338.943     0.999854         6798      6826.67
     338.943     1.000000         6798          inf
#[Mean    =      126.921, StdDeviation   =       48.881]
#[Max     =      338.688, Total count    =         6798]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7199 requests in 3.00m, 105.29MB read
Requests/sec:     39.99
Transfer/sec:    598.90KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-3'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-1'], 8)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-3'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-2'], 11)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
original graph map
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 74.040ms, rate sampling interval: 244ms
  Thread calibration: mean lat.: 67.125ms, rate sampling interval: 249ms
  Thread calibration: mean lat.: 62.443ms, rate sampling interval: 238ms
  Thread calibration: mean lat.: 73.338ms, rate sampling interval: 249ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.90ms   34.08ms 189.57ms   64.04%
    Req/Sec     9.81      2.79    16.00     88.50%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   54.21ms
 75.000%   85.63ms
 90.000%  116.03ms
 99.000%  143.36ms
 99.900%  159.36ms
 99.990%  184.32ms
 99.999%  189.70ms
100.000%  189.70ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.871     0.000000            1         1.00
      23.055     0.100000          681         1.11
      32.719     0.200000         1360         1.25
      38.431     0.300000         2040         1.43
      48.223     0.400000         2720         1.67
      54.207     0.500000         3401         2.00
      60.895     0.550000         3741         2.22
      69.823     0.600000         4081         2.50
      75.007     0.650000         4420         2.86
      78.655     0.700000         4768         3.33
      85.631     0.750000         5102         4.00
      93.119     0.775000         5270         4.44
      97.407     0.800000         5440         5.00
     101.759     0.825000         5613         5.71
     103.999     0.850000         5780         6.67
     112.575     0.875000         5951         8.00
     114.751     0.887500         6036         8.89
     116.031     0.900000         6122        10.00
     117.183     0.912500         6205        11.43
     118.719     0.925000         6290        13.33
     120.767     0.937500         6375        16.00
     121.855     0.943750         6418        17.78
     123.135     0.950000         6460        20.00
     124.799     0.956250         6504        22.86
     126.399     0.962500         6545        26.67
     127.807     0.968750         6588        32.00
     128.703     0.971875         6610        35.56
     129.727     0.975000         6630        40.00
     131.199     0.978125         6653        45.71
     133.375     0.981250         6674        53.33
     135.295     0.984375         6695        64.00
     137.343     0.985938         6705        71.11
     139.391     0.987500         6716        80.00
     142.719     0.989062         6726        91.43
     143.871     0.990625         6738       106.67
     145.023     0.992188         6747       128.00
     145.919     0.992969         6754       142.22
     146.431     0.993750         6758       160.00
     147.455     0.994531         6763       182.86
     148.479     0.995313         6769       213.33
     149.119     0.996094         6774       256.00
     149.503     0.996484         6777       284.44
     150.399     0.996875         6779       320.00
     153.215     0.997266         6782       365.71
     155.391     0.997656         6785       426.67
     155.775     0.998047         6787       512.00
     157.183     0.998242         6789       568.89
     158.463     0.998437         6790       640.00
     158.719     0.998633         6791       731.43
     159.359     0.998828         6793       853.33
     159.615     0.999023         6794      1024.00
     159.999     0.999121         6795      1137.78
     159.999     0.999219         6795      1280.00
     160.639     0.999316         6796      1462.86
     162.431     0.999414         6797      1706.67
     162.431     0.999512         6797      2048.00
     173.567     0.999561         6798      2275.56
     173.567     0.999609         6798      2560.00
     173.567     0.999658         6798      2925.71
     184.319     0.999707         6799      3413.33
     184.319     0.999756         6799      4096.00
     184.319     0.999780         6799      4551.11
     184.319     0.999805         6799      5120.00
     184.319     0.999829         6799      5851.43
     189.695     0.999854         6800      6826.67
     189.695     1.000000         6800          inf
#[Mean    =       62.899, StdDeviation   =       34.082]
#[Max     =      189.568, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7201 requests in 3.00m, 105.31MB read
Requests/sec:     40.00
Transfer/sec:    599.04KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 189.949ms, rate sampling interval: 758ms
  Thread calibration: mean lat.: 177.310ms, rate sampling interval: 816ms
  Thread calibration: mean lat.: 191.809ms, rate sampling interval: 923ms
  Thread calibration: mean lat.: 198.235ms, rate sampling interval: 1099ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   127.57ms   56.64ms 433.15ms   68.72%
    Req/Sec    12.00      1.12    15.00     98.57%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  121.86ms
 75.000%  162.82ms
 90.000%  200.32ms
 99.000%  278.53ms
 99.900%  363.77ms
 99.990%  431.36ms
 99.999%  433.41ms
100.000%  433.41ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.303     0.000000            1         1.00
      56.927     0.100000          850         1.11
      80.191     0.200000         1702         1.25
      94.847     0.300000         2551         1.43
     109.119     0.400000         3403         1.67
     121.855     0.500000         4255         2.00
     129.023     0.550000         4676         2.22
     136.703     0.600000         5105         2.50
     144.767     0.650000         5530         2.86
     153.983     0.700000         5961         3.33
     162.815     0.750000         6375         4.00
     168.831     0.775000         6596         4.44
     174.847     0.800000         6802         5.00
     179.839     0.825000         7016         5.71
     185.599     0.850000         7228         6.67
     191.999     0.875000         7440         8.00
     195.199     0.887500         7546         8.89
     200.319     0.900000         7651        10.00
     205.823     0.912500         7757        11.43
     214.015     0.925000         7866        13.33
     220.543     0.937500         7969        16.00
     223.359     0.943750         8023        17.78
     227.839     0.950000         8076        20.00
     232.959     0.956250         8133        22.86
     238.207     0.962500         8182        26.67
     246.399     0.968750         8235        32.00
     251.391     0.971875         8262        35.56
     255.231     0.975000         8288        40.00
     258.431     0.978125         8317        45.71
     260.735     0.981250         8341        53.33
     264.447     0.984375         8368        64.00
     269.055     0.985938         8382        71.11
     272.639     0.987500         8395        80.00
     276.991     0.989062         8408        91.43
     280.063     0.990625         8421       106.67
     287.743     0.992188         8434       128.00
     292.863     0.992969         8442       142.22
     295.679     0.993750         8447       160.00
     299.007     0.994531         8455       182.86
     304.895     0.995313         8463       213.33
     310.271     0.996094         8467       256.00
     316.159     0.996484         8471       284.44
     318.975     0.996875         8474       320.00
     324.607     0.997266         8477       365.71
     331.775     0.997656         8481       426.67
     338.175     0.998047         8484       512.00
     343.295     0.998242         8486       568.89
     346.111     0.998437         8487       640.00
     359.167     0.998633         8489       731.43
     362.239     0.998828         8491       853.33
     363.775     0.999023         8492      1024.00
     372.223     0.999121         8493      1137.78
     382.463     0.999219         8494      1280.00
     387.327     0.999316         8495      1462.86
     393.471     0.999414         8496      1706.67
     393.471     0.999512         8496      2048.00
     410.111     0.999561         8497      2275.56
     410.111     0.999609         8497      2560.00
     421.631     0.999658         8498      2925.71
     421.631     0.999707         8498      3413.33
     421.631     0.999756         8498      4096.00
     431.359     0.999780         8499      4551.11
     431.359     0.999805         8499      5120.00
     431.359     0.999829         8499      5851.43
     431.359     0.999854         8499      6826.67
     431.359     0.999878         8499      8192.00
     433.407     0.999890         8500      9102.22
     433.407     1.000000         8500          inf
#[Mean    =      127.567, StdDeviation   =       56.641]
#[Max     =      433.152, Total count    =         8500]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  8999 requests in 3.00m, 131.61MB read
Requests/sec:     49.99
Transfer/sec:    748.65KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
original graph map
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 73.788ms, rate sampling interval: 248ms
  Thread calibration: mean lat.: 47.690ms, rate sampling interval: 194ms
  Thread calibration: mean lat.: 79.978ms, rate sampling interval: 278ms
  Thread calibration: mean lat.: 72.757ms, rate sampling interval: 245ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.00ms   34.86ms 177.28ms   60.88%
    Req/Sec    12.20      3.00    20.00     83.41%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   55.68ms
 75.000%   92.86ms
 90.000%  111.17ms
 99.000%  144.90ms
 99.900%  157.95ms
 99.990%  176.51ms
 99.999%  177.41ms
100.000%  177.41ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.615     0.000000            1         1.00
      21.295     0.100000          850         1.11
      28.847     0.200000         1700         1.25
      37.567     0.300000         2551         1.43
      48.671     0.400000         3401         1.67
      55.679     0.500000         4251         2.00
      62.303     0.550000         4678         2.22
      68.735     0.600000         5108         2.50
      74.623     0.650000         5528         2.86
      81.279     0.700000         5954         3.33
      92.863     0.750000         6378         4.00
      95.103     0.775000         6588         4.44
      97.407     0.800000         6803         5.00
      98.815     0.825000         7012         5.71
     100.927     0.850000         7230         6.67
     105.151     0.875000         7437         8.00
     108.863     0.887500         7544         8.89
     111.167     0.900000         7654        10.00
     113.343     0.912500         7760        11.43
     115.519     0.925000         7866        13.33
     118.591     0.937500         7970        16.00
     119.935     0.943750         8022        17.78
     121.663     0.950000         8077        20.00
     123.519     0.956250         8128        22.86
     125.823     0.962500         8181        26.67
     128.959     0.968750         8234        32.00
     132.095     0.971875         8260        35.56
     135.551     0.975000         8287        40.00
     138.751     0.978125         8316        45.71
     140.799     0.981250         8341        53.33
     142.591     0.984375         8370        64.00
     142.975     0.985938         8381        71.11
     143.615     0.987500         8394        80.00
     144.511     0.989062         8408        91.43
     145.407     0.990625         8421       106.67
     146.559     0.992188         8434       128.00
     147.071     0.992969         8440       142.22
     147.583     0.993750         8447       160.00
     148.735     0.994531         8453       182.86
     150.143     0.995313         8460       213.33
     152.063     0.996094         8466       256.00
     152.959     0.996484         8471       284.44
     153.215     0.996875         8473       320.00
     153.727     0.997266         8476       365.71
     154.623     0.997656         8480       426.67
     155.135     0.998047         8484       512.00
     155.391     0.998242         8486       568.89
     155.391     0.998437         8486       640.00
     156.159     0.998633         8488       731.43
     157.439     0.998828         8490       853.33
     157.951     0.999023         8491      1024.00
     158.079     0.999121         8492      1137.78
     159.871     0.999219         8493      1280.00
     160.255     0.999316         8494      1462.86
     160.895     0.999414         8495      1706.67
     160.895     0.999512         8495      2048.00
     165.247     0.999561         8496      2275.56
     165.247     0.999609         8496      2560.00
     175.615     0.999658         8497      2925.71
     175.615     0.999707         8497      3413.33
     175.615     0.999756         8497      4096.00
     176.511     0.999780         8498      4551.11
     176.511     0.999805         8498      5120.00
     176.511     0.999829         8498      5851.43
     176.511     0.999854         8498      6826.67
     176.511     0.999878         8498      8192.00
     177.407     0.999890         8499      9102.22
     177.407     1.000000         8499          inf
#[Mean    =       62.004, StdDeviation   =       34.857]
#[Max     =      177.280, Total count    =         8499]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.62MB read
Requests/sec:     49.99
Transfer/sec:    748.67KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 137.523ms, rate sampling interval: 451ms
  Thread calibration: mean lat.: 163.894ms, rate sampling interval: 626ms
  Thread calibration: mean lat.: 148.832ms, rate sampling interval: 507ms
  Thread calibration: mean lat.: 177.911ms, rate sampling interval: 556ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   107.22ms   54.22ms 446.21ms   67.45%
    Req/Sec     2.09      1.48     4.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  103.04ms
 75.000%  140.29ms
 90.000%  183.42ms
 99.000%  235.65ms
 99.900%  305.15ms
 99.990%  446.46ms
 99.999%  446.46ms
100.000%  446.46ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.751     0.000000            1         1.00
      39.359     0.100000          170         1.11
      58.335     0.200000          341         1.25
      72.511     0.300000          509         1.43
      89.279     0.400000          679         1.67
     103.039     0.500000          848         2.00
     109.567     0.550000          935         2.22
     115.135     0.600000         1020         2.50
     122.239     0.650000         1103         2.86
     133.631     0.700000         1188         3.33
     140.287     0.750000         1272         4.00
     144.895     0.775000         1315         4.44
     152.319     0.800000         1357         5.00
     159.999     0.825000         1400         5.71
     166.655     0.850000         1442         6.67
     176.767     0.875000         1485         8.00
     180.095     0.887500         1506         8.89
     183.551     0.900000         1527        10.00
     189.183     0.912500         1548        11.43
     191.231     0.925000         1570        13.33
     193.407     0.937500         1590        16.00
     195.071     0.943750         1601        17.78
     201.215     0.950000         1612        20.00
     210.943     0.956250         1622        22.86
     216.959     0.962500         1633        26.67
     219.263     0.968750         1643        32.00
     220.031     0.971875         1650        35.56
     221.567     0.975000         1654        40.00
     224.127     0.978125         1659        45.71
     228.607     0.981250         1665        53.33
     232.063     0.984375         1670        64.00
     233.855     0.985938         1673        71.11
     234.367     0.987500         1675        80.00
     235.519     0.989062         1678        91.43
     236.671     0.990625         1681       106.67
     242.815     0.992188         1683       128.00
     259.583     0.992969         1685       142.22
     261.631     0.993750         1686       160.00
     262.911     0.994531         1687       182.86
     264.959     0.995313         1689       213.33
     265.727     0.996094         1690       256.00
     266.239     0.996484         1691       284.44
     266.239     0.996875         1691       320.00
     278.527     0.997266         1692       365.71
     301.311     0.997656         1693       426.67
     301.311     0.998047         1693       512.00
     305.151     0.998242         1694       568.89
     305.151     0.998437         1694       640.00
     305.151     0.998633         1694       731.43
     307.967     0.998828         1695       853.33
     307.967     0.999023         1695      1024.00
     307.967     0.999121         1695      1137.78
     307.967     0.999219         1695      1280.00
     307.967     0.999316         1695      1462.86
     446.463     0.999414         1696      1706.67
     446.463     1.000000         1696          inf
#[Mean    =      107.216, StdDeviation   =       54.220]
#[Max     =      446.208, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 60)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 90)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 38)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 37)
filtered_path (['productpage-2', 'details-1'], 7)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 49)
filtered_path (['productpage-2', 'details-2'], 11)
original graph map
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 67.270ms, rate sampling interval: 262ms
  Thread calibration: mean lat.: 64.499ms, rate sampling interval: 273ms
  Thread calibration: mean lat.: 88.211ms, rate sampling interval: 346ms
  Thread calibration: mean lat.: 72.471ms, rate sampling interval: 269ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.99ms   34.53ms 280.58ms   64.80%
    Req/Sec     2.26      2.98     7.00     76.96%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   60.00ms
 75.000%   90.05ms
 90.000%  109.06ms
 99.000%  144.38ms
 99.900%  171.39ms
 99.990%  280.83ms
 99.999%  280.83ms
100.000%  280.83ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.407     0.000000            1         1.00
      19.519     0.100000          170         1.11
      29.439     0.200000          340         1.25
      40.383     0.300000          509         1.43
      46.783     0.400000          679         1.67
      59.999     0.500000          848         2.00
      67.263     0.550000          933         2.22
      72.255     0.600000         1019         2.50
      76.287     0.650000         1104         2.86
      82.687     0.700000         1188         3.33
      90.047     0.750000         1272         4.00
      92.479     0.775000         1315         4.44
      94.463     0.800000         1357         5.00
      96.511     0.825000         1400         5.71
      99.391     0.850000         1442         6.67
     102.399     0.875000         1486         8.00
     104.767     0.887500         1506         8.89
     109.439     0.900000         1527        10.00
     113.279     0.912500         1548        11.43
     115.711     0.925000         1569        13.33
     118.847     0.937500         1590        16.00
     120.383     0.943750         1601        17.78
     122.431     0.950000         1612        20.00
     124.991     0.956250         1622        22.86
     129.471     0.962500         1633        26.67
     132.095     0.968750         1643        32.00
     133.887     0.971875         1649        35.56
     135.807     0.975000         1654        40.00
     137.343     0.978125         1659        45.71
     140.671     0.981250         1665        53.33
     142.079     0.984375         1671        64.00
     142.335     0.985938         1673        71.11
     142.975     0.987500         1675        80.00
     143.743     0.989062         1678        91.43
     144.895     0.990625         1681       106.67
     145.663     0.992188         1683       128.00
     146.559     0.992969         1685       142.22
     149.247     0.993750         1686       160.00
     149.759     0.994531         1687       182.86
     154.879     0.995313         1689       213.33
     156.031     0.996094         1690       256.00
     156.287     0.996484         1691       284.44
     156.287     0.996875         1691       320.00
     156.671     0.997266         1692       365.71
     158.719     0.997656         1693       426.67
     158.719     0.998047         1693       512.00
     171.391     0.998242         1694       568.89
     171.391     0.998437         1694       640.00
     171.391     0.998633         1694       731.43
     178.815     0.998828         1695       853.33
     178.815     0.999023         1695      1024.00
     178.815     0.999121         1695      1137.78
     178.815     0.999219         1695      1280.00
     178.815     0.999316         1695      1462.86
     280.831     0.999414         1696      1706.67
     280.831     1.000000         1696          inf
#[Mean    =       62.988, StdDeviation   =       34.527]
#[Max     =      280.576, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1802 requests in 3.00m, 26.36MB read
Requests/sec:     10.01
Transfer/sec:    149.93KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 154.537ms, rate sampling interval: 594ms
  Thread calibration: mean lat.: 155.482ms, rate sampling interval: 529ms
  Thread calibration: mean lat.: 140.581ms, rate sampling interval: 424ms
  Thread calibration: mean lat.: 155.690ms, rate sampling interval: 537ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   123.55ms   48.21ms 334.59ms   69.82%
    Req/Sec     4.42      1.46     9.00     85.56%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  120.00ms
 75.000%  153.85ms
 90.000%  186.75ms
 99.000%  246.91ms
 99.900%  304.89ms
 99.990%  334.85ms
 99.999%  334.85ms
100.000%  334.85ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.415     0.000000            1         1.00
      62.719     0.100000          340         1.11
      86.591     0.200000          681         1.25
      96.191     0.300000         1020         1.43
     108.927     0.400000         1360         1.67
     119.999     0.500000         1702         2.00
     126.399     0.550000         1872         2.22
     134.271     0.600000         2043         2.50
     140.287     0.650000         2216         2.86
     146.175     0.700000         2380         3.33
     153.855     0.750000         2551         4.00
     156.671     0.775000         2637         4.44
     160.383     0.800000         2720         5.00
     166.783     0.825000         2806         5.71
     173.055     0.850000         2890         6.67
     180.223     0.875000         2976         8.00
     183.551     0.887500         3019         8.89
     186.751     0.900000         3060        10.00
     190.847     0.912500         3104        11.43
     194.687     0.925000         3147        13.33
     197.247     0.937500         3189        16.00
     199.551     0.943750         3211        17.78
     204.287     0.950000         3230        20.00
     213.631     0.956250         3252        22.86
     218.367     0.962500         3273        26.67
     222.975     0.968750         3295        32.00
     223.743     0.971875         3305        35.56
     227.583     0.975000         3315        40.00
     229.759     0.978125         3326        45.71
     232.191     0.981250         3337        53.33
     234.623     0.984375         3347        64.00
     237.055     0.985938         3353        71.11
     240.127     0.987500         3358        80.00
     245.759     0.989062         3364        91.43
     251.647     0.990625         3369       106.67
     259.711     0.992188         3374       128.00
     263.167     0.992969         3379       142.22
     263.167     0.993750         3379       160.00
     265.215     0.994531         3382       182.86
     269.567     0.995313         3385       213.33
     271.871     0.996094         3388       256.00
     273.151     0.996484         3389       284.44
     279.551     0.996875         3391       320.00
     279.551     0.997266         3391       365.71
     281.343     0.997656         3393       426.67
     283.135     0.998047         3394       512.00
     301.311     0.998242         3395       568.89
     301.311     0.998437         3395       640.00
     304.127     0.998633         3396       731.43
     304.895     0.998828         3397       853.33
     304.895     0.999023         3397      1024.00
     309.503     0.999121         3398      1137.78
     309.503     0.999219         3398      1280.00
     309.503     0.999316         3398      1462.86
     325.887     0.999414         3399      1706.67
     325.887     0.999512         3399      2048.00
     325.887     0.999561         3399      2275.56
     325.887     0.999609         3399      2560.00
     325.887     0.999658         3399      2925.71
     334.847     0.999707         3400      3413.33
     334.847     1.000000         3400          inf
#[Mean    =      123.545, StdDeviation   =       48.205]
#[Max     =      334.592, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.48KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-2'], 7)
filtered_path (['productpage-5', 'details-3'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-2'], 12)
original graph map
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 89.974ms, rate sampling interval: 296ms
  Thread calibration: mean lat.: 75.885ms, rate sampling interval: 267ms
  Thread calibration: mean lat.: 61.870ms, rate sampling interval: 232ms
  Thread calibration: mean lat.: 68.051ms, rate sampling interval: 254ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    65.59ms   35.54ms 204.80ms   60.76%
    Req/Sec     4.51      3.00     8.00     75.32%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   57.73ms
 75.000%   96.19ms
 90.000%  114.69ms
 99.000%  146.82ms
 99.900%  161.02ms
 99.990%  204.93ms
 99.999%  204.93ms
100.000%  204.93ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.479     0.000000            1         1.00
      21.951     0.100000          340         1.11
      30.703     0.200000          680         1.25
      45.183     0.300000         1021         1.43
      53.151     0.400000         1362         1.67
      57.727     0.500000         1700         2.00
      68.479     0.550000         1870         2.22
      73.855     0.600000         2045         2.50
      78.463     0.650000         2210         2.86
      85.183     0.700000         2380         3.33
      96.191     0.750000         2550         4.00
      98.623     0.775000         2635         4.44
     100.991     0.800000         2720         5.00
     103.039     0.825000         2807         5.71
     106.943     0.850000         2890         6.67
     112.191     0.875000         2975         8.00
     113.663     0.887500         3018         8.89
     114.687     0.900000         3062        10.00
     116.607     0.912500         3103        11.43
     118.783     0.925000         3146        13.33
     121.279     0.937500         3188        16.00
     122.879     0.943750         3209        17.78
     124.863     0.950000         3230        20.00
     126.911     0.956250         3252        22.86
     129.279     0.962500         3273        26.67
     131.711     0.968750         3294        32.00
     132.607     0.971875         3306        35.56
     133.247     0.975000         3315        40.00
     135.167     0.978125         3326        45.71
     137.471     0.981250         3337        53.33
     141.311     0.984375         3347        64.00
     143.999     0.985938         3353        71.11
     145.151     0.987500         3358        80.00
     146.431     0.989062         3363        91.43
     147.199     0.990625         3369       106.67
     148.735     0.992188         3374       128.00
     150.271     0.992969         3377       142.22
     150.655     0.993750         3380       160.00
     150.911     0.994531         3382       182.86
     152.319     0.995313         3387       213.33
     152.319     0.996094         3387       256.00
     152.703     0.996484         3389       284.44
     152.959     0.996875         3391       320.00
     152.959     0.997266         3391       365.71
     155.391     0.997656         3393       426.67
     156.287     0.998047         3394       512.00
     157.183     0.998242         3395       568.89
     157.183     0.998437         3395       640.00
     157.439     0.998633         3396       731.43
     161.023     0.998828         3397       853.33
     161.023     0.999023         3397      1024.00
     162.047     0.999121         3398      1137.78
     162.047     0.999219         3398      1280.00
     162.047     0.999316         3398      1462.86
     165.375     0.999414         3399      1706.67
     165.375     0.999512         3399      2048.00
     165.375     0.999561         3399      2275.56
     165.375     0.999609         3399      2560.00
     165.375     0.999658         3399      2925.71
     204.927     0.999707         3400      3413.33
     204.927     1.000000         3400          inf
#[Mean    =       65.594, StdDeviation   =       35.539]
#[Max     =      204.800, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3601 requests in 3.00m, 52.66MB read
Requests/sec:     20.00
Transfer/sec:    299.56KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 155.606ms, rate sampling interval: 605ms
  Thread calibration: mean lat.: 142.734ms, rate sampling interval: 525ms
  Thread calibration: mean lat.: 123.080ms, rate sampling interval: 425ms
  Thread calibration: mean lat.: 116.943ms, rate sampling interval: 395ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   110.51ms   53.25ms 315.65ms   66.43%
    Req/Sec     7.06      1.71    12.00     83.38%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  105.86ms
 75.000%  144.51ms
 90.000%  184.83ms
 99.000%  252.80ms
 99.900%  276.99ms
 99.990%  307.45ms
 99.999%  315.90ms
100.000%  315.90ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.359     0.000000            1         1.00
      44.959     0.100000          510         1.11
      61.823     0.200000         1020         1.25
      78.015     0.300000         1531         1.43
      92.799     0.400000         2040         1.67
     105.855     0.500000         2556         2.00
     111.871     0.550000         2805         2.22
     117.951     0.600000         3062         2.50
     127.295     0.650000         3314         2.86
     136.703     0.700000         3572         3.33
     144.511     0.750000         3825         4.00
     151.551     0.775000         3951         4.44
     156.927     0.800000         4079         5.00
     161.151     0.825000         4206         5.71
     169.215     0.850000         4333         6.67
     176.639     0.875000         4460         8.00
     181.503     0.887500         4525         8.89
     184.831     0.900000         4590        10.00
     187.263     0.912500         4653        11.43
     190.335     0.925000         4715        13.33
     196.479     0.937500         4779        16.00
     198.655     0.943750         4811        17.78
     201.983     0.950000         4843        20.00
     210.815     0.956250         4875        22.86
     216.191     0.962500         4908        26.67
     220.671     0.968750         4939        32.00
     224.767     0.971875         4954        35.56
     227.839     0.975000         4970        40.00
     231.039     0.978125         4987        45.71
     234.751     0.981250         5002        53.33
     238.207     0.984375         5018        64.00
     239.487     0.985938         5026        71.11
     240.639     0.987500         5034        80.00
     243.839     0.989062         5042        91.43
     259.327     0.990625         5050       106.67
     262.015     0.992188         5059       128.00
     262.911     0.992969         5062       142.22
     263.935     0.993750         5067       160.00
     264.447     0.994531         5070       182.86
     265.727     0.995313         5075       213.33
     266.239     0.996094         5079       256.00
     266.751     0.996484         5081       284.44
     267.263     0.996875         5082       320.00
     268.031     0.997266         5084       365.71
     268.287     0.997656         5086       426.67
     275.199     0.998047         5088       512.00
     275.455     0.998242         5089       568.89
     276.223     0.998437         5090       640.00
     276.479     0.998633         5091       731.43
     276.991     0.998828         5092       853.33
     283.391     0.999023         5093      1024.00
     283.391     0.999121         5093      1137.78
     303.871     0.999219         5094      1280.00
     303.871     0.999316         5094      1462.86
     306.687     0.999414         5095      1706.67
     306.687     0.999512         5095      2048.00
     306.687     0.999561         5095      2275.56
     307.455     0.999609         5096      2560.00
     307.455     0.999658         5096      2925.71
     307.455     0.999707         5096      3413.33
     307.455     0.999756         5096      4096.00
     307.455     0.999780         5096      4551.11
     315.903     0.999805         5097      5120.00
     315.903     1.000000         5097          inf
#[Mean    =      110.507, StdDeviation   =       53.254]
#[Max     =      315.648, Total count    =         5097]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.21KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 62)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
original graph map
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 58.043ms, rate sampling interval: 259ms
  Thread calibration: mean lat.: 79.976ms, rate sampling interval: 250ms
  Thread calibration: mean lat.: 73.783ms, rate sampling interval: 230ms
  Thread calibration: mean lat.: 73.467ms, rate sampling interval: 239ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.75ms   35.08ms 187.52ms   62.83%
    Req/Sec     7.10      2.28    17.00     88.90%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   58.72ms
 75.000%   90.75ms
 90.000%  110.33ms
 99.000%  147.58ms
 99.900%  159.49ms
 99.990%  181.38ms
 99.999%  187.65ms
100.000%  187.65ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.343     0.000000            1         1.00
      15.471     0.100000          510         1.11
      26.175     0.200000         1020         1.25
      40.319     0.300000         1530         1.43
      51.071     0.400000         2041         1.67
      58.719     0.500000         2549         2.00
      65.663     0.550000         2805         2.22
      71.487     0.600000         3061         2.50
      75.647     0.650000         3315         2.86
      83.647     0.700000         3568         3.33
      90.751     0.750000         3822         4.00
      93.119     0.775000         3950         4.44
      95.295     0.800000         4079         5.00
      97.407     0.825000         4208         5.71
      99.903     0.850000         4332         6.67
     102.655     0.875000         4459         8.00
     106.239     0.887500         4523         8.89
     110.399     0.900000         4588        10.00
     112.703     0.912500         4652        11.43
     114.559     0.925000         4714        13.33
     117.695     0.937500         4778        16.00
     120.831     0.943750         4810        17.78
     124.479     0.950000         4843        20.00
     127.103     0.956250         4874        22.86
     130.623     0.962500         4905        26.67
     134.015     0.968750         4938        32.00
     135.551     0.971875         4953        35.56
     137.471     0.975000         4969        40.00
     142.463     0.978125         4985        45.71
     143.743     0.981250         5001        53.33
     144.767     0.984375         5017        64.00
     145.663     0.985938         5025        71.11
     146.431     0.987500         5033        80.00
     147.455     0.989062         5041        91.43
     148.095     0.990625         5049       106.67
     149.631     0.992188         5057       128.00
     150.271     0.992969         5063       142.22
     150.399     0.993750         5067       160.00
     150.783     0.994531         5069       182.86
     152.575     0.995313         5073       213.33
     153.599     0.996094         5077       256.00
     153.983     0.996484         5079       284.44
     154.623     0.996875         5081       320.00
     155.007     0.997266         5083       365.71
     156.415     0.997656         5086       426.67
     157.183     0.998047         5087       512.00
     157.823     0.998242         5088       568.89
     158.975     0.998437         5090       640.00
     158.975     0.998633         5090       731.43
     159.487     0.998828         5091       853.33
     159.743     0.999023         5092      1024.00
     159.743     0.999121         5092      1137.78
     160.383     0.999219         5093      1280.00
     160.383     0.999316         5093      1462.86
     163.583     0.999414         5094      1706.67
     163.583     0.999512         5094      2048.00
     163.583     0.999561         5094      2275.56
     181.375     0.999609         5095      2560.00
     181.375     0.999658         5095      2925.71
     181.375     0.999707         5095      3413.33
     181.375     0.999756         5095      4096.00
     181.375     0.999780         5095      4551.11
     187.647     0.999805         5096      5120.00
     187.647     1.000000         5096          inf
#[Mean    =       62.753, StdDeviation   =       35.076]
#[Max     =      187.520, Total count    =         5096]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5402 requests in 3.00m, 79.00MB read
Requests/sec:     30.01
Transfer/sec:    449.37KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 119.762ms, rate sampling interval: 378ms
  Thread calibration: mean lat.: 234.855ms, rate sampling interval: 1273ms
  Thread calibration: mean lat.: 187.266ms, rate sampling interval: 780ms
  Thread calibration: mean lat.: 118.352ms, rate sampling interval: 359ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   108.08ms   51.45ms 340.74ms   68.28%
    Req/Sec     9.56      1.82    15.00     89.62%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  102.53ms
 75.000%  139.01ms
 90.000%  181.25ms
 99.000%  242.43ms
 99.900%  286.46ms
 99.990%  308.73ms
 99.999%  340.99ms
100.000%  340.99ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.967     0.000000            1         1.00
      46.559     0.100000          681         1.11
      63.967     0.200000         1361         1.25
      77.759     0.300000         2042         1.43
      91.135     0.400000         2721         1.67
     102.527     0.500000         3401         2.00
     108.607     0.550000         3741         2.22
     114.623     0.600000         4081         2.50
     121.919     0.650000         4421         2.86
     131.967     0.700000         4763         3.33
     139.007     0.750000         5108         4.00
     143.103     0.775000         5274         4.44
     148.607     0.800000         5444         5.00
     154.623     0.825000         5611         5.71
     162.175     0.850000         5783         6.67
     173.183     0.875000         5951         8.00
     177.279     0.887500         6036         8.89
     181.247     0.900000         6121        10.00
     185.215     0.912500         6207        11.43
     188.543     0.925000         6292        13.33
     192.639     0.937500         6377        16.00
     196.095     0.943750         6420        17.78
     203.135     0.950000         6461        20.00
     210.431     0.956250         6505        22.86
     216.831     0.962500         6546        26.67
     218.879     0.968750         6589        32.00
     220.159     0.971875         6611        35.56
     221.055     0.975000         6631        40.00
     223.359     0.978125         6655        45.71
     228.351     0.981250         6674        53.33
     233.599     0.984375         6695        64.00
     234.879     0.985938         6706        71.11
     237.055     0.987500         6716        80.00
     240.127     0.989062         6727        91.43
     251.263     0.990625         6738       106.67
     256.895     0.992188         6748       128.00
     258.431     0.992969         6754       142.22
     259.839     0.993750         6759       160.00
     261.119     0.994531         6764       182.86
     263.167     0.995313         6772       213.33
     263.935     0.996094         6775       256.00
     265.727     0.996484         6778       284.44
     267.775     0.996875         6780       320.00
     273.151     0.997266         6783       365.71
     274.175     0.997656         6786       426.67
     275.455     0.998047         6788       512.00
     278.271     0.998242         6790       568.89
     278.527     0.998437         6791       640.00
     281.087     0.998633         6792       731.43
     286.463     0.998828         6794       853.33
     286.975     0.999023         6795      1024.00
     293.375     0.999121         6796      1137.78
     293.375     0.999219         6796      1280.00
     294.911     0.999316         6797      1462.86
     304.127     0.999414         6798      1706.67
     304.127     0.999512         6798      2048.00
     305.663     0.999561         6799      2275.56
     305.663     0.999609         6799      2560.00
     305.663     0.999658         6799      2925.71
     308.735     0.999707         6800      3413.33
     308.735     0.999756         6800      4096.00
     308.735     0.999780         6800      4551.11
     308.735     0.999805         6800      5120.00
     308.735     0.999829         6800      5851.43
     340.991     0.999854         6801      6826.67
     340.991     1.000000         6801          inf
#[Mean    =      108.082, StdDeviation   =       51.449]
#[Max     =      340.736, Total count    =         6801]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.97KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-3'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
original graph map
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 76.581ms, rate sampling interval: 237ms
  Thread calibration: mean lat.: 64.122ms, rate sampling interval: 205ms
  Thread calibration: mean lat.: 45.983ms, rate sampling interval: 192ms
  Thread calibration: mean lat.: 90.936ms, rate sampling interval: 319ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    63.12ms   35.88ms 192.26ms   60.46%
    Req/Sec     9.48      2.67    19.00     83.72%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   54.56ms
 75.000%   96.00ms
 90.000%  113.66ms
 99.000%  150.91ms
 99.900%  162.43ms
 99.990%  169.73ms
 99.999%  192.38ms
100.000%  192.38ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.143     0.000000            1         1.00
      22.191     0.100000          680         1.11
      31.407     0.200000         1360         1.25
      37.663     0.300000         2041         1.43
      47.039     0.400000         2720         1.67
      54.559     0.500000         3405         2.00
      56.511     0.550000         3740         2.22
      72.063     0.600000         4082         2.50
      77.183     0.650000         4420         2.86
      85.759     0.700000         4760         3.33
      95.999     0.750000         5104         4.00
      97.407     0.775000         5276         4.44
     100.735     0.800000         5441         5.00
     102.783     0.825000         5611         5.71
     104.767     0.850000         5782         6.67
     108.031     0.875000         5952         8.00
     110.399     0.887500         6036         8.89
     113.663     0.900000         6121        10.00
     115.711     0.912500         6206        11.43
     117.823     0.925000         6290        13.33
     119.935     0.937500         6377        16.00
     121.087     0.943750         6418        17.78
     122.175     0.950000         6462        20.00
     123.903     0.956250         6504        22.86
     126.591     0.962500         6545        26.67
     129.663     0.968750         6588        32.00
     132.351     0.971875         6609        35.56
     135.679     0.975000         6630        40.00
     139.775     0.978125         6652        45.71
     143.231     0.981250         6677        53.33
     146.175     0.984375         6694        64.00
     147.327     0.985938         6707        71.11
     147.711     0.987500         6716        80.00
     150.527     0.989062         6727        91.43
     151.551     0.990625         6737       106.67
     152.959     0.992188         6747       128.00
     153.983     0.992969         6753       142.22
     155.519     0.993750         6758       160.00
     155.903     0.994531         6764       182.86
     156.287     0.995313         6769       213.33
     157.311     0.996094         6775       256.00
     157.695     0.996484         6777       284.44
     158.079     0.996875         6779       320.00
     159.999     0.997266         6783       365.71
     161.023     0.997656         6785       426.67
     161.279     0.998047         6789       512.00
     161.279     0.998242         6789       568.89
     161.407     0.998437         6790       640.00
     162.047     0.998633         6791       731.43
     162.431     0.998828         6793       853.33
     163.071     0.999023         6794      1024.00
     165.503     0.999121         6795      1137.78
     165.503     0.999219         6795      1280.00
     166.655     0.999316         6796      1462.86
     167.295     0.999414         6797      1706.67
     167.295     0.999512         6797      2048.00
     169.343     0.999561         6798      2275.56
     169.343     0.999609         6798      2560.00
     169.343     0.999658         6798      2925.71
     169.727     0.999707         6799      3413.33
     169.727     0.999756         6799      4096.00
     169.727     0.999780         6799      4551.11
     169.727     0.999805         6799      5120.00
     169.727     0.999829         6799      5851.43
     192.383     0.999854         6800      6826.67
     192.383     1.000000         6800          inf
#[Mean    =       63.123, StdDeviation   =       35.882]
#[Max     =      192.256, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.96KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 413.822ms, rate sampling interval: 2002ms
  Thread calibration: mean lat.: 211.193ms, rate sampling interval: 1057ms
  Thread calibration: mean lat.: 145.646ms, rate sampling interval: 453ms
  Thread calibration: mean lat.: 155.750ms, rate sampling interval: 538ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   132.84ms   55.20ms 484.35ms   68.78%
    Req/Sec    12.21      1.55    17.00     88.54%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  128.26ms
 75.000%  165.76ms
 90.000%  206.08ms
 99.000%  280.58ms
 99.900%  370.69ms
 99.990%  465.66ms
 99.999%  484.61ms
100.000%  484.61ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.591     0.000000            1         1.00
      66.495     0.100000          852         1.11
      87.359     0.200000         1706         1.25
     102.207     0.300000         2551         1.43
     115.071     0.400000         3400         1.67
     128.255     0.500000         4255         2.00
     136.063     0.550000         4675         2.22
     141.183     0.600000         5100         2.50
     147.583     0.650000         5530         2.86
     155.263     0.700000         5954         3.33
     165.759     0.750000         6376         4.00
     173.055     0.775000         6589         4.44
     178.559     0.800000         6804         5.00
     184.319     0.825000         7015         5.71
     190.079     0.850000         7226         6.67
     196.351     0.875000         7441         8.00
     200.703     0.887500         7544         8.89
     206.079     0.900000         7653        10.00
     211.839     0.912500         7759        11.43
     216.575     0.925000         7863        13.33
     221.055     0.937500         7970        16.00
     223.231     0.943750         8024        17.78
     227.455     0.950000         8075        20.00
     234.111     0.956250         8129        22.86
     239.231     0.962500         8182        26.67
     246.143     0.968750         8235        32.00
     249.471     0.971875         8261        35.56
     253.951     0.975000         8288        40.00
     259.839     0.978125         8315        45.71
     263.679     0.981250         8341        53.33
     268.287     0.984375         8370        64.00
     270.591     0.985938         8381        71.11
     275.967     0.987500         8395        80.00
     277.503     0.989062         8409        91.43
     281.599     0.990625         8422       106.67
     286.463     0.992188         8434       128.00
     292.351     0.992969         8441       142.22
     297.727     0.993750         8447       160.00
     302.591     0.994531         8454       182.86
     305.919     0.995313         8461       213.33
     317.951     0.996094         8467       256.00
     320.255     0.996484         8471       284.44
     324.095     0.996875         8474       320.00
     327.423     0.997266         8478       365.71
     331.519     0.997656         8481       426.67
     346.111     0.998047         8484       512.00
     349.695     0.998242         8486       568.89
     356.095     0.998437         8487       640.00
     365.567     0.998633         8489       731.43
     370.687     0.998828         8493       853.33
     370.687     0.999023         8493      1024.00
     370.687     0.999121         8493      1137.78
     376.831     0.999219         8494      1280.00
     378.879     0.999316         8495      1462.86
     379.391     0.999414         8496      1706.67
     379.391     0.999512         8496      2048.00
     388.351     0.999561         8497      2275.56
     388.351     0.999609         8497      2560.00
     415.487     0.999658         8498      2925.71
     415.487     0.999707         8498      3413.33
     415.487     0.999756         8498      4096.00
     465.663     0.999780         8499      4551.11
     465.663     0.999805         8499      5120.00
     465.663     0.999829         8499      5851.43
     465.663     0.999854         8499      6826.67
     465.663     0.999878         8499      8192.00
     484.607     0.999890         8500      9102.22
     484.607     1.000000         8500          inf
#[Mean    =      132.844, StdDeviation   =       55.196]
#[Max     =      484.352, Total count    =         8500]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  8999 requests in 3.00m, 131.61MB read
Requests/sec:     49.99
Transfer/sec:    748.64KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-3'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-1'], 59)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 17)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
original graph map
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 74.623ms, rate sampling interval: 284ms
  Thread calibration: mean lat.: 62.093ms, rate sampling interval: 237ms
  Thread calibration: mean lat.: 84.013ms, rate sampling interval: 282ms
  Thread calibration: mean lat.: 60.945ms, rate sampling interval: 231ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    63.65ms   35.85ms 324.10ms   63.36%
    Req/Sec    12.04      2.89    21.00     65.56%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   54.69ms
 75.000%   93.06ms
 90.000%  114.82ms
 99.000%  150.65ms
 99.900%  169.21ms
 99.990%  322.56ms
 99.999%  324.35ms
100.000%  324.35ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.375     0.000000            1         1.00
      21.807     0.100000          852         1.11
      33.439     0.200000         1702         1.25
      38.047     0.300000         2552         1.43
      48.703     0.400000         3400         1.67
      54.687     0.500000         4252         2.00
      61.823     0.550000         4675         2.22
      73.535     0.600000         5100         2.50
      77.247     0.650000         5527         2.86
      82.495     0.700000         5952         3.33
      93.055     0.750000         6376         4.00
      95.871     0.775000         6591         4.44
      98.751     0.800000         6805         5.00
     102.655     0.825000         7015         5.71
     104.767     0.850000         7225         6.67
     107.967     0.875000         7441         8.00
     111.743     0.887500         7545         8.89
     114.815     0.900000         7654        10.00
     116.479     0.912500         7759        11.43
     117.759     0.925000         7869        13.33
     119.167     0.937500         7971        16.00
     120.447     0.943750         8026        17.78
     121.599     0.950000         8075        20.00
     123.455     0.956250         8130        22.86
     126.783     0.962500         8182        26.67
     130.687     0.968750         8236        32.00
     132.735     0.971875         8261        35.56
     135.679     0.975000         8288        40.00
     141.567     0.978125         8315        45.71
     145.151     0.981250         8341        53.33
     146.943     0.984375         8368        64.00
     147.583     0.985938         8382        71.11
     148.735     0.987500         8396        80.00
     149.759     0.989062         8408        91.43
     151.167     0.990625         8422       106.67
     152.191     0.992188         8435       128.00
     153.343     0.992969         8441       142.22
     153.983     0.993750         8447       160.00
     155.263     0.994531         8454       182.86
     157.311     0.995313         8461       213.33
     158.463     0.996094         8467       256.00
     159.615     0.996484         8471       284.44
     160.127     0.996875         8475       320.00
     160.639     0.997266         8477       365.71
     160.895     0.997656         8481       426.67
     161.535     0.998047         8484       512.00
     165.631     0.998242         8486       568.89
     166.399     0.998437         8487       640.00
     166.911     0.998633         8489       731.43
     168.959     0.998828         8491       853.33
     169.215     0.999023         8492      1024.00
     194.687     0.999121         8493      1137.78
     220.159     0.999219         8494      1280.00
     229.119     0.999316         8495      1462.86
     230.911     0.999414         8496      1706.67
     230.911     0.999512         8496      2048.00
     270.335     0.999561         8497      2275.56
     270.335     0.999609         8497      2560.00
     320.255     0.999658         8498      2925.71
     320.255     0.999707         8498      3413.33
     320.255     0.999756         8498      4096.00
     322.559     0.999780         8499      4551.11
     322.559     0.999805         8499      5120.00
     322.559     0.999829         8499      5851.43
     322.559     0.999854         8499      6826.67
     322.559     0.999878         8499      8192.00
     324.351     0.999890         8500      9102.22
     324.351     1.000000         8500          inf
#[Mean    =       63.647, StdDeviation   =       35.855]
#[Max     =      324.096, Total count    =         8500]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9001 requests in 3.00m, 131.64MB read
Requests/sec:     50.00
Transfer/sec:    748.77KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 156.430ms, rate sampling interval: 630ms
  Thread calibration: mean lat.: 136.375ms, rate sampling interval: 486ms
  Thread calibration: mean lat.: 141.017ms, rate sampling interval: 621ms
  Thread calibration: mean lat.: 141.011ms, rate sampling interval: 479ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   104.46ms   51.11ms 386.30ms   68.99%
    Req/Sec     2.35      1.57     4.00    100.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   98.18ms
 75.000%  137.85ms
 90.000%  177.28ms
 99.000%  259.45ms
 99.900%  289.28ms
 99.990%  386.56ms
 99.999%  386.56ms
100.000%  386.56ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      10.383     0.000000            2         1.00
      44.255     0.100000          170         1.11
      59.199     0.200000          341         1.25
      70.591     0.300000          509         1.43
      86.783     0.400000          679         1.67
      98.175     0.500000          848         2.00
     105.791     0.550000          934         2.22
     111.615     0.600000         1018         2.50
     119.039     0.650000         1103         2.86
     126.079     0.700000         1188         3.33
     137.855     0.750000         1272         4.00
     141.695     0.775000         1316         4.44
     144.767     0.800000         1357         5.00
     150.015     0.825000         1401         5.71
     156.287     0.850000         1442         6.67
     162.943     0.875000         1485         8.00
     172.287     0.887500         1506         8.89
     177.279     0.900000         1528        10.00
     181.503     0.912500         1548        11.43
     184.447     0.925000         1569        13.33
     189.311     0.937500         1590        16.00
     190.591     0.943750         1601        17.78
     191.871     0.950000         1613        20.00
     194.431     0.956250         1622        22.86
     200.831     0.962500         1633        26.67
     213.887     0.968750         1643        32.00
     218.239     0.971875         1649        35.56
     219.007     0.975000         1654        40.00
     220.287     0.978125         1659        45.71
     222.719     0.981250         1665        53.33
     228.351     0.984375         1670        64.00
     234.495     0.985938         1673        71.11
     236.927     0.987500         1675        80.00
     242.175     0.989062         1678        91.43
     262.399     0.990625         1681       106.67
     262.911     0.992188         1683       128.00
     263.423     0.992969         1685       142.22
     264.191     0.993750         1686       160.00
     264.447     0.994531         1687       182.86
     265.215     0.995313         1690       213.33
     265.215     0.996094         1690       256.00
     268.031     0.996484         1691       284.44
     268.031     0.996875         1691       320.00
     279.295     0.997266         1692       365.71
     284.927     0.997656         1693       426.67
     284.927     0.998047         1693       512.00
     289.279     0.998242         1694       568.89
     289.279     0.998437         1694       640.00
     289.279     0.998633         1694       731.43
     343.039     0.998828         1695       853.33
     343.039     0.999023         1695      1024.00
     343.039     0.999121         1695      1137.78
     343.039     0.999219         1695      1280.00
     343.039     0.999316         1695      1462.86
     386.559     0.999414         1696      1706.67
     386.559     1.000000         1696          inf
#[Mean    =      104.461, StdDeviation   =       51.109]
#[Max     =      386.304, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.33MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
original graph map
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=10...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 82.653ms, rate sampling interval: 238ms
  Thread calibration: mean lat.: 62.060ms, rate sampling interval: 208ms
  Thread calibration: mean lat.: 100.731ms, rate sampling interval: 348ms
  Thread calibration: mean lat.: 84.318ms, rate sampling interval: 316ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    67.75ms   35.94ms 268.80ms   65.86%
    Req/Sec     2.29      3.18     9.00     86.53%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   66.11ms
 75.000%   93.38ms
 90.000%  117.63ms
 99.000%  149.76ms
 99.900%  169.09ms
 99.990%  269.05ms
 99.999%  269.05ms
100.000%  269.05ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.471     0.000000            1         1.00
      21.807     0.100000          170         1.11
      34.399     0.200000          342         1.25
      42.687     0.300000          509         1.43
      49.951     0.400000          679         1.67
      66.111     0.500000          848         2.00
      71.679     0.550000          933         2.22
      75.327     0.600000         1019         2.50
      78.527     0.650000         1103         2.86
      86.015     0.700000         1188         3.33
      93.375     0.750000         1272         4.00
      96.895     0.775000         1315         4.44
     100.479     0.800000         1357         5.00
     103.167     0.825000         1400         5.71
     109.375     0.850000         1442         6.67
     114.623     0.875000         1484         8.00
     116.351     0.887500         1506         8.89
     117.631     0.900000         1528        10.00
     119.167     0.912500         1548        11.43
     121.791     0.925000         1569        13.33
     125.695     0.937500         1590        16.00
     128.703     0.943750         1601        17.78
     133.375     0.950000         1612        20.00
     135.807     0.956250         1622        22.86
     141.311     0.962500         1633        26.67
     143.615     0.968750         1643        32.00
     144.639     0.971875         1649        35.56
     145.407     0.975000         1657        40.00
     145.663     0.978125         1659        45.71
     146.431     0.981250         1665        53.33
     147.327     0.984375         1670        64.00
     147.583     0.985938         1673        71.11
     147.839     0.987500         1676        80.00
     148.223     0.989062         1678        91.43
     151.295     0.990625         1681       106.67
     153.087     0.992188         1683       128.00
     155.903     0.992969         1685       142.22
     156.287     0.993750         1687       160.00
     156.287     0.994531         1687       182.86
     157.183     0.995313         1689       213.33
     157.439     0.996094         1690       256.00
     157.567     0.996484         1692       284.44
     157.567     0.996875         1692       320.00
     157.567     0.997266         1692       365.71
     160.639     0.997656         1693       426.67
     160.639     0.998047         1693       512.00
     169.087     0.998242         1694       568.89
     169.087     0.998437         1694       640.00
     169.087     0.998633         1694       731.43
     229.887     0.998828         1695       853.33
     229.887     0.999023         1695      1024.00
     229.887     0.999121         1695      1137.78
     229.887     0.999219         1695      1280.00
     229.887     0.999316         1695      1462.86
     269.055     0.999414         1696      1706.67
     269.055     1.000000         1696          inf
#[Mean    =       67.752, StdDeviation   =       35.937]
#[Max     =      268.800, Total count    =         1696]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  1800 requests in 3.00m, 26.32MB read
Requests/sec:     10.00
Transfer/sec:    149.73KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 160.868ms, rate sampling interval: 625ms
  Thread calibration: mean lat.: 146.945ms, rate sampling interval: 413ms
  Thread calibration: mean lat.: 180.852ms, rate sampling interval: 633ms
  Thread calibration: mean lat.: 157.912ms, rate sampling interval: 528ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   128.22ms   48.68ms 389.38ms   67.65%
    Req/Sec     4.41      1.40     9.00     88.91%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  127.42ms
 75.000%  159.62ms
 90.000%  188.41ms
 99.000%  259.58ms
 99.900%  308.73ms
 99.990%  389.63ms
 99.999%  389.63ms
100.000%  389.63ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

      11.375     0.000000            1         1.00
      65.087     0.100000          341         1.11
      85.055     0.200000          680         1.25
     102.207     0.300000         1021         1.43
     117.887     0.400000         1360         1.67
     127.423     0.500000         1702         2.00
     131.583     0.550000         1871         2.22
     136.447     0.600000         2040         2.50
     143.743     0.650000         2211         2.86
     152.319     0.700000         2382         3.33
     159.615     0.750000         2551         4.00
     164.095     0.775000         2638         4.44
     168.063     0.800000         2720         5.00
     173.695     0.825000         2808         5.71
     178.815     0.850000         2890         6.67
     182.911     0.875000         2977         8.00
     185.727     0.887500         3018         8.89
     188.415     0.900000         3060        10.00
     193.279     0.912500         3105        11.43
     197.119     0.925000         3145        13.33
     205.183     0.937500         3188        16.00
     209.023     0.943750         3209        17.78
     212.223     0.950000         3230        20.00
     216.575     0.956250         3253        22.86
     221.439     0.962500         3273        26.67
     225.279     0.968750         3294        32.00
     228.863     0.971875         3305        35.56
     230.015     0.975000         3315        40.00
     233.087     0.978125         3326        45.71
     235.391     0.981250         3337        53.33
     237.439     0.984375         3347        64.00
     239.743     0.985938         3353        71.11
     245.887     0.987500         3358        80.00
     256.511     0.989062         3363        91.43
     260.095     0.990625         3369       106.67
     262.655     0.992188         3374       128.00
     263.423     0.992969         3377       142.22
     264.191     0.993750         3379       160.00
     264.703     0.994531         3382       182.86
     267.007     0.995313         3385       213.33
     270.335     0.996094         3387       256.00
     273.919     0.996484         3389       284.44
     274.687     0.996875         3390       320.00
     276.223     0.997266         3391       365.71
     278.271     0.997656         3393       426.67
     279.295     0.998047         3394       512.00
     285.183     0.998242         3395       568.89
     285.183     0.998437         3395       640.00
     306.687     0.998633         3396       731.43
     308.735     0.998828         3397       853.33
     308.735     0.999023         3397      1024.00
     319.999     0.999121         3398      1137.78
     319.999     0.999219         3398      1280.00
     319.999     0.999316         3398      1462.86
     327.423     0.999414         3399      1706.67
     327.423     0.999512         3399      2048.00
     327.423     0.999561         3399      2275.56
     327.423     0.999609         3399      2560.00
     327.423     0.999658         3399      2925.71
     389.631     0.999707         3400      3413.33
     389.631     1.000000         3400          inf
#[Mean    =      128.219, StdDeviation   =       48.683]
#[Max     =      389.376, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3600 requests in 3.00m, 52.65MB read
Requests/sec:     20.00
Transfer/sec:    299.50KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 40)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
original graph map
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=20...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 84.860ms, rate sampling interval: 367ms
  Thread calibration: mean lat.: 63.151ms, rate sampling interval: 202ms
  Thread calibration: mean lat.: 59.569ms, rate sampling interval: 204ms
  Thread calibration: mean lat.: 56.962ms, rate sampling interval: 198ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    57.04ms   35.16ms 177.54ms   59.47%
    Req/Sec     4.62      3.89    10.00     88.70%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   52.35ms
 75.000%   88.38ms
 90.000%  101.50ms
 99.000%  146.43ms
 99.900%  159.36ms
 99.990%  177.66ms
 99.999%  177.66ms
100.000%  177.66ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.175     0.000000            1         1.00
      13.575     0.100000          341         1.11
      23.455     0.200000          680         1.25
      30.351     0.300000         1020         1.43
      40.991     0.400000         1360         1.67
      52.351     0.500000         1702         2.00
      54.239     0.550000         1874         2.22
      60.479     0.600000         2040         2.50
      69.375     0.650000         2212         2.86
      74.751     0.700000         2382         3.33
      88.383     0.750000         2550         4.00
      92.415     0.775000         2636         4.44
      94.143     0.800000         2720         5.00
      95.615     0.825000         2807         5.71
      97.215     0.850000         2892         6.67
      98.879     0.875000         2975         8.00
     100.415     0.887500         3018         8.89
     101.503     0.900000         3060        10.00
     104.319     0.912500         3104        11.43
     112.127     0.925000         3146        13.33
     115.135     0.937500         3188        16.00
     116.287     0.943750         3209        17.78
     117.567     0.950000         3230        20.00
     119.743     0.956250         3253        22.86
     123.775     0.962500         3273        26.67
     129.599     0.968750         3294        32.00
     132.351     0.971875         3305        35.56
     135.167     0.975000         3315        40.00
     138.495     0.978125         3326        45.71
     140.799     0.981250         3337        53.33
     143.487     0.984375         3347        64.00
     144.639     0.985938         3353        71.11
     145.791     0.987500         3361        80.00
     146.175     0.989062         3365        91.43
     146.943     0.990625         3370       106.67
     148.863     0.992188         3375       128.00
     149.119     0.992969         3377       142.22
     149.759     0.993750         3379       160.00
     150.783     0.994531         3383       182.86
     151.039     0.995313         3385       213.33
     151.423     0.996094         3387       256.00
     152.703     0.996484         3389       284.44
     152.831     0.996875         3390       320.00
     153.087     0.997266         3391       365.71
     155.263     0.997656         3393       426.67
     156.799     0.998047         3394       512.00
     158.207     0.998242         3395       568.89
     158.207     0.998437         3395       640.00
     158.847     0.998633         3396       731.43
     159.359     0.998828         3397       853.33
     159.359     0.999023         3397      1024.00
     162.175     0.999121         3398      1137.78
     162.175     0.999219         3398      1280.00
     162.175     0.999316         3398      1462.86
     163.711     0.999414         3399      1706.67
     163.711     0.999512         3399      2048.00
     163.711     0.999561         3399      2275.56
     163.711     0.999609         3399      2560.00
     163.711     0.999658         3399      2925.71
     177.663     0.999707         3400      3413.33
     177.663     1.000000         3400          inf
#[Mean    =       57.040, StdDeviation   =       35.159]
#[Max     =      177.536, Total count    =         3400]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  3601 requests in 3.00m, 52.66MB read
Requests/sec:     20.00
Transfer/sec:    299.55KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 144.679ms, rate sampling interval: 585ms
  Thread calibration: mean lat.: 108.032ms, rate sampling interval: 378ms
  Thread calibration: mean lat.: 140.283ms, rate sampling interval: 600ms
  Thread calibration: mean lat.: 119.560ms, rate sampling interval: 449ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   104.08ms   50.55ms 308.48ms   68.18%
    Req/Sec     6.87      1.56    11.00     85.93%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   99.26ms
 75.000%  137.47ms
 90.000%  175.62ms
 99.000%  238.08ms
 99.900%  270.85ms
 99.990%  294.40ms
 99.999%  308.73ms
100.000%  308.73ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.263     0.000000            1         1.00
      40.511     0.100000          510         1.11
      59.327     0.200000         1021         1.25
      73.215     0.300000         1530         1.43
      87.999     0.400000         2041         1.67
      99.263     0.500000         2551         2.00
     105.919     0.550000         2806         2.22
     110.847     0.600000         3065         2.50
     116.863     0.650000         3314         2.86
     127.167     0.700000         3569         3.33
     137.471     0.750000         3829         4.00
     141.311     0.775000         3953         4.44
     146.175     0.800000         4081         5.00
     151.807     0.825000         4209         5.71
     157.055     0.850000         4338         6.67
     164.223     0.875000         4462         8.00
     168.831     0.887500         4525         8.89
     175.871     0.900000         4593        10.00
     180.095     0.912500         4654        11.43
     183.423     0.925000         4718        13.33
     188.159     0.937500         4781        16.00
     190.207     0.943750         4812        17.78
     193.407     0.950000         4846        20.00
     195.327     0.956250         4876        22.86
     200.319     0.962500         4907        26.67
     210.559     0.968750         4939        32.00
     215.295     0.971875         4955        35.56
     217.215     0.975000         4971        40.00
     221.439     0.978125         4987        45.71
     224.639     0.981250         5003        53.33
     227.583     0.984375         5019        64.00
     229.759     0.985938         5027        71.11
     232.575     0.987500         5036        80.00
     236.799     0.989062         5043        91.43
     253.567     0.990625         5051       106.67
     257.791     0.992188         5059       128.00
     258.815     0.992969         5063       142.22
     259.967     0.993750         5067       160.00
     261.375     0.994531         5072       182.86
     261.631     0.995313         5076       213.33
     262.399     0.996094         5079       256.00
     262.655     0.996484         5081       284.44
     263.679     0.996875         5084       320.00
     263.935     0.997266         5086       365.71
     264.447     0.997656         5087       426.67
     264.959     0.998047         5090       512.00
     264.959     0.998242         5090       568.89
     265.215     0.998437         5091       640.00
     269.311     0.998633         5092       731.43
     270.847     0.998828         5093       853.33
     277.759     0.999023         5094      1024.00
     277.759     0.999121         5094      1137.78
     279.295     0.999219         5095      1280.00
     279.295     0.999316         5095      1462.86
     282.623     0.999414         5096      1706.67
     282.623     0.999512         5096      2048.00
     282.623     0.999561         5096      2275.56
     294.399     0.999609         5097      2560.00
     294.399     0.999658         5097      2925.71
     294.399     0.999707         5097      3413.33
     294.399     0.999756         5097      4096.00
     294.399     0.999780         5097      4551.11
     308.735     0.999805         5098      5120.00
     308.735     1.000000         5098          inf
#[Mean    =      104.080, StdDeviation   =       50.553]
#[Max     =      308.480, Total count    =         5098]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.98MB read
Requests/sec:     30.00
Transfer/sec:    449.22KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 131)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 73)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 73)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 54)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 43)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 32)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'details-2'], 11)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
original graph map
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=30...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 61.207ms, rate sampling interval: 226ms
  Thread calibration: mean lat.: 59.425ms, rate sampling interval: 231ms
  Thread calibration: mean lat.: 76.878ms, rate sampling interval: 285ms
  Thread calibration: mean lat.: 78.991ms, rate sampling interval: 256ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    60.45ms   32.59ms 172.16ms   63.86%
    Req/Sec     6.94      2.22    15.00     89.18%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   54.11ms
 75.000%   80.25ms
 90.000%  112.00ms
 99.000%  139.13ms
 99.900%  153.21ms
 99.990%  160.90ms
 99.999%  172.29ms
100.000%  172.29ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.063     0.000000            1         1.00
      22.479     0.100000          510         1.11
      30.063     0.200000         1020         1.25
      37.951     0.300000         1531         1.43
      47.135     0.400000         2040         1.67
      54.111     0.500000         2554         2.00
      59.679     0.550000         2804         2.22
      67.071     0.600000         3063         2.50
      71.999     0.650000         3319         2.86
      76.415     0.700000         3574         3.33
      80.255     0.750000         3825         4.00
      83.647     0.775000         3951         4.44
      90.367     0.800000         4078         5.00
      94.783     0.825000         4209         5.71
      98.303     0.850000         4335         6.67
     101.439     0.875000         4461         8.00
     106.943     0.887500         4524         8.89
     111.999     0.900000         4588        10.00
     114.047     0.912500         4652        11.43
     116.095     0.925000         4715        13.33
     118.783     0.937500         4780        16.00
     120.063     0.943750         4813        17.78
     121.151     0.950000         4843        20.00
     122.751     0.956250         4875        22.86
     123.711     0.962500         4906        26.67
     125.311     0.968750         4939        32.00
     126.207     0.971875         4954        35.56
     127.231     0.975000         4970        40.00
     129.279     0.978125         4987        45.71
     131.007     0.981250         5004        53.33
     132.991     0.984375         5018        64.00
     134.143     0.985938         5026        71.11
     136.063     0.987500         5034        80.00
     138.111     0.989062         5042        91.43
     140.927     0.990625         5050       106.67
     142.719     0.992188         5059       128.00
     143.487     0.992969         5062       142.22
     144.255     0.993750         5066       160.00
     144.895     0.994531         5070       182.86
     145.279     0.995313         5075       213.33
     145.535     0.996094         5078       256.00
     146.047     0.996484         5080       284.44
     146.815     0.996875         5082       320.00
     148.095     0.997266         5084       365.71
     148.991     0.997656         5086       426.67
     150.143     0.998047         5088       512.00
     151.167     0.998242         5089       568.89
     151.295     0.998437         5090       640.00
     152.703     0.998633         5091       731.43
     153.215     0.998828         5092       853.33
     154.239     0.999023         5093      1024.00
     154.239     0.999121         5093      1137.78
     154.495     0.999219         5094      1280.00
     154.495     0.999316         5094      1462.86
     160.127     0.999414         5095      1706.67
     160.127     0.999512         5095      2048.00
     160.127     0.999561         5095      2275.56
     160.895     0.999609         5096      2560.00
     160.895     0.999658         5096      2925.71
     160.895     0.999707         5096      3413.33
     160.895     0.999756         5096      4096.00
     160.895     0.999780         5096      4551.11
     172.287     0.999805         5097      5120.00
     172.287     1.000000         5097          inf
#[Mean    =       60.449, StdDeviation   =       32.590]
#[Max     =      172.160, Total count    =         5097]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  5400 requests in 3.00m, 78.97MB read
Requests/sec:     30.00
Transfer/sec:    449.20KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 180.454ms, rate sampling interval: 920ms
  Thread calibration: mean lat.: 171.117ms, rate sampling interval: 755ms
  Thread calibration: mean lat.: 127.669ms, rate sampling interval: 398ms
  Thread calibration: mean lat.: 190.782ms, rate sampling interval: 851ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   110.48ms   54.35ms 328.19ms   66.71%
    Req/Sec     9.56      1.39    15.00     81.35%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  104.70ms
 75.000%  146.69ms
 90.000%  186.24ms
 99.000%  259.33ms
 99.900%  301.82ms
 99.990%  323.33ms
 99.999%  328.45ms
100.000%  328.45ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       8.391     0.000000            1         1.00
      44.735     0.100000          683         1.11
      61.887     0.200000         1361         1.25
      76.735     0.300000         2041         1.43
      91.967     0.400000         2721         1.67
     104.703     0.500000         3401         2.00
     109.951     0.550000         3742         2.22
     117.247     0.600000         4082         2.50
     125.887     0.650000         4425         2.86
     136.191     0.700000         4767         3.33
     146.687     0.750000         5101         4.00
     152.063     0.775000         5275         4.44
     156.415     0.800000         5442         5.00
     162.815     0.825000         5612         5.71
     172.671     0.850000         5786         6.67
     179.199     0.875000         5952         8.00
     182.271     0.887500         6036         8.89
     186.239     0.900000         6122        10.00
     189.055     0.912500         6207        11.43
     192.639     0.925000         6293        13.33
     198.911     0.937500         6377        16.00
     203.135     0.943750         6419        17.78
     208.383     0.950000         6461        20.00
     215.039     0.956250         6505        22.86
     217.215     0.962500         6548        26.67
     219.775     0.968750         6591        32.00
     221.951     0.971875         6610        35.56
     226.047     0.975000         6631        40.00
     232.063     0.978125         6653        45.71
     234.879     0.981250         6674        53.33
     247.039     0.984375         6696        64.00
     252.287     0.985938         6706        71.11
     256.255     0.987500         6717        80.00
     258.559     0.989062         6728        91.43
     260.223     0.990625         6738       106.67
     262.655     0.992188         6749       128.00
     263.679     0.992969         6755       142.22
     266.751     0.993750         6759       160.00
     268.799     0.994531         6764       182.86
     271.615     0.995313         6771       213.33
     274.431     0.996094         6775       256.00
     275.967     0.996484         6778       284.44
     277.759     0.996875         6781       320.00
     278.527     0.997266         6783       365.71
     286.719     0.997656         6786       426.67
     294.911     0.998047         6788       512.00
     296.447     0.998242         6790       568.89
     298.495     0.998437         6791       640.00
     301.055     0.998633         6792       731.43
     301.823     0.998828         6795       853.33
     301.823     0.999023         6795      1024.00
     303.103     0.999121         6796      1137.78
     303.103     0.999219         6796      1280.00
     304.383     0.999316         6797      1462.86
     304.895     0.999414         6798      1706.67
     304.895     0.999512         6798      2048.00
     307.711     0.999561         6799      2275.56
     307.711     0.999609         6799      2560.00
     307.711     0.999658         6799      2925.71
     323.327     0.999707         6800      3413.33
     323.327     0.999756         6800      4096.00
     323.327     0.999780         6800      4551.11
     323.327     0.999805         6800      5120.00
     323.327     0.999829         6800      5851.43
     328.447     0.999854         6801      6826.67
     328.447     1.000000         6801          inf
#[Mean    =      110.476, StdDeviation   =       54.351]
#[Max     =      328.192, Total count    =         6801]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     39.99
Transfer/sec:    598.95KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 16)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 98)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-5', 'details-2'], 12)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 71)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 153)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
original graph map
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=40...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 63.865ms, rate sampling interval: 243ms
  Thread calibration: mean lat.: 69.550ms, rate sampling interval: 239ms
  Thread calibration: mean lat.: 83.502ms, rate sampling interval: 258ms
  Thread calibration: mean lat.: 84.177ms, rate sampling interval: 278ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    68.62ms   35.26ms 162.30ms   63.68%
    Req/Sec     9.55      2.70    16.00     87.01%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   66.56ms
 75.000%   98.24ms
 90.000%  118.46ms
 99.000%  149.12ms
 99.900%  159.10ms
 99.990%  162.05ms
 99.999%  162.43ms
100.000%  162.43ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.047     0.000000            1         1.00
      29.183     0.100000          680         1.11
      34.431     0.200000         1368         1.25
      40.831     0.300000         2041         1.43
      52.191     0.400000         2721         1.67
      66.559     0.500000         3400         2.00
      71.487     0.550000         3748         2.22
      74.431     0.600000         4082         2.50
      78.527     0.650000         4423         2.86
      86.719     0.700000         4761         3.33
      98.239     0.750000         5102         4.00
     100.287     0.775000         5273         4.44
     102.463     0.800000         5441         5.00
     107.711     0.825000         5611         5.71
     111.935     0.850000         5781         6.67
     114.623     0.875000         5951         8.00
     116.287     0.887500         6036         8.89
     118.463     0.900000         6122        10.00
     121.023     0.912500         6208        11.43
     123.071     0.925000         6294        13.33
     125.503     0.937500         6375        16.00
     127.231     0.943750         6418        17.78
     130.239     0.950000         6460        20.00
     134.271     0.956250         6504        22.86
     139.775     0.962500         6547        26.67
     142.207     0.968750         6589        32.00
     142.847     0.971875         6609        35.56
     143.615     0.975000         6630        40.00
     144.383     0.978125         6652        45.71
     145.535     0.981250         6673        53.33
     146.815     0.984375         6694        64.00
     147.327     0.985938         6707        71.11
     147.967     0.987500         6715        80.00
     148.863     0.989062         6726        91.43
     149.503     0.990625         6738       106.67
     150.911     0.992188         6747       128.00
     151.679     0.992969         6755       142.22
     151.935     0.993750         6759       160.00
     153.087     0.994531         6763       182.86
     154.751     0.995313         6770       213.33
     155.007     0.996094         6774       256.00
     155.391     0.996484         6777       284.44
     155.775     0.996875         6779       320.00
     156.287     0.997266         6782       365.71
     156.799     0.997656         6785       426.67
     156.927     0.998047         6787       512.00
     157.439     0.998242         6790       568.89
     157.439     0.998437         6790       640.00
     157.951     0.998633         6791       731.43
     159.103     0.998828         6793       853.33
     159.359     0.999023         6794      1024.00
     159.743     0.999121         6795      1137.78
     159.743     0.999219         6795      1280.00
     160.639     0.999316         6796      1462.86
     160.767     0.999414         6798      1706.67
     160.767     0.999512         6798      2048.00
     160.767     0.999561         6798      2275.56
     160.767     0.999609         6798      2560.00
     160.767     0.999658         6798      2925.71
     162.047     0.999707         6799      3413.33
     162.047     0.999756         6799      4096.00
     162.047     0.999780         6799      4551.11
     162.047     0.999805         6799      5120.00
     162.047     0.999829         6799      5851.43
     162.431     0.999854         6800      6826.67
     162.431     1.000000         6800          inf
#[Mean    =       68.620, StdDeviation   =       35.256]
#[Max     =      162.304, Total count    =         6800]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7200 requests in 3.00m, 105.30MB read
Requests/sec:     40.00
Transfer/sec:    598.96KB
Deleting existing virtual services...
virtualservice.networking.istio.io "productpage-to-reviews-vs" deleted
virtualservice.networking.istio.io "reviews-to-ratings-vs" deleted
destinationrule.networking.istio.io "details-dr" deleted
destinationrule.networking.istio.io "productpage-dr" deleted
destinationrule.networking.istio.io "ratings-dr" deleted
destinationrule.networking.istio.io "reviews-dr" deleted
Running first wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 194.073ms, rate sampling interval: 906ms
  Thread calibration: mean lat.: 132.286ms, rate sampling interval: 465ms
  Thread calibration: mean lat.: 145.868ms, rate sampling interval: 452ms
  Thread calibration: mean lat.: 578.189ms, rate sampling interval: 2557ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   120.38ms   47.54ms 392.45ms   69.54%
    Req/Sec    12.06      1.48    17.00     88.83%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  113.86ms
 75.000%  146.82ms
 90.000%  183.93ms
 99.000%  258.69ms
 99.900%  305.92ms
 99.990%  377.34ms
 99.999%  392.70ms
100.000%  392.70ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.207     0.000000            1         1.00
      66.111     0.100000          855         1.11
      81.919     0.200000         1703         1.25
      91.391     0.300000         2554         1.43
     102.591     0.400000         3404         1.67
     113.855     0.500000         4256         2.00
     119.807     0.550000         4678         2.22
     126.399     0.600000         5105         2.50
     132.735     0.650000         5528         2.86
     139.647     0.700000         5958         3.33
     146.815     0.750000         6385         4.00
     151.935     0.775000         6590         4.44
     157.055     0.800000         6803         5.00
     163.455     0.825000         7017         5.71
     172.927     0.850000         7230         6.67
     178.175     0.875000         7441         8.00
     181.503     0.887500         7549         8.89
     183.935     0.900000         7653        10.00
     187.903     0.912500         7760        11.43
     193.663     0.925000         7867        13.33
     199.935     0.937500         7972        16.00
     203.647     0.943750         8025        17.78
     207.743     0.950000         8079        20.00
     211.839     0.956250         8131        22.86
     217.215     0.962500         8186        26.67
     221.567     0.968750         8240        32.00
     224.255     0.971875         8264        35.56
     227.455     0.975000         8292        40.00
     231.935     0.978125         8317        45.71
     236.415     0.981250         8344        53.33
     243.327     0.984375         8371        64.00
     247.807     0.985938         8384        71.11
     251.007     0.987500         8397        80.00
     255.999     0.989062         8411        91.43
     260.735     0.990625         8424       106.67
     264.191     0.992188         8437       128.00
     265.727     0.992969         8444       142.22
     269.311     0.993750         8450       160.00
     274.175     0.994531         8458       182.86
     277.247     0.995313         8464       213.33
     280.063     0.996094         8471       256.00
     282.111     0.996484         8474       284.44
     285.439     0.996875         8477       320.00
     290.047     0.997266         8480       365.71
     292.863     0.997656         8484       426.67
     298.495     0.998047         8487       512.00
     300.543     0.998242         8490       568.89
     300.543     0.998437         8490       640.00
     302.591     0.998633         8492       731.43
     305.919     0.998828         8494       853.33
     312.063     0.999023         8495      1024.00
     321.279     0.999121         8496      1137.78
     325.119     0.999219         8497      1280.00
     325.887     0.999316         8498      1462.86
     335.615     0.999414         8499      1706.67
     335.615     0.999512         8499      2048.00
     345.855     0.999561         8500      2275.56
     345.855     0.999609         8500      2560.00
     368.639     0.999658         8501      2925.71
     368.639     0.999707         8501      3413.33
     368.639     0.999756         8501      4096.00
     377.343     0.999780         8502      4551.11
     377.343     0.999805         8502      5120.00
     377.343     0.999829         8502      5851.43
     377.343     0.999854         8502      6826.67
     377.343     0.999878         8502      8192.00
     392.703     0.999890         8503      9102.22
     392.703     1.000000         8503          inf
#[Mean    =      120.381, StdDeviation   =       47.542]
#[Max     =      392.448, Total count    =         8503]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9000 requests in 3.00m, 131.63MB read
Requests/sec:     49.99
Transfer/sec:    748.70KB
Running main.py with provided arguments...
Running proposed method with args: bookinfo http://10.108.230.9:8080
filtered_path
filtered_path (['productpage-1', 'details-3'], 16)
filtered_path (['productpage-1', 'details-4'], 5)
filtered_path (['productpage-1', 'reviews-3', 'ratings-3'], 58)
filtered_path (['productpage-1', 'reviews-1', 'ratings-3'], 30)
filtered_path (['productpage-1', 'reviews-2', 'ratings-3'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-3'], 48)
filtered_path (['productpage-1', 'details-1'], 60)
filtered_path (['productpage-1', 'details-2'], 6)
filtered_path (['productpage-1', 'reviews-3', 'ratings-5'], 35)
filtered_path (['productpage-1', 'reviews-1', 'ratings-5'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-5'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-5'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-1'], 36)
filtered_path (['productpage-1', 'reviews-1', 'ratings-1'], 52)
filtered_path (['productpage-1', 'reviews-2', 'ratings-1'], 8)
filtered_path (['productpage-1', 'reviews-4', 'ratings-1'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-2'], 47)
filtered_path (['productpage-1', 'reviews-1', 'ratings-2'], 71)
filtered_path (['productpage-1', 'reviews-2', 'ratings-2'], 7)
filtered_path (['productpage-1', 'reviews-4', 'ratings-2'], 48)
filtered_path (['productpage-1', 'reviews-3', 'ratings-4'], 88)
filtered_path (['productpage-1', 'reviews-1', 'ratings-4'], 41)
filtered_path (['productpage-1', 'reviews-2', 'ratings-4'], 90)
filtered_path (['productpage-1', 'reviews-4', 'ratings-4'], 48)
filtered_path (['productpage-5', 'details-3'], 7)
filtered_path (['productpage-5', 'details-4'], 36)
filtered_path (['productpage-5', 'reviews-4', 'ratings-3'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-5', 'reviews-1', 'ratings-3'], 18)
filtered_path (['productpage-5', 'details-1'], 8)
filtered_path (['productpage-5', 'details-2'], 11)
filtered_path (['productpage-5', 'reviews-4', 'ratings-5'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-5', 'reviews-1', 'ratings-5'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-1'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-5', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-5', 'reviews-1', 'ratings-1'], 40)
filtered_path (['productpage-5', 'reviews-4', 'ratings-2'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-5', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-5', 'reviews-1', 'ratings-2'], 59)
filtered_path (['productpage-5', 'reviews-4', 'ratings-4'], 61)
filtered_path (['productpage-5', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-5', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-5', 'reviews-1', 'ratings-4'], 29)
filtered_path (['productpage-3', 'details-3'], 9)
filtered_path (['productpage-3', 'details-4'], 70)
filtered_path (['productpage-3', 'reviews-4', 'ratings-3'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-3'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-3'], 47)
filtered_path (['productpage-3', 'reviews-1', 'ratings-3'], 31)
filtered_path (['productpage-3', 'details-1'], 9)
filtered_path (['productpage-3', 'details-2'], 10)
filtered_path (['productpage-3', 'reviews-4', 'ratings-5'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-5'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-5'], 24)
filtered_path (['productpage-3', 'reviews-1', 'ratings-5'], 72)
filtered_path (['productpage-3', 'reviews-4', 'ratings-1'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-1'], 29)
filtered_path (['productpage-3', 'reviews-3', 'ratings-1'], 25)
filtered_path (['productpage-3', 'reviews-1', 'ratings-1'], 53)
filtered_path (['productpage-3', 'reviews-4', 'ratings-2'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-2'], 28)
filtered_path (['productpage-3', 'reviews-3', 'ratings-2'], 36)
filtered_path (['productpage-3', 'reviews-1', 'ratings-2'], 72)
filtered_path (['productpage-3', 'reviews-4', 'ratings-4'], 16)
filtered_path (['productpage-3', 'reviews-2', 'ratings-4'], 111)
filtered_path (['productpage-3', 'reviews-3', 'ratings-4'], 77)
filtered_path (['productpage-3', 'reviews-1', 'ratings-4'], 42)
filtered_path (['productpage-4', 'details-3'], 59)
filtered_path (['productpage-4', 'details-4'], 5)
filtered_path (['productpage-4', 'reviews-2', 'ratings-3'], 14)
filtered_path (['productpage-4', 'reviews-3', 'ratings-3'], 37)
filtered_path (['productpage-4', 'reviews-4', 'ratings-3'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-3'], 29)
filtered_path (['productpage-4', 'details-1'], 59)
filtered_path (['productpage-4', 'details-2'], 7)
filtered_path (['productpage-4', 'reviews-2', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-3', 'ratings-5'], 14)
filtered_path (['productpage-4', 'reviews-4', 'ratings-5'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-5'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-3', 'ratings-1'], 15)
filtered_path (['productpage-4', 'reviews-4', 'ratings-1'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-1'], 51)
filtered_path (['productpage-4', 'reviews-2', 'ratings-2'], 14)
filtered_path (['productpage-4', 'reviews-3', 'ratings-2'], 26)
filtered_path (['productpage-4', 'reviews-4', 'ratings-2'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-2'], 70)
filtered_path (['productpage-4', 'reviews-2', 'ratings-4'], 97)
filtered_path (['productpage-4', 'reviews-3', 'ratings-4'], 67)
filtered_path (['productpage-4', 'reviews-4', 'ratings-4'], 130)
filtered_path (['productpage-4', 'reviews-1', 'ratings-4'], 40)
filtered_path (['productpage-2', 'details-3'], 9)
filtered_path (['productpage-2', 'details-4'], 13)
filtered_path (['productpage-2', 'reviews-2', 'ratings-3'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-3'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-3'], 22)
filtered_path (['productpage-2', 'reviews-3', 'ratings-3'], 61)
filtered_path (['productpage-2', 'details-1'], 8)
filtered_path (['productpage-2', 'details-2'], 11)
filtered_path (['productpage-2', 'reviews-2', 'ratings-5'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-5'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-5'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-5'], 38)
filtered_path (['productpage-2', 'reviews-2', 'ratings-1'], 70)
filtered_path (['productpage-2', 'reviews-4', 'ratings-1'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-1'], 44)
filtered_path (['productpage-2', 'reviews-3', 'ratings-1'], 39)
filtered_path (['productpage-2', 'reviews-2', 'ratings-2'], 69)
filtered_path (['productpage-2', 'reviews-4', 'ratings-2'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-2'], 63)
filtered_path (['productpage-2', 'reviews-3', 'ratings-2'], 50)
filtered_path (['productpage-2', 'reviews-2', 'ratings-4'], 152)
filtered_path (['productpage-2', 'reviews-4', 'ratings-4'], 41)
filtered_path (['productpage-2', 'reviews-1', 'ratings-4'], 33)
filtered_path (['productpage-2', 'reviews-3', 'ratings-4'], 91)
original graph map
Node: details-3
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: []
Node: details-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-3
  Upstream: ['reviews-2', 'reviews-4', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-1
  Upstream: []
  Downstream: ['details-3', 'details-1', 'reviews-3', 'reviews-1', 'details-2', 'reviews-2', 'details-4', 'reviews-4']
Node: productpage-5
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: reviews-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-3', 'ratings-1', 'ratings-4', 'ratings-2', 'ratings-5']
Node: reviews-1
  Upstream: ['productpage-1', 'productpage-3', 'productpage-5', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-3
  Upstream: []
  Downstream: ['details-4', 'reviews-4', 'details-1', 'details-2', 'details-3', 'reviews-2', 'reviews-3', 'reviews-1']
Node: details-1
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: reviews-4
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-2', 'ratings-3', 'ratings-4', 'ratings-5', 'ratings-1']
Node: reviews-3
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: ['ratings-1', 'ratings-3', 'ratings-4', 'ratings-2', 'ratings-5']
Node: productpage-4
  Upstream: []
  Downstream: ['details-1', 'details-3', 'details-2', 'details-4', 'reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
Node: details-2
  Upstream: ['productpage-3', 'productpage-5', 'productpage-1', 'productpage-2', 'productpage-4']
  Downstream: []
Node: ratings-5
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: productpage-2
  Upstream: []
  Downstream: ['details-4', 'reviews-2', 'reviews-4', 'details-3', 'details-1', 'details-2', 'reviews-1', 'reviews-3']
Node: ratings-1
  Upstream: ['reviews-2', 'reviews-3', 'reviews-4', 'reviews-1']
  Downstream: []
Node: ratings-2
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
Node: ratings-4
  Upstream: ['reviews-4', 'reviews-2', 'reviews-3', 'reviews-1']
  Downstream: []
--------------------
pair ('productpage', 'details')
Node productpage-1_out has demand -100
Node details-1_in has demand 125
Node details-2_in has demand 125
Node details-3_in has demand 125
Node details-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('reviews', 'ratings')
Node reviews-1_out has demand -100
Node ratings-1_in has demand 80
Node ratings-2_in has demand 80
Node ratings-3_in has demand 80
Node ratings-4_in has demand 80
Node ratings-5_in has demand 80
Node reviews-2_out has demand -100
Node reviews-3_out has demand -100
Node reviews-4_out has demand -100
Total demand in the graph: 0
--------------------
--------------------
pair ('productpage', 'reviews')
Node productpage-1_out has demand -100
Node reviews-1_in has demand 125
Node reviews-2_in has demand 125
Node reviews-3_in has demand 125
Node reviews-4_in has demand 125
Node productpage-2_out has demand -100
Node productpage-3_out has demand -100
Node productpage-4_out has demand -100
Node productpage-5_out has demand -100
Total demand in the graph: 0
--------------------
[('productpage', 'productpage-1', 'details', 'details-2', 100), ('productpage', 'productpage-1', 'reviews', 'reviews-2', 100), ('productpage', 'productpage-2', 'details', 'details-3', 50), ('productpage', 'productpage-2', 'details', 'details-4', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-1', 25), ('productpage', 'productpage-2', 'reviews', 'reviews-3', 50), ('productpage', 'productpage-2', 'reviews', 'reviews-4', 25), ('productpage', 'productpage-3', 'details', 'details-1', 25), ('productpage', 'productpage-3', 'details', 'details-3', 75), ('productpage', 'productpage-3', 'reviews', 'reviews-4', 100), ('productpage', 'productpage-4', 'details', 'details-2', 25), ('productpage', 'productpage-4', 'details', 'details-4', 75), ('productpage', 'productpage-4', 'reviews', 'reviews-2', 25), ('productpage', 'productpage-4', 'reviews', 'reviews-3', 75), ('productpage', 'productpage-5', 'details', 'details-1', 100), ('productpage', 'productpage-5', 'reviews', 'reviews-1', 100), ('reviews', 'reviews-1', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-1', 'ratings', 'ratings-3', 60), ('reviews', 'reviews-2', 'ratings', 'ratings-2', 20), ('reviews', 'reviews-2', 'ratings', 'ratings-5', 80), ('reviews', 'reviews-3', 'ratings', 'ratings-1', 40), ('reviews', 'reviews-3', 'ratings', 'ratings-2', 60), ('reviews', 'reviews-4', 'ratings', 'ratings-3', 20), ('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)]
service_routes_proposed (sorted)
('productpage', 'productpage-1', 'details', 'details-2', 100)
('productpage', 'productpage-1', 'reviews', 'reviews-2', 100)
('productpage', 'productpage-2', 'details', 'details-3', 50)
('productpage', 'productpage-2', 'details', 'details-4', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-1', 25)
('productpage', 'productpage-2', 'reviews', 'reviews-3', 50)
('productpage', 'productpage-2', 'reviews', 'reviews-4', 25)
('productpage', 'productpage-3', 'details', 'details-1', 25)
('productpage', 'productpage-3', 'details', 'details-3', 75)
('productpage', 'productpage-3', 'reviews', 'reviews-4', 100)
('productpage', 'productpage-4', 'details', 'details-2', 25)
('productpage', 'productpage-4', 'details', 'details-4', 75)
('productpage', 'productpage-4', 'reviews', 'reviews-2', 25)
('productpage', 'productpage-4', 'reviews', 'reviews-3', 75)
('productpage', 'productpage-5', 'details', 'details-1', 100)
('productpage', 'productpage-5', 'reviews', 'reviews-1', 100)
('reviews', 'reviews-1', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-1', 'ratings', 'ratings-3', 60)
('reviews', 'reviews-2', 'ratings', 'ratings-2', 20)
('reviews', 'reviews-2', 'ratings', 'ratings-5', 80)
('reviews', 'reviews-3', 'ratings', 'ratings-1', 40)
('reviews', 'reviews-3', 'ratings', 'ratings-2', 60)
('reviews', 'reviews-4', 'ratings', 'ratings-3', 20)
('reviews', 'reviews-4', 'ratings', 'ratings-4', 80)
Complete
Running second wrk2 load test with QPS=50...
Running 3m test @ http://10.108.73.23:9080/productpage
  4 threads and 10 connections
  Thread calibration: mean lat.: 59.793ms, rate sampling interval: 199ms
  Thread calibration: mean lat.: 71.640ms, rate sampling interval: 254ms
  Thread calibration: mean lat.: 71.033ms, rate sampling interval: 254ms
  Thread calibration: mean lat.: 61.050ms, rate sampling interval: 233ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    58.52ms   33.75ms 161.28ms   57.83%
    Req/Sec    11.97      3.28    21.00     80.91%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   53.57ms
 75.000%   83.58ms
 90.000%  105.34ms
 99.000%  140.29ms
 99.900%  153.34ms
 99.990%  160.00ms
 99.999%  161.41ms
100.000%  161.41ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       9.031     0.000000            1         1.00
      13.743     0.100000          850         1.11
      24.895     0.200000         1705         1.25
      35.167     0.300000         2558         1.43
      47.519     0.400000         3401         1.67
      53.567     0.500000         4251         2.00
      55.455     0.550000         4678         2.22
      61.023     0.600000         5100         2.50
      69.183     0.650000         5525         2.86
      75.455     0.700000         5952         3.33
      83.583     0.750000         6373         4.00
      92.095     0.775000         6586         4.44
      94.719     0.800000         6809         5.00
      96.063     0.825000         7020         5.71
      98.047     0.850000         7224         6.67
     100.223     0.875000         7435         8.00
     101.375     0.887500         7546         8.89
     105.471     0.900000         7648        10.00
     111.871     0.912500         7754        11.43
     113.855     0.925000         7864        13.33
     115.903     0.937500         7966        16.00
     117.759     0.943750         8024        17.78
     118.911     0.950000         8076        20.00
     120.895     0.956250         8126        22.86
     122.303     0.962500         8182        26.67
     124.223     0.968750         8233        32.00
     125.503     0.971875         8260        35.56
     126.207     0.975000         8285        40.00
     127.295     0.978125         8312        45.71
     130.047     0.981250         8338        53.33
     133.503     0.984375         8365        64.00
     135.039     0.985938         8379        71.11
     136.703     0.987500         8391        80.00
     139.391     0.989062         8405        91.43
     141.567     0.990625         8418       106.67
     142.719     0.992188         8431       128.00
     143.871     0.992969         8438       142.22
     144.639     0.993750         8445       160.00
     145.407     0.994531         8452       182.86
     145.791     0.995313         8458       213.33
     146.943     0.996094         8465       256.00
     147.839     0.996484         8468       284.44
     148.095     0.996875         8471       320.00
     148.479     0.997266         8475       365.71
     148.863     0.997656         8478       426.67
     149.631     0.998047         8482       512.00
     149.759     0.998242         8483       568.89
     150.015     0.998437         8484       640.00
     150.271     0.998633         8486       731.43
     151.679     0.998828         8488       853.33
     153.343     0.999023         8489      1024.00
     154.111     0.999121         8490      1137.78
     155.263     0.999219         8491      1280.00
     155.519     0.999316         8492      1462.86
     156.159     0.999414         8493      1706.67
     156.159     0.999512         8493      2048.00
     157.439     0.999561         8494      2275.56
     157.439     0.999609         8494      2560.00
     157.567     0.999658         8495      2925.71
     157.567     0.999707         8495      3413.33
     157.567     0.999756         8495      4096.00
     159.999     0.999780         8496      4551.11
     159.999     0.999805         8496      5120.00
     159.999     0.999829         8496      5851.43
     159.999     0.999854         8496      6826.67
     159.999     0.999878         8496      8192.00
     161.407     0.999890         8497      9102.22
     161.407     1.000000         8497          inf
#[Mean    =       58.523, StdDeviation   =       33.752]
#[Max     =      161.280, Total count    =         8497]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  9001 requests in 3.00m, 131.64MB read
Requests/sec:     50.00
Transfer/sec:    748.78KB
deployment.apps "details-1" deleted
deployment.apps "details-2" deleted
deployment.apps "details-3" deleted
deployment.apps "details-4" deleted
deployment.apps "productpage-1" deleted
deployment.apps "productpage-2" deleted
deployment.apps "productpage-3" deleted
deployment.apps "productpage-4" deleted
deployment.apps "productpage-5" deleted
deployment.apps "ratings-1" deleted
deployment.apps "ratings-2" deleted
deployment.apps "ratings-3" deleted
deployment.apps "ratings-4" deleted
deployment.apps "ratings-5" deleted
deployment.apps "reviews-1" deleted
deployment.apps "reviews-2" deleted
deployment.apps "reviews-3" deleted
deployment.apps "reviews-4" deleted
Script execution completed.
Executing script: /home/dnc/master/paper2024/benchcode/bookinfo/default.sh

